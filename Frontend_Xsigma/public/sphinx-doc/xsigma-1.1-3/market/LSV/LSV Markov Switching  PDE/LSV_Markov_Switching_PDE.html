<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="author" title="About these documents" href="../../../about.html" /><link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="1.7. Interest Rate Volatility Model GSABR" href="../../SABR/index.html" /><link rel="prev" title="1.6.1.4. LSV Markov Switching : Monte Carlo" href="../LSV%20Markov%20Switching%20%20Monte%20Carlo/LSV_Markov_Switching_Monte_Carlo.html" />

    <link rel="shortcut icon" href="../../../_static/xsigma_favicon.png"/><!-- Generated with Sphinx 7.2.6 and Furo 2023.09.10 -->
        <title>1.6.1.5. LSV Markov Switching : PDE - PRETORIAN Documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=8c702e86" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=8c702e86" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #0066cc;
  --color-brand-content: #0066cc;
  --color-admonition-background: #f8f9fa;
  --color-sidebar-background: #f8f9fa;
  --color-sidebar-background-border: #e9ecef;
  --font-stack: system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif;
  --font-stack--monospace: SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #4da6ff;
  --color-brand-content: #4da6ff;
  --color-admonition-background: #1e1e1e;
  --color-sidebar-background: #1e1e1e;
  --color-sidebar-background-border: #404040;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #4da6ff;
  --color-brand-content: #4da6ff;
  --color-admonition-background: #1e1e1e;
  --color-sidebar-background: #1e1e1e;
  --color-sidebar-background-border: #404040;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">PRETORIAN Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../../_static/Logo.ico" alt="Logo"/>
  </div>
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../../_static/../../Logo.ico" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../../_static/../../Logo.ico" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">PRETORIAN Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../about.html">About</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../index.html">1. Market</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 1. Market</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ASV/index.html">1.1. Analytical Sigma Volatility (ASV) Model</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 1.1. Analytical Sigma Volatility (ASV) Model</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/executive_summary.html">1.1.2.2.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/scope.html">1.1.2.2.2. Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/product_and_portfolio.html">1.1.2.2.3. Product and Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/model_methodology.html">1.1.2.2.4. Model Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/implementation.html">1.1.2.2.5. Implementation and Numerical Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/calibration.html">1.1.2.2.6. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/risk_analysis.html">1.1.2.2.7. Risk Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/testing_and_validation.html">1.1.2.2.8. Testing and Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/general_limitations.html">1.1.2.2.9. General Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/model_monitoring.html">1.1.2.2.10. Model Monitoring and KPIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/user_guide.html">1.1.2.2.11. User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/references.html">1.1.2.2.12. References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/README.html">1.1.2.2.13. Analytical Sigma Volatility (ASV) Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/executive_summary.html">1.1.2.2.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/scope.html">1.1.2.2.2. Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/product_and_portfolio.html">1.1.2.2.3. Product and Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/model_methodology.html">1.1.2.2.4. Model Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/implementation.html">1.1.2.2.5. Implementation and Numerical Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/calibration.html">1.1.2.2.6. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/risk_analysis.html">1.1.2.2.7. Risk Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/testing_and_validation.html">1.1.2.2.8. Testing and Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/general_limitations.html">1.1.2.2.9. General Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/model_monitoring.html">1.1.2.2.10. Model Monitoring and KPIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/user_guide.html">1.1.2.2.11. User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/references.html">1.1.2.2.12. References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/README.html">1.1.2.2.13. Analytical Sigma Volatility (ASV) Documentation</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../Curve%20Construction/index.html">1.2. Curve Construction and Risk Framework (NCF)</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 1.2. Curve Construction and Risk Framework (NCF)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/executive_summary.html">1.2.2.2.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/scope.html">1.2.2.2.2. Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/product_and_portfolio.html">1.2.2.2.3. Product and Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/model_methodology.html">1.2.2.2.4. Model Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/implementation.html">1.2.2.2.5. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/calibration.html">1.2.2.2.6. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/risk_analysis.html">1.2.2.2.7. Risk Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/testing_and_validation.html">1.2.2.2.8. Testing and Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/general_limitations.html">1.2.2.2.9. General Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/model_monitoring.html">1.2.2.2.10. Model Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/development_feedback.html">1.2.2.2.11. Development Feedback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/references.html">1.2.2.2.12. References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/README.html">1.2.2.2.13. Curve Construction and Risk Framework Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/executive_summary.html">1.2.2.2.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/scope.html">1.2.2.2.2. Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/product_and_portfolio.html">1.2.2.2.3. Product and Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/model_methodology.html">1.2.2.2.4. Model Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/implementation.html">1.2.2.2.5. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/calibration.html">1.2.2.2.6. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/risk_analysis.html">1.2.2.2.7. Risk Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/testing_and_validation.html">1.2.2.2.8. Testing and Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/general_limitations.html">1.2.2.2.9. General Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/model_monitoring.html">1.2.2.2.10. Model Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/development_feedback.html">1.2.2.2.11. Development Feedback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/references.html">1.2.2.2.12. References</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/index.html">1.3. FX Analytic Volatility Surfaces</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of 1.3. FX Analytic Volatility Surfaces</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/executive_summary.html">1.3.3.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/scope.html">1.3.3.2. Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/product_payoff_portfolio.html">1.3.3.3. Product / Payoff / Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/model_smile_models.html">1.3.3.4. Smile Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/model_atm_time_models.html">1.3.3.5. ATM Time Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/model_wing_time_models.html">1.3.3.6. Wing Time Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/implementation_numerical_schema.html">1.3.3.7. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/calibration.html">1.3.3.8. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/risk_bumping_methodology.html">1.3.3.9. Risk Bumping Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/risk_inputs_limitations.html">1.3.3.10. Risk Inputs &amp; Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/testing_plan_implementation.html">1.3.3.11. Testing Plan &amp; Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/testing_stress_scenarios.html">1.3.3.12. Stress Testing &amp; Scenarios</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/testing_accuracy_stability.html">1.3.3.13. Accuracy &amp; Stability Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/general_limitations.html">1.3.3.14. General Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/model_monitoring_kpis.html">1.3.3.15. Model Monitoring &amp; KPIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/development_feedback_summary.html">1.3.3.16. Development Feedback Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/references.html">1.3.3.17. References</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../Implied%20Volatility%20Filter/index.html">1.4. Implied Volatility Filter</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of 1.4. Implied Volatility Filter</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/executive_summary.html">1.4.1.5.1.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/scope.html">1.4.1.5.1.2. Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/product_payoff_portfolio.html">1.4.1.5.1.3. Product / Payoff / Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/model_methodology.html">1.4.1.5.1.4. Model / Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/implementation_numerical_schema.html">1.4.1.5.1.5. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/calibration.html">1.4.1.5.1.6. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/risk_factors.html">1.4.1.5.1.7. Risk Analysis Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/testing_and_validation.html">1.4.1.5.1.8. Tests &amp; Outcome Analyses performed on Payoff / Model / Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/appendix.html">1.4.1.5.1.9. Appendix: Quality of bid/ask quotes</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../Ir/index.html">1.5. Linear Interest Rate Swaps</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 1.5. Linear Interest Rate Swaps</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/executive_summary.html">1.5.1.4.1.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/scope.html">1.5.1.4.1.2. Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/product_payoff_portfolio.html">1.5.1.4.1.3. Product / Payoff / Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/model_methodology.html">1.5.1.4.1.4. Model / Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/implementation_numerical_schema.html">1.5.1.4.1.5. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/calibration.html">1.5.1.4.1.6. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/risk_factors.html">1.5.1.4.1.7. Risk Analysis Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/testing_and_validation.html">1.5.1.4.1.8. Tests &amp; Outcome Analyses performed on Payoff / Model / Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/model_monitoring_kpis.html">1.5.1.4.1.9. Model Monitoring – KPIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/references.html">1.5.1.4.1.10. References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/applicable_policy_standards.html">1.5.1.4.1.11. Applicable Policy Standards</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../index.html">1.6. LSV Guides</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of 1.6. LSV Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current has-children"><a class="reference internal" href="../LSV.html">1.6.1. LSV</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of 1.6.1. LSV</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../FX%20LSV%20Markov%20Switching%20%20Monte%20Carlo/FX_LSV_Markov_Switching_Monte_Carlo.html">1.6.1.1. FX LSV Markov Switching : Monte Carlo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../FX%20LSV%20Markov%20Switching%20PDE/FX_LSV_Markov_Switching_PDE.html">1.6.1.2. FX LSV Markov Switching : PDE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Local%20Volatility%20PDE%20and%20MC/Local_Volatility_PDE_and_MC.html">1.6.1.3. Local Volatility: PDE and MC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../LSV%20Markov%20Switching%20%20Monte%20Carlo/LSV_Markov_Switching_Monte_Carlo.html">1.6.1.4. LSV Markov Switching : Monte Carlo</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">1.6.1.5. LSV Markov Switching : PDE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../SABR/index.html">1.7. Interest Rate Volatility Model GSABR</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 1.7. Interest Rate Volatility Model GSABR</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/executive_summary.html">1.7.1.4.1.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/scope.html">1.7.1.4.1.2. Scope and Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/product_and_portfolio.html">1.7.1.4.1.3. Product and Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/model_methodology.html">1.7.1.4.1.4. Model Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/implementation.html">1.7.1.4.1.5. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/calibration.html">1.7.1.4.1.6. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/risk_analysis.html">1.7.1.4.1.7. Risk Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/testing_and_validation.html">1.7.1.4.1.8. Testing and Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/general_limitations.html">1.7.1.4.1.9. General Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/model_monitoring.html">1.7.1.4.1.10. Model Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/market_data_integration.html">1.7.1.4.1.11. Market Data Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/performance_benchmarking.html">1.7.1.4.1.12. Performance Benchmarking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/troubleshooting_guide.html">1.7.1.4.1.13. Troubleshooting Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/development_feedback.html">1.7.1.4.1.14. Development Feedback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/references.html">1.7.1.4.1.15. References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/executive_summary.html">1.7.1.4.1.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/scope.html">1.7.1.4.1.2. Scope and Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/product_and_portfolio.html">1.7.1.4.1.3. Product and Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/model_methodology.html">1.7.1.4.1.4. Model Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/implementation.html">1.7.1.4.1.5. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/calibration.html">1.7.1.4.1.6. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/risk_analysis.html">1.7.1.4.1.7. Risk Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/testing_and_validation.html">1.7.1.4.1.8. Testing and Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/general_limitations.html">1.7.1.4.1.9. General Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/model_monitoring.html">1.7.1.4.1.10. Model Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/market_data_integration.html">1.7.1.4.1.11. Market Data Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/performance_benchmarking.html">1.7.1.4.1.12. Performance Benchmarking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/troubleshooting_guide.html">1.7.1.4.1.13. Troubleshooting Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/development_feedback.html">1.7.1.4.1.14. Development Feedback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/references.html">1.7.1.4.1.15. References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../getting_started/index.html">1. Getting Started</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 1. Getting Started</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../learning.html">Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../supported_data_formats.html">Supported Data Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../supported_hardware.html">Supported Hardware</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../modules/index.html">Modules</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Modules</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../modules/xsigma-modules/Wrapping/PythonCore/README.html">Python Wrapper Core Classes</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../build_instructions/index.html">Building</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Building</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../build_instructions/build_settings.html">Build Settings</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../api/index.html">1. API</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of 1. API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../api/cpp.html">1.1. C++</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/python.html">1.2. Python</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of 1.2. Python</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.html">1.2.1.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of 1.2.1.1. xsigmamodules</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.common.html">1.2.1.1.1.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.common</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of 1.2.1.1.1.1. xsigmamodules.common</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.common.helper.html">1.2.1.1.1.1.1.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.common.helper</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.common.instrument.html">1.2.1.1.1.1.1.2. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.common.instrument</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.market.html">1.2.1.1.1.2. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.market</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of 1.2.1.1.1.2. xsigmamodules.market</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.market.market_data.html">1.2.1.1.1.2.1.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.market.market_data</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.market.object_factory.html">1.2.1.1.1.2.1.2. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.market.object_factory</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.simulation.html">1.2.1.1.1.3. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.simulation</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of 1.2.1.1.1.3. xsigmamodules.simulation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.simulation.simulation.html">1.2.1.1.1.3.1.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.simulation.simulation</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.test.html">1.2.1.1.1.4. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.test</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of 1.2.1.1.1.4. xsigmamodules.test</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.test.BlackBox.html">1.2.1.1.1.4.1.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.test.BlackBox</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.test.Testing.html">1.2.1.1.1.4.1.2. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.test.Testing</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.util.html">1.2.1.1.1.5. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.util</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of 1.2.1.1.1.5. xsigmamodules.util</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.util.misc.html">1.2.1.1.1.5.1.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.util.misc</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.util.numpy_support.html">1.2.1.1.1.5.1.2. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.util.numpy_support</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.util.object_converter.html">1.2.1.1.1.5.1.3. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.util.object_converter</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.util.xsigmaConstants.html">1.2.1.1.1.5.1.4. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.util.xsigmaConstants</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.util.xsigmaMethodParser.html">1.2.1.1.1.5.1.5. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.util.xsigmaMethodParser</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.xlwing.html">1.2.1.1.1.6. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.xlwing</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of 1.2.1.1.1.6. xsigmamodules.xlwing</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.xlwing.hartman_watson_template.html">1.2.1.1.1.6.1.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.xlwing.hartman_watson_template</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.xlwing.sabr_template.html">1.2.1.1.1.6.1.2. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.xlwing.sabr_template</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.generate_pyi.html">1.2.1.1.2.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.generate_pyi</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/cmake/cmake-modules.html">1.3. CMake</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of 1.3. CMake</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/cmake/ModuleSystem.html">1.3.1. Module System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/cmake/xsigmaModule.html">1.3.2. xsigmaModule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/cmake/xsigmaModuleTesting.html">1.3.3. xsigmaModuleTesting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/cmake/xsigmaModuleWrapPython.html">1.3.4. xsigmaModuleWrapPython</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/cmake/xsigmaModuleWrapJava.html">1.3.5. xsigmaModuleWrapJava</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/cmake/xsigmaModuleJSON.html">1.3.6. xsigmaModuleJSON</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/cmake/xsigmaModuleGraphviz.html">1.3.7. xsigmaModuleGraphviz</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../advanced/index.html">Advanced Topics</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle navigation of Advanced Topics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/available_python_wheels.html">Additional Python Wheels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/spdx_and_sbom.html">SPDX &amp; SBOM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/build_python_wheels.html">Building Python Wheels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/build_wasm_emscripten.html">Building using emscripten for WebAssembly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/build_for_mobile.html">Cross-compiling for Mobile devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/build_documentation.html">Building documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/marshalling_hints.html">Marshalling Hints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/object_manager.html">Object manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/object_serialization.html">Auto serialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/PythonWrappers.html">Python Wrappers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/runtime_settings.html">Runtime settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../advanced/WrappingTools.html">Wrapping Tools</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../advanced/migration_guides/index.html">Migration Guides</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle navigation of Migration Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../advanced/migration_guides/ModuleMigration.html">Module Migration from XSIGMA 8.2 to 9+</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../design_documents/index.html">Design Documents</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle navigation of Design Documents</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../design_documents/XSIGMAFileFormats.html">XSIGMA File Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../design_documents/smptools.html">Parallel Processing with XSIGMA’s SMP Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../design_documents/data_assemply.html">Data Assembly</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../developers_guide/index.html">Developer’s Guide</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle navigation of Developer’s Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../developers_guide/git/develop.html">Develop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developers_guide/testing.html">Regression Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developers_guide/git/test.html">Adding Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developers_guide/git/dashboard.html">Dashboard Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developers_guide/git/thirdparty.html">Imported Third Party Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developers_guide/git/thirdparty-projects.html">Imported Third Party Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developers_guide/git/deprecation.html">Deprecation Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developers_guide/release_process.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developers_guide/coding_conventions.html">Coding Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developers_guide/about_this_documentation.html">About this documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../resources.html">Resources</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../release_details/index.html">Release Details</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle navigation of Release Details</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../getting_started/index.html">1. Getting Started</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" role="switch" type="checkbox"/><label for="toctree-checkbox-28"><div class="visually-hidden">Toggle navigation of 1. Getting Started</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Market Models</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../index.html">1. Market Models Overview</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" role="switch" type="checkbox"/><label for="toctree-checkbox-29"><div class="visually-hidden">Toggle navigation of 1. Market Models Overview</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ASV/index.html">1.1. Analytical Sigma Volatility (ASV) Model</a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" role="switch" type="checkbox"/><label for="toctree-checkbox-30"><div class="visually-hidden">Toggle navigation of 1.1. Analytical Sigma Volatility (ASV) Model</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/executive_summary.html">1.1.2.2.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/scope.html">1.1.2.2.2. Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/product_and_portfolio.html">1.1.2.2.3. Product and Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/model_methodology.html">1.1.2.2.4. Model Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/implementation.html">1.1.2.2.5. Implementation and Numerical Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/calibration.html">1.1.2.2.6. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/risk_analysis.html">1.1.2.2.7. Risk Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/testing_and_validation.html">1.1.2.2.8. Testing and Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/general_limitations.html">1.1.2.2.9. General Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/model_monitoring.html">1.1.2.2.10. Model Monitoring and KPIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/user_guide.html">1.1.2.2.11. User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/references.html">1.1.2.2.12. References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/README.html">1.1.2.2.13. Analytical Sigma Volatility (ASV) Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/executive_summary.html">1.1.2.2.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/scope.html">1.1.2.2.2. Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/product_and_portfolio.html">1.1.2.2.3. Product and Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/model_methodology.html">1.1.2.2.4. Model Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/implementation.html">1.1.2.2.5. Implementation and Numerical Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/calibration.html">1.1.2.2.6. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/risk_analysis.html">1.1.2.2.7. Risk Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/testing_and_validation.html">1.1.2.2.8. Testing and Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/general_limitations.html">1.1.2.2.9. General Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/model_monitoring.html">1.1.2.2.10. Model Monitoring and KPIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/user_guide.html">1.1.2.2.11. User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/references.html">1.1.2.2.12. References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ASV/README.html">1.1.2.2.13. Analytical Sigma Volatility (ASV) Documentation</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../Curve%20Construction/index.html">1.2. Curve Construction and Risk Framework (NCF)</a><input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" role="switch" type="checkbox"/><label for="toctree-checkbox-31"><div class="visually-hidden">Toggle navigation of 1.2. Curve Construction and Risk Framework (NCF)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/executive_summary.html">1.2.2.2.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/scope.html">1.2.2.2.2. Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/product_and_portfolio.html">1.2.2.2.3. Product and Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/model_methodology.html">1.2.2.2.4. Model Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/implementation.html">1.2.2.2.5. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/calibration.html">1.2.2.2.6. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/risk_analysis.html">1.2.2.2.7. Risk Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/testing_and_validation.html">1.2.2.2.8. Testing and Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/general_limitations.html">1.2.2.2.9. General Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/model_monitoring.html">1.2.2.2.10. Model Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/development_feedback.html">1.2.2.2.11. Development Feedback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/references.html">1.2.2.2.12. References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/README.html">1.2.2.2.13. Curve Construction and Risk Framework Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/executive_summary.html">1.2.2.2.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/scope.html">1.2.2.2.2. Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/product_and_portfolio.html">1.2.2.2.3. Product and Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/model_methodology.html">1.2.2.2.4. Model Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/implementation.html">1.2.2.2.5. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/calibration.html">1.2.2.2.6. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/risk_analysis.html">1.2.2.2.7. Risk Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/testing_and_validation.html">1.2.2.2.8. Testing and Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/general_limitations.html">1.2.2.2.9. General Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/model_monitoring.html">1.2.2.2.10. Model Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/development_feedback.html">1.2.2.2.11. Development Feedback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Curve%20Construction/references.html">1.2.2.2.12. References</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/index.html">1.3. FX Analytic Volatility Surfaces</a><input class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" role="switch" type="checkbox"/><label for="toctree-checkbox-32"><div class="visually-hidden">Toggle navigation of 1.3. FX Analytic Volatility Surfaces</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/executive_summary.html">1.3.3.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/scope.html">1.3.3.2. Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/product_payoff_portfolio.html">1.3.3.3. Product / Payoff / Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/model_smile_models.html">1.3.3.4. Smile Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/model_atm_time_models.html">1.3.3.5. ATM Time Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/model_wing_time_models.html">1.3.3.6. Wing Time Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/implementation_numerical_schema.html">1.3.3.7. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/calibration.html">1.3.3.8. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/risk_bumping_methodology.html">1.3.3.9. Risk Bumping Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/risk_inputs_limitations.html">1.3.3.10. Risk Inputs &amp; Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/testing_plan_implementation.html">1.3.3.11. Testing Plan &amp; Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/testing_stress_scenarios.html">1.3.3.12. Stress Testing &amp; Scenarios</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/testing_accuracy_stability.html">1.3.3.13. Accuracy &amp; Stability Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/general_limitations.html">1.3.3.14. General Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/model_monitoring_kpis.html">1.3.3.15. Model Monitoring &amp; KPIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/development_feedback_summary.html">1.3.3.16. Development Feedback Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../FX%20Analytic%20Volatility%20Surfaces/references.html">1.3.3.17. References</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../Implied%20Volatility%20Filter/index.html">1.4. Implied Volatility Filter</a><input class="toctree-checkbox" id="toctree-checkbox-33" name="toctree-checkbox-33" role="switch" type="checkbox"/><label for="toctree-checkbox-33"><div class="visually-hidden">Toggle navigation of 1.4. Implied Volatility Filter</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/executive_summary.html">1.4.1.5.1.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/scope.html">1.4.1.5.1.2. Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/product_payoff_portfolio.html">1.4.1.5.1.3. Product / Payoff / Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/model_methodology.html">1.4.1.5.1.4. Model / Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/implementation_numerical_schema.html">1.4.1.5.1.5. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/calibration.html">1.4.1.5.1.6. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/risk_factors.html">1.4.1.5.1.7. Risk Analysis Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/testing_and_validation.html">1.4.1.5.1.8. Tests &amp; Outcome Analyses performed on Payoff / Model / Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Implied%20Volatility%20Filter/appendix.html">1.4.1.5.1.9. Appendix: Quality of bid/ask quotes</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../Ir/index.html">1.5. Linear Interest Rate Swaps</a><input class="toctree-checkbox" id="toctree-checkbox-34" name="toctree-checkbox-34" role="switch" type="checkbox"/><label for="toctree-checkbox-34"><div class="visually-hidden">Toggle navigation of 1.5. Linear Interest Rate Swaps</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/executive_summary.html">1.5.1.4.1.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/scope.html">1.5.1.4.1.2. Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/product_payoff_portfolio.html">1.5.1.4.1.3. Product / Payoff / Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/model_methodology.html">1.5.1.4.1.4. Model / Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/implementation_numerical_schema.html">1.5.1.4.1.5. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/calibration.html">1.5.1.4.1.6. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/risk_factors.html">1.5.1.4.1.7. Risk Analysis Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/testing_and_validation.html">1.5.1.4.1.8. Tests &amp; Outcome Analyses performed on Payoff / Model / Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/model_monitoring_kpis.html">1.5.1.4.1.9. Model Monitoring – KPIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/references.html">1.5.1.4.1.10. References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Ir/applicable_policy_standards.html">1.5.1.4.1.11. Applicable Policy Standards</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../index.html">1.6. LSV Guides</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-35" name="toctree-checkbox-35" role="switch" type="checkbox"/><label for="toctree-checkbox-35"><div class="visually-hidden">Toggle navigation of 1.6. LSV Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current has-children"><a class="reference internal" href="../LSV.html">1.6.1. LSV</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-36" name="toctree-checkbox-36" role="switch" type="checkbox"/><label for="toctree-checkbox-36"><div class="visually-hidden">Toggle navigation of 1.6.1. LSV</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../FX%20LSV%20Markov%20Switching%20%20Monte%20Carlo/FX_LSV_Markov_Switching_Monte_Carlo.html">1.6.1.1. FX LSV Markov Switching : Monte Carlo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../FX%20LSV%20Markov%20Switching%20PDE/FX_LSV_Markov_Switching_PDE.html">1.6.1.2. FX LSV Markov Switching : PDE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Local%20Volatility%20PDE%20and%20MC/Local_Volatility_PDE_and_MC.html">1.6.1.3. Local Volatility: PDE and MC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../LSV%20Markov%20Switching%20%20Monte%20Carlo/LSV_Markov_Switching_Monte_Carlo.html">1.6.1.4. LSV Markov Switching : Monte Carlo</a></li>
<li class="toctree-l4 current current-page"><a class="current reference internal" href="#">1.6.1.5. LSV Markov Switching : PDE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../SABR/index.html">1.7. Interest Rate Volatility Model GSABR</a><input class="toctree-checkbox" id="toctree-checkbox-37" name="toctree-checkbox-37" role="switch" type="checkbox"/><label for="toctree-checkbox-37"><div class="visually-hidden">Toggle navigation of 1.7. Interest Rate Volatility Model GSABR</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/executive_summary.html">1.7.1.4.1.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/scope.html">1.7.1.4.1.2. Scope and Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/product_and_portfolio.html">1.7.1.4.1.3. Product and Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/model_methodology.html">1.7.1.4.1.4. Model Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/implementation.html">1.7.1.4.1.5. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/calibration.html">1.7.1.4.1.6. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/risk_analysis.html">1.7.1.4.1.7. Risk Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/testing_and_validation.html">1.7.1.4.1.8. Testing and Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/general_limitations.html">1.7.1.4.1.9. General Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/model_monitoring.html">1.7.1.4.1.10. Model Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/market_data_integration.html">1.7.1.4.1.11. Market Data Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/performance_benchmarking.html">1.7.1.4.1.12. Performance Benchmarking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/troubleshooting_guide.html">1.7.1.4.1.13. Troubleshooting Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/development_feedback.html">1.7.1.4.1.14. Development Feedback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/references.html">1.7.1.4.1.15. References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/executive_summary.html">1.7.1.4.1.1. Executive Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/scope.html">1.7.1.4.1.2. Scope and Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/product_and_portfolio.html">1.7.1.4.1.3. Product and Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/model_methodology.html">1.7.1.4.1.4. Model Methodology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/implementation.html">1.7.1.4.1.5. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/calibration.html">1.7.1.4.1.6. Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/risk_analysis.html">1.7.1.4.1.7. Risk Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/testing_and_validation.html">1.7.1.4.1.8. Testing and Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/general_limitations.html">1.7.1.4.1.9. General Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/model_monitoring.html">1.7.1.4.1.10. Model Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/market_data_integration.html">1.7.1.4.1.11. Market Data Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/performance_benchmarking.html">1.7.1.4.1.12. Performance Benchmarking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/troubleshooting_guide.html">1.7.1.4.1.13. Troubleshooting Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/development_feedback.html">1.7.1.4.1.14. Development Feedback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../SABR/references.html">1.7.1.4.1.15. References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../SABR/index.html">1.7. SABR/GSABR Models</a><input class="toctree-checkbox" id="toctree-checkbox-38" name="toctree-checkbox-38" role="switch" type="checkbox"/><label for="toctree-checkbox-38"><div class="visually-hidden">Toggle navigation of 1.7. SABR/GSABR Models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/executive_summary.html">1.7.1.4.1.1. Executive Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/scope.html">1.7.1.4.1.2. Scope and Use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/product_and_portfolio.html">1.7.1.4.1.3. Product and Portfolio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/model_methodology.html">1.7.1.4.1.4. Model Methodology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/implementation.html">1.7.1.4.1.5. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/calibration.html">1.7.1.4.1.6. Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/risk_analysis.html">1.7.1.4.1.7. Risk Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/testing_and_validation.html">1.7.1.4.1.8. Testing and Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/general_limitations.html">1.7.1.4.1.9. General Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/model_monitoring.html">1.7.1.4.1.10. Model Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/market_data_integration.html">1.7.1.4.1.11. Market Data Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/performance_benchmarking.html">1.7.1.4.1.12. Performance Benchmarking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/troubleshooting_guide.html">1.7.1.4.1.13. Troubleshooting Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/development_feedback.html">1.7.1.4.1.14. Development Feedback</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/references.html">1.7.1.4.1.15. References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/executive_summary.html">1.7.1.4.1.1. Executive Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/scope.html">1.7.1.4.1.2. Scope and Use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/product_and_portfolio.html">1.7.1.4.1.3. Product and Portfolio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/model_methodology.html">1.7.1.4.1.4. Model Methodology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/implementation.html">1.7.1.4.1.5. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/calibration.html">1.7.1.4.1.6. Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/risk_analysis.html">1.7.1.4.1.7. Risk Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/testing_and_validation.html">1.7.1.4.1.8. Testing and Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/general_limitations.html">1.7.1.4.1.9. General Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/model_monitoring.html">1.7.1.4.1.10. Model Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/market_data_integration.html">1.7.1.4.1.11. Market Data Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/performance_benchmarking.html">1.7.1.4.1.12. Performance Benchmarking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/troubleshooting_guide.html">1.7.1.4.1.13. Troubleshooting Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/development_feedback.html">1.7.1.4.1.14. Development Feedback</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../SABR/references.html">1.7.1.4.1.15. References</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../ASV/index.html">1.1. Analytical Sigma Volatility</a><input class="toctree-checkbox" id="toctree-checkbox-39" name="toctree-checkbox-39" role="switch" type="checkbox"/><label for="toctree-checkbox-39"><div class="visually-hidden">Toggle navigation of 1.1. Analytical Sigma Volatility</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/executive_summary.html">1.1.2.2.1. Executive Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/scope.html">1.1.2.2.2. Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/product_and_portfolio.html">1.1.2.2.3. Product and Portfolio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/model_methodology.html">1.1.2.2.4. Model Methodology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/implementation.html">1.1.2.2.5. Implementation and Numerical Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/calibration.html">1.1.2.2.6. Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/risk_analysis.html">1.1.2.2.7. Risk Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/testing_and_validation.html">1.1.2.2.8. Testing and Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/general_limitations.html">1.1.2.2.9. General Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/model_monitoring.html">1.1.2.2.10. Model Monitoring and KPIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/user_guide.html">1.1.2.2.11. User Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/references.html">1.1.2.2.12. References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/README.html">1.1.2.2.13. Analytical Sigma Volatility (ASV) Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/executive_summary.html">1.1.2.2.1. Executive Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/scope.html">1.1.2.2.2. Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/product_and_portfolio.html">1.1.2.2.3. Product and Portfolio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/model_methodology.html">1.1.2.2.4. Model Methodology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/implementation.html">1.1.2.2.5. Implementation and Numerical Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/calibration.html">1.1.2.2.6. Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/risk_analysis.html">1.1.2.2.7. Risk Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/testing_and_validation.html">1.1.2.2.8. Testing and Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/general_limitations.html">1.1.2.2.9. General Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/model_monitoring.html">1.1.2.2.10. Model Monitoring and KPIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/user_guide.html">1.1.2.2.11. User Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/references.html">1.1.2.2.12. References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ASV/README.html">1.1.2.2.13. Analytical Sigma Volatility (ASV) Documentation</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Cheyette/index.html">Cheyette Interest Rate Model</a><input class="toctree-checkbox" id="toctree-checkbox-40" name="toctree-checkbox-40" role="switch" type="checkbox"/><label for="toctree-checkbox-40"><div class="visually-hidden">Toggle navigation of Cheyette Interest Rate Model</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/executive_summary.html">1. Executive Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/scope.html">2. Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/products_and_payoffs.html">Products and Payoffs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/model_methodology.html">3. Model Methodology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/implementation.html">4. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/calibration.html">5. Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/risk_analysis.html">6. Risk Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/testing_and_validation.html">7. Testing and Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/assumptions_and_limitations.html">1.2.1.9. Assumptions and Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/monitoring_and_kpis.html">8. Monitoring and KPIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/appendices.html">1.2.1.11. Appendices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/README.html">1.2.1.12. Cheyette Local Vol Model Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/executive_summary.html">1. Executive Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/scope.html">2. Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/model_methodology.html">3. Model Methodology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/implementation.html">4. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/calibration.html">5. Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/risk_analysis.html">6. Risk Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/testing_and_validation.html">7. Testing and Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Cheyette/monitoring_and_kpis.html">8. Monitoring and KPIs</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Curve%20Construction/index.html">1.2. Curve Construction Framework</a><input class="toctree-checkbox" id="toctree-checkbox-41" name="toctree-checkbox-41" role="switch" type="checkbox"/><label for="toctree-checkbox-41"><div class="visually-hidden">Toggle navigation of 1.2. Curve Construction Framework</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/executive_summary.html">1.2.2.2.1. Executive Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/scope.html">1.2.2.2.2. Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/product_and_portfolio.html">1.2.2.2.3. Product and Portfolio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/model_methodology.html">1.2.2.2.4. Model Methodology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/implementation.html">1.2.2.2.5. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/calibration.html">1.2.2.2.6. Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/risk_analysis.html">1.2.2.2.7. Risk Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/testing_and_validation.html">1.2.2.2.8. Testing and Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/general_limitations.html">1.2.2.2.9. General Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/model_monitoring.html">1.2.2.2.10. Model Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/development_feedback.html">1.2.2.2.11. Development Feedback</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/references.html">1.2.2.2.12. References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/README.html">1.2.2.2.13. Curve Construction and Risk Framework Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/executive_summary.html">1.2.2.2.1. Executive Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/scope.html">1.2.2.2.2. Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/product_and_portfolio.html">1.2.2.2.3. Product and Portfolio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/model_methodology.html">1.2.2.2.4. Model Methodology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/implementation.html">1.2.2.2.5. Implementation / Numerical Schema Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/calibration.html">1.2.2.2.6. Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/risk_analysis.html">1.2.2.2.7. Risk Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/testing_and_validation.html">1.2.2.2.8. Testing and Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/general_limitations.html">1.2.2.2.9. General Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/model_monitoring.html">1.2.2.2.10. Model Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/development_feedback.html">1.2.2.2.11. Development Feedback</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Curve%20Construction/references.html">1.2.2.2.12. References</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../api/index.html">1. API Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-42" name="toctree-checkbox-42" role="switch" type="checkbox"/><label for="toctree-checkbox-42"><div class="visually-hidden">Toggle navigation of 1. API Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../api/cpp.html">1.1. C++</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/python.html">1.2. Python</a><input class="toctree-checkbox" id="toctree-checkbox-43" name="toctree-checkbox-43" role="switch" type="checkbox"/><label for="toctree-checkbox-43"><div class="visually-hidden">Toggle navigation of 1.2. Python</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.html">1.2.1.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-44" name="toctree-checkbox-44" role="switch" type="checkbox"/><label for="toctree-checkbox-44"><div class="visually-hidden">Toggle navigation of 1.2.1.1. xsigmamodules</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.common.html">1.2.1.1.1.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.common</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-45" name="toctree-checkbox-45" role="switch" type="checkbox"/><label for="toctree-checkbox-45"><div class="visually-hidden">Toggle navigation of 1.2.1.1.1.1. xsigmamodules.common</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.common.helper.html">1.2.1.1.1.1.1.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.common.helper</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.common.instrument.html">1.2.1.1.1.1.1.2. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.common.instrument</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.market.html">1.2.1.1.1.2. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.market</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-46" name="toctree-checkbox-46" role="switch" type="checkbox"/><label for="toctree-checkbox-46"><div class="visually-hidden">Toggle navigation of 1.2.1.1.1.2. xsigmamodules.market</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.market.market_data.html">1.2.1.1.1.2.1.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.market.market_data</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.market.object_factory.html">1.2.1.1.1.2.1.2. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.market.object_factory</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.simulation.html">1.2.1.1.1.3. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.simulation</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-47" name="toctree-checkbox-47" role="switch" type="checkbox"/><label for="toctree-checkbox-47"><div class="visually-hidden">Toggle navigation of 1.2.1.1.1.3. xsigmamodules.simulation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.simulation.simulation.html">1.2.1.1.1.3.1.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.simulation.simulation</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.test.html">1.2.1.1.1.4. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.test</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-48" name="toctree-checkbox-48" role="switch" type="checkbox"/><label for="toctree-checkbox-48"><div class="visually-hidden">Toggle navigation of 1.2.1.1.1.4. xsigmamodules.test</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.test.BlackBox.html">1.2.1.1.1.4.1.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.test.BlackBox</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.test.Testing.html">1.2.1.1.1.4.1.2. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.test.Testing</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.util.html">1.2.1.1.1.5. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.util</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-49" name="toctree-checkbox-49" role="switch" type="checkbox"/><label for="toctree-checkbox-49"><div class="visually-hidden">Toggle navigation of 1.2.1.1.1.5. xsigmamodules.util</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.util.misc.html">1.2.1.1.1.5.1.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.util.misc</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.util.numpy_support.html">1.2.1.1.1.5.1.2. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.util.numpy_support</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.util.object_converter.html">1.2.1.1.1.5.1.3. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.util.object_converter</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.util.xsigmaConstants.html">1.2.1.1.1.5.1.4. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.util.xsigmaConstants</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.util.xsigmaMethodParser.html">1.2.1.1.1.5.1.5. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.util.xsigmaMethodParser</span></code></a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.xlwing.html">1.2.1.1.1.6. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.xlwing</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-50" name="toctree-checkbox-50" role="switch" type="checkbox"/><label for="toctree-checkbox-50"><div class="visually-hidden">Toggle navigation of 1.2.1.1.1.6. xsigmamodules.xlwing</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.xlwing.hartman_watson_template.html">1.2.1.1.1.6.1.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.xlwing.hartman_watson_template</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.xlwing.sabr_template.html">1.2.1.1.1.6.1.2. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.xlwing.sabr_template</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/python/xsigmamodules/xsigmamodules.generate_pyi.html">1.2.1.1.2.1. <code class="xref py py-mod docutils literal notranslate"><span class="pre">xsigmamodules.generate_pyi</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/cmake/cmake-modules.html">1.3. CMake</a><input class="toctree-checkbox" id="toctree-checkbox-51" name="toctree-checkbox-51" role="switch" type="checkbox"/><label for="toctree-checkbox-51"><div class="visually-hidden">Toggle navigation of 1.3. CMake</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/cmake/ModuleSystem.html">1.3.1. Module System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/cmake/xsigmaModule.html">1.3.2. xsigmaModule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/cmake/xsigmaModuleTesting.html">1.3.3. xsigmaModuleTesting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/cmake/xsigmaModuleWrapPython.html">1.3.4. xsigmaModuleWrapPython</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/cmake/xsigmaModuleWrapJava.html">1.3.5. xsigmaModuleWrapJava</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/cmake/xsigmaModuleJSON.html">1.3.6. xsigmaModuleJSON</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/cmake/xsigmaModuleGraphviz.html">1.3.7. xsigmaModuleGraphviz</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section class="tex2jax_ignore mathjax_ignore" id="lsv-markov-switching-pde">
<h1><span class="section-number">1.6.1.5. </span>LSV Markov Switching : PDE<a class="headerlink" href="#lsv-markov-switching-pde" title="Link to this heading">#</a></h1>
<section id="executive-summary">
<h2><span class="section-number">1.6.1.5.1. </span>1. Executive Summary<a class="headerlink" href="#executive-summary" title="Link to this heading">#</a></h2>
<p>Existing stochastic volatility models in QA library (Hybrid, TDHeston) model the volatility by using a continuous diffusion process. In Markov Switching model, the instantaneous volatility is allowed to take one of n possible discrete values. The model captures the randomness of the volatility using a continuous-time markov chain.</p>
<p>An LV correction is incorporated in the model to be able to re-price the vanilla market, leading to a local stochastic volatility markov switching model (LSV Markov Switching).</p>
<p>The main attractiveness of LSV Markov Switching model consists in its ability to have a discrete number of volatility states instead of a continuous volatility process. This has a clear speed advantage and would allow not only pricing but also risk management of the trading exotic books.</p>
<p>LSV Markov Switching is intended to be used as the pricing and risk management model for first generation exotics trading books.
More analysis will be required for an extension to other complex products.</p>
<p>The model has been implemented in QA within the UMIFX framework. The calibration routine involves a forward-induction PDE procedure and the pricing is done using finite difference method.</p>
<p>Testing shows a very good performance of the model, being able to value exotic path dependent trades such as barriers inline with the market and delivering a substantial speed gain when compared to a full 2-dimensional local stochastic volatility model.</p>
<p>This document will outline the model specification as well as the calibration and pricing methodology. Testing results are presented as well.</p>
<p>We recommend to use a QA version from QA2221.00 onwards.</p>
</section>
<section id="context">
<h2><span class="section-number">1.6.1.5.2. </span>2. Context<a class="headerlink" href="#context" title="Link to this heading">#</a></h2>
<p>Local Stochastic Volatility attempts to address the main drawbacks of local volatility models and stochastic volatility models by providing a consistent way of pricing and hedging exotic path dependent trades while matching today’s vanilla market.</p>
<p>Currently the path dependent trade population is run on the Local volatility model in production. The aim is to move towards a local stochastic volatility model. The model has to be fast enough to enable the trading desk to look at their risk exposures in a reasonable amount of time.</p>
<p>LSV Markov Switching is a local stochastic volatility model with a superior speed performance when compared to other LSV models due to the discrete nature of the volatility states within the model. It has been implemented recently in the QA library in order to enable running and risk-managing the exotic trade population on a local stochastic volatility model.</p>
</section>
<section id="product-payoff">
<h2><span class="section-number">1.6.1.5.3. </span>3. Product / Payoff<a class="headerlink" href="#product-payoff" title="Link to this heading">#</a></h2>
<p>This document is intended for a model review and wouldn’t focus on the description of products and payoffs subject to a review.</p>
<p>The products that we will look at as part of the model review are:</p>
<ul class="simple">
<li><p>Cash settled European vanilla options. They are instrumental in assessing the accuracy and numerical convergence of the model. As mentioned in the previous sections, the local vol correction component in the model ensures that the vanilla market is matched.</p></li>
<li><p>Examples of path dependent trades to check the consistency of the model when compared to local volatility model. In particular, we will look at double no touches (DNTs), continuous knock out single barriers and one touches.</p></li>
</ul>
<section id="description">
<h3><span class="section-number">1.6.1.5.3.1. </span>3.1. Description<a class="headerlink" href="#description" title="Link to this heading">#</a></h3>
<section id="cash-settled-european-vanilla">
<h4><span class="section-number">1.6.1.5.3.1.1. </span>3.1.1. Cash settled european vanilla<a class="headerlink" href="#cash-settled-european-vanilla" title="Link to this heading">#</a></h4>
<p>The cash settled European vanilla option has a pay-off, at a specified payment date <span class="math notranslate nohighlight">\(T_p\)</span> and settlement currency, given by:</p>
<ul class="simple">
<li><p>European call option pay-off: <span class="math notranslate nohighlight">\(N * (S_T - K)_+\)</span></p></li>
<li><p>European Put option pay-off: <span class="math notranslate nohighlight">\(N * (K - S_T)_+\)</span></p></li>
</ul>
<p>where <span class="math notranslate nohighlight">\(S_T\)</span> is the market settled FX Spot level at expiry time <span class="math notranslate nohighlight">\(T\)</span>, K is the option strike level and <span class="math notranslate nohighlight">\(N\)</span> the notional amount.</p>
<p>For more details about vanilla representation in CTR, you can refer to [5].</p>
</section>
<section id="double-no-touch">
<h4><span class="section-number">1.6.1.5.3.1.2. </span>3.1.2. Double No touch<a class="headerlink" href="#double-no-touch" title="Link to this heading">#</a></h4>
<p>A Double No touch (DNT) gives the investor an agreed upon payout at expiry if the price of the underlying FX rate does not reach or surpass one of the predetermined barrier levels between the barrier start <span class="math notranslate nohighlight">\(T_s\)</span> and expiry date <span class="math notranslate nohighlight">\(T\)</span>.</p>
<p>We denote <span class="math notranslate nohighlight">\(S^{min}\)</span> and <span class="math notranslate nohighlight">\(S^{max}\)</span> respectively the running minimum and running maximum of the FX spot process between the barrier start date and expiry date. They are defined as follows:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[S^{min} = \inf_{T_s \leq u \leq T} S_u \tag{3.1}\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[S^{max} = \sup_{T_s \leq u \leq T} S_u \tag{3.2}\]</div>
</div>
<p>The Payoff of a double no touch, at expiry date <span class="math notranslate nohighlight">\(T\)</span> in a specified currency is :</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[N * 1_{\{S^{min} &gt; L, S^{max} &lt; U\}} \tag{3.3}\]</div>
</div>
<p>where <span class="math notranslate nohighlight">\(L\)</span> and <span class="math notranslate nohighlight">\(U\)</span> are respectively the lower and upper barrier levels and <span class="math notranslate nohighlight">\(N\)</span> is the notional/rebate amount.</p>
<p>We look in this document at continuous double no touches where barrier start date coincides with valuation date and delivery date equals the option expiry. The payment currency is set to be the domestic currency.</p>
</section>
<section id="one-touch-option">
<h4><span class="section-number">1.6.1.5.3.1.3. </span>3.1.3. One Touch option<a class="headerlink" href="#one-touch-option" title="Link to this heading">#</a></h4>
<p>A one touch option gives an investor a fixed amount once a specified barrier level is breached between valuation date and expiry date.</p>
<p>There are two main variations: “lower one touch” and “upper one touch” options depending on the barrier level position with respect to spot at the valuation date. The corresponding payoffs are defined as follows at expiry date in a specified currency:</p>
<ul class="simple">
<li><p>Upper one touch:
$<span class="math notranslate nohighlight">\(N * 1_{S^{max} &gt; U} \tag{3.4}\)</span>$</p></li>
<li><p>Lower one touch:
$<span class="math notranslate nohighlight">\(N * 1_{S^{min} &lt; L} \tag{3.5}\)</span>$</p></li>
</ul>
<p>with :</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(S^{min}\)</span> and <span class="math notranslate nohighlight">\(S^{max}\)</span> respectively the running minimum and running maximum of the fx spot rate as defined in 3.1.</p></li>
<li><p><span class="math notranslate nohighlight">\(U\)</span> and <span class="math notranslate nohighlight">\(L\)</span> refer to the barrier level depending on the barrier type (Upper or Lower).</p></li>
</ul>
<p>We look in this document at one touches paying in domestic currency.</p>
</section>
<section id="fx-single-knock-out-barrier">
<h4><span class="section-number">1.6.1.5.3.1.4. </span>3.1.4. FX single knock-out barrier<a class="headerlink" href="#fx-single-knock-out-barrier" title="Link to this heading">#</a></h4>
<p>We will look here at continuous cash settled european single knock out barrier. A continuous knock out single barrier option is to expire worthless, should a specified barrier level be breached between valuation date and expiry date. If the barrier is not breached, the holder receives the european cash settled vanilla call/put payoff at expiry date.</p>
<p>There are two main variations: “down and out” and “up and out” options depending on the barrier level position with respect to spot at the valuation date. The corresponding payoffs are defined as follows at expiry date:</p>
<ul class="simple">
<li><p>Up and out options:
$<span class="math notranslate nohighlight">\(N * 1_{S^{max} &lt; U} * (ε(S - K))^+ \tag{3.6}\)</span>$</p></li>
<li><p>Down and out options:
$<span class="math notranslate nohighlight">\(N * 1_{S^{min} &gt; L} * (ε(S - K))^+ \tag{3.7}\)</span>$</p></li>
</ul>
<p>with :</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(S^{min}\)</span> and <span class="math notranslate nohighlight">\(S^{max}\)</span> respectively the running minimum and running maximum of the fx spot rate as defined in 3.1.</p></li>
<li><p><span class="math notranslate nohighlight">\(ε\)</span> is either <span class="math notranslate nohighlight">\(+1\)</span> or <span class="math notranslate nohighlight">\(-1\)</span> depending if the underlying vanilla is a call or a put.</p></li>
<li><p>K strike of the vanilla option.</p></li>
<li><p><span class="math notranslate nohighlight">\(U\)</span> and <span class="math notranslate nohighlight">\(L\)</span> refer to the barrier level depending on the barrier type (Upper or Lower).</p></li>
</ul>
</section>
</section>
<section id="relationship-to-other-approved-payoffs">
<h3><span class="section-number">1.6.1.5.3.2. </span>3.2. Relationship to other approved payoffs<a class="headerlink" href="#relationship-to-other-approved-payoffs" title="Link to this heading">#</a></h3>
<p>N/A</p>
</section>
<section id="inputs">
<h3><span class="section-number">1.6.1.5.3.3. </span>3.3. Inputs<a class="headerlink" href="#inputs" title="Link to this heading">#</a></h3>
<p>The products we look at in this document, are represented in CTR. The official CTR schema version which is agreed with BARX Trade Services is 3.3.
Please refer to <a class="reference external" href="http://qa.barcapint.com:8080/wiki/CTR3">http://qa.barcapint.com:8080/wiki/CTR3</a> for full details.</p>
<p>Below, we summarize the main inputs for the FX vanilla and double no touch products under CTR 3.3 schemas:</p>
<section id="id1">
<h4><span class="section-number">1.6.1.5.3.3.1. </span>3.3.1. Cash settled European vanilla<a class="headerlink" href="#id1" title="Link to this heading">#</a></h4>
<p>Table 3.1: Fx vanilla main inputs summary under CTR 3.3</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Currency1</p></td>
<td><p>ctr:Currency</p></td>
<td><p>Set to be foreign currency</p></td>
</tr>
<tr class="row-odd"><td><p>Currency2</p></td>
<td><p>ctr:Currency</p></td>
<td><p>Set to be domestic currency</p></td>
</tr>
<tr class="row-even"><td><p>Currency1Amount</p></td>
<td><p>ctr:Amount</p></td>
<td><p>refers to the notional amount in currency 1 which is set to foreign currency above.</p></td>
</tr>
<tr class="row-odd"><td><p>Strike</p></td>
<td><p>ctr:Strike</p></td>
<td><p>Strike is quoted as CCY1CCY2</p></td>
</tr>
<tr class="row-even"><td><p>Currency1CallPut</p></td>
<td><p>ctr:CallPut</p></td>
<td><p>CALL or PUT</p></td>
</tr>
<tr class="row-odd"><td><p>ExpiryDate</p></td>
<td><p>xsd:date</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>DeliveryDate</p></td>
<td><p>xsd:date</p></td>
<td><p>set to be equal to expiry date</p></td>
</tr>
<tr class="row-odd"><td><p>SettlementStyle</p></td>
<td><p>ctr:SettlementStyle</p></td>
<td><p>set to be CASH</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id2">
<h4><span class="section-number">1.6.1.5.3.3.2. </span>3.3.2. Double No touch<a class="headerlink" href="#id2" title="Link to this heading">#</a></h4>
<p>Table 3.2: Double no touch main inputs summary under CTR 3.3</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Currency1</p></td>
<td><p>ctr:Currency</p></td>
<td><p>Set to be foreign currency</p></td>
</tr>
<tr class="row-odd"><td><p>Currency2</p></td>
<td><p>ctr:Currency</p></td>
<td><p>Set to be domestic currency</p></td>
</tr>
<tr class="row-even"><td><p>RebateAmount</p></td>
<td><p>ctr:Amount</p></td>
<td><p>refers to the notional amount</p></td>
</tr>
<tr class="row-odd"><td><p>RebateCurrency</p></td>
<td><p>ctr:Currency</p></td>
<td><p>refers to the notional currency. Set to be domestic currency</p></td>
</tr>
<tr class="row-even"><td><p>ExpiryDate</p></td>
<td><p>xsd:date</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>DeliveryDate</p></td>
<td><p>xsd:date</p></td>
<td><p>set to be equal to expiry date</p></td>
</tr>
<tr class="row-even"><td><p>TouchBarrierStartDate</p></td>
<td><p>xsd:date</p></td>
<td><p>set to be equal to valuation date</p></td>
</tr>
<tr class="row-odd"><td><p>UpperTouchBarrierLevel</p></td>
<td><p>ctr:Strike</p></td>
<td><p>Upper barrier level is quoted as CCY1CCY2</p></td>
</tr>
<tr class="row-even"><td><p>LowerTouchBarrierLevel</p></td>
<td><p>ctr:Strike</p></td>
<td><p>Lower barrier level is quoted as CCY1CCY2</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="one-touch">
<h4><span class="section-number">1.6.1.5.3.3.3. </span>3.3.3. One touch<a class="headerlink" href="#one-touch" title="Link to this heading">#</a></h4>
<p>Table 3.3: One touch main inputs summary under CTR 3.3</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Currency1</p></td>
<td><p>ctr:Currency</p></td>
<td><p>Set to be foreign currency</p></td>
</tr>
<tr class="row-odd"><td><p>Currency2</p></td>
<td><p>ctr:Currency</p></td>
<td><p>Set to be domestic currency</p></td>
</tr>
<tr class="row-even"><td><p>RebateAmount</p></td>
<td><p>ctr:Amount</p></td>
<td><p>Refers to the notional amount</p></td>
</tr>
<tr class="row-odd"><td><p>RebateCurrency</p></td>
<td><p>ctr:Currency</p></td>
<td><p>Refers to the notional currency. Set to be domestic currency</p></td>
</tr>
<tr class="row-even"><td><p>ExpiryDate</p></td>
<td><p>xsd:date</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>TouchBarrierStartDate</p></td>
<td><p>xsd:date</p></td>
<td><p>Set to be equal to valuation date</p></td>
</tr>
<tr class="row-even"><td><p>TouchBarrierLevel</p></td>
<td><p>ctr:Strike</p></td>
<td><p>Barrier level is quoted as CCY1CCY2</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="cash-settled-fx-single-knock-out-barrier">
<h4><span class="section-number">1.6.1.5.3.3.4. </span>3.3.4. cash settled FX Single knock-out barrier<a class="headerlink" href="#cash-settled-fx-single-knock-out-barrier" title="Link to this heading">#</a></h4>
<p>Table 3.4: FX single barrier main inputs summary under CTR 3.3</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Currency1</p></td>
<td><p>ctr:Currency</p></td>
<td><p>Set to be foreign currency</p></td>
</tr>
<tr class="row-odd"><td><p>Currency2</p></td>
<td><p>ctr:Currency</p></td>
<td><p>Set to be domestic currency</p></td>
</tr>
<tr class="row-even"><td><p>Currency1Amount</p></td>
<td><p>ctr:Amount</p></td>
<td><p>refers to the notional amount in Currency 1</p></td>
</tr>
<tr class="row-odd"><td><p>Strike</p></td>
<td><p>ctr:Strike</p></td>
<td><p>Strike is quoted as CCY1CCY2</p></td>
</tr>
<tr class="row-even"><td><p>Currency1CallPut</p></td>
<td><p>ctr:CallPut</p></td>
<td><p>CALL or PUT</p></td>
</tr>
<tr class="row-odd"><td><p>ExpiryDate</p></td>
<td><p>xsd:date</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>DeliveryDate</p></td>
<td><p>xsd:date</p></td>
<td><p>set to be equal to expiry date</p></td>
</tr>
<tr class="row-odd"><td><p>BarrierStartDate</p></td>
<td><p>xsd:date</p></td>
<td><p>set to be equal to valuation date</p></td>
</tr>
<tr class="row-even"><td><p>BarrierEndDate</p></td>
<td><p>xsd:date</p></td>
<td><p>set to be equal to expiry date</p></td>
</tr>
<tr class="row-odd"><td><p>BarrierLevel</p></td>
<td><p>ctr:Strike</p></td>
<td><p>Barrier level is quoted as CCY1CCY2</p></td>
</tr>
<tr class="row-even"><td><p>BarrierSide</p></td>
<td><p>ctr:BarrierSide</p></td>
<td><p>UPPER or LOWER</p></td>
</tr>
<tr class="row-odd"><td><p>BarrierAction</p></td>
<td><p>ctr:BarrierAction</p></td>
<td><p>Set to KNOCKOUT</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="outputs">
<h3><span class="section-number">1.6.1.5.3.4. </span>3.4. Outputs<a class="headerlink" href="#outputs" title="Link to this heading">#</a></h3>
<p>N/A</p>
</section>
<section id="payoff-analysis">
<h3><span class="section-number">1.6.1.5.3.5. </span>3.5. Payoff Analysis<a class="headerlink" href="#payoff-analysis" title="Link to this heading">#</a></h3>
<p>N/A</p>
</section>
<section id="model-s-used">
<h3><span class="section-number">1.6.1.5.3.6. </span>3.6. Model(s) used<a class="headerlink" href="#model-s-used" title="Link to this heading">#</a></h3>
<p>N/A</p>
</section>
</section>
<section id="model-methodology">
<h2><span class="section-number">1.6.1.5.4. </span>4. Model / Methodology<a class="headerlink" href="#model-methodology" title="Link to this heading">#</a></h2>
<section id="id3">
<h3><span class="section-number">1.6.1.5.4.1. </span>4.1. Description<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<p>In LSV Markov switching model, the FX spot rate follows a stochastic process where the instantaneous volatility has a stochastic volatility component in combination with a local volatility one.</p>
<p>We begin by describing how the stochastic volatility is specified within the model.</p>
<section id="stochastic-volatility">
<h4><span class="section-number">1.6.1.5.4.1.1. </span>4.1.1. Stochastic Volatility<a class="headerlink" href="#stochastic-volatility" title="Link to this heading">#</a></h4>
<p>The stochastic instantaneous volatility is allowed to take one of <span class="math notranslate nohighlight">\(n\)</span> possible values. Random transitions are allowed between the volatility states at any time, in other words they are described by a continuous time Markov chain process.</p>
<p>A continuous time Markov Chain is a stochastic process <span class="math notranslate nohighlight">\(\{\xi(t) : t \geq 0\}\)</span> where <span class="math notranslate nohighlight">\(\xi(t)\)</span> takes values only in <span class="math notranslate nohighlight">\(\{1,...,n\}\)</span> where <span class="math notranslate nohighlight">\(n \in \mathbb{N}\)</span> is the number of states. To define a continuous time Markov Chain we need to specify its <span class="math notranslate nohighlight">\(n \times n\)</span> transition rate matrix <span class="math notranslate nohighlight">\(Q\)</span>, with elements <span class="math notranslate nohighlight">\(q_{ij}, i, j \in \{1,...,n\}\)</span>. For the transition matrix to be valid, it must fulfill the following conditions:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(n \times n\)</span> matrix with <span class="math notranslate nohighlight">\(n\)</span> being the number of states.</p></li>
<li><p><span class="math notranslate nohighlight">\(q_{ii} \leq 0\)</span> for all <span class="math notranslate nohighlight">\(i\)</span>. <span class="math notranslate nohighlight">\(q_i = -q_{ii}\)</span> is the rate at which the process leaves the state <span class="math notranslate nohighlight">\(i\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(q_{ij} \geq 0\)</span> for all <span class="math notranslate nohighlight">\(i \neq j\)</span>. <span class="math notranslate nohighlight">\(q_{ij}\)</span> being the instantaneous rate the process moves from state <span class="math notranslate nohighlight">\(i\)</span> to state <span class="math notranslate nohighlight">\(j\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(\sum_j q_{ij} = 0\)</span> for all <span class="math notranslate nohighlight">\(i\)</span>.</p></li>
</ul>
<p>Given that we are in state <span class="math notranslate nohighlight">\(i\)</span> at time <span class="math notranslate nohighlight">\(s\)</span>, the conditional probability <span class="math notranslate nohighlight">\(p_{ij}(s,t)\)</span> of being in state <span class="math notranslate nohighlight">\(j\)</span> at time <span class="math notranslate nohighlight">\(t\)</span>, is given by:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[p_{ij}(s,t) = \mathbb{P}[\xi(t) = j|\xi(s) = i] \tag{4.1}\]</div>
</div>
<p>Where <span class="math notranslate nohighlight">\(p_{ij}(s,t)\)</span> is an element of <span class="math notranslate nohighlight">\(n \times n\)</span> matrix <span class="math notranslate nohighlight">\(P(s,t)\)</span> which we define via the matrix exponential of <span class="math notranslate nohighlight">\(Q(s,t)\)</span>, that is,</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[P(s,t) = \exp(Q(s,t)) \tag{4.2}\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[P(s,t) = \exp\left(Q \int_s^t q(u)du\right) \tag{4.3}\]</div>
</div>
<p>where the transition generator matrix <span class="math notranslate nohighlight">\(Q\)</span> is represented using a constant <span class="math notranslate nohighlight">\(n \times n\)</span> matrix <span class="math notranslate nohighlight">\(\tilde{Q}\)</span> and a time dependent scalar function <span class="math notranslate nohighlight">\(q(u)\)</span>.</p>
<p>The time dependent function <span class="math notranslate nohighlight">\(q(u)\)</span> will be assumed to be piecewise constant. This has been implemented recently following the analysis of BARX risk runs results. For more details, see [2].</p>
<p>In summary the stochastic instantaneous volatility in Markov Switching follows the following process:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\Sigma(t) = \sigma_{\xi(t)}(t) \tag{4.4}\]</div>
</div>
<p>where</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\xi(t) : [0,\infty) \Rightarrow 1 \ldots n\)</span> a continuous time stochastic Markov chain.</p></li>
<li><p><span class="math notranslate nohighlight">\(n \in \mathbb{N}\)</span> being the number of volatility states with <span class="math notranslate nohighlight">\(n &gt; 1\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(\sigma_i : [0, \infty) \Rightarrow \mathbb{R}^+\)</span> where <span class="math notranslate nohighlight">\(i \in 1 \ldots n\)</span> a discrete set of deterministic functions.</p></li>
<li><p><span class="math notranslate nohighlight">\(Q\)</span> Transition probability matrix of the markov chain <span class="math notranslate nohighlight">\(\{\xi(t) : t \geq 0\}\)</span></p></li>
</ul>
<p>Each discrete volatility <span class="math notranslate nohighlight">\(\sigma_i\)</span> is a function of the volatility of volatility parameter <span class="math notranslate nohighlight">\(\alpha(t)\)</span> defined as follows:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\sigma_i(t) = \gamma_0(t) \exp^{(i-1-[\frac{n}{2}])\alpha(t)}. \tag{4.5}\]</div>
</div>
<p>Please note that we focus in this document on the model variation with an odd number of states. For <span class="math notranslate nohighlight">\(n = 2k + 1, k \in \mathbb{N}\)</span>, the initial volatility state will be the middle state <span class="math notranslate nohighlight">\(\sigma_{k+1}(t)\)</span>.</p>
<p>E.g. For three volatility states, we have the following:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\sigma_3(t) = \gamma_0(t) \exp^{1*\alpha(t)}. \tag{4.6}\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\sigma_2(t) = \gamma_0(t). \tag{4.7}\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\sigma_1(t) = \gamma_0(t) \exp^{-\alpha(t)}. \tag{4.8}\]</div>
</div>
<p>We will assume throughout the document that the number of volatility states is 3 unless stated otherwise. Extension to any other odd number of volatility states <span class="math notranslate nohighlight">\((n = 2k + 1 &gt; 1, k \in \mathbb{N})\)</span> follows easily.</p>
</section>
<section id="local-stochastic-volatility">
<h4><span class="section-number">1.6.1.5.4.1.2. </span>4.1.2. Local Stochastic Volatility<a class="headerlink" href="#local-stochastic-volatility" title="Link to this heading">#</a></h4>
<p>A local volatility correction is incorporated in the FX spot diffusion term in order to be able to recover the vanilla prices in the market.</p>
<p>The model dynamics of LSV Markov Switching are specified then by the following Stochastic Differential Equation (SDE),</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\frac{dS(t)}{S(t)} = r_{d,f}(t)dt + \Sigma(t)A(S(t),t)dW(t) \tag{4.9}\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\Sigma(t) = \sigma_{\xi(t)}(t) \tag{4.10}\]</div>
</div>
<p>where :</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(S(t)\)</span> is the spot FX (units of domestic currency per foreign).</p></li>
<li><p><span class="math notranslate nohighlight">\(r_{d,f}(t)\)</span> FX rate drift.</p></li>
<li><p><span class="math notranslate nohighlight">\(W(t)\)</span> is a brownian motion under the risk-neutral measure. <span class="math notranslate nohighlight">\(W(t)\)</span> is independent of <span class="math notranslate nohighlight">\(\xi(t)\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(A(S(t),t)\)</span> deterministic local volatility correction.</p></li>
<li><p><span class="math notranslate nohighlight">\(\xi(t) : [0,\infty) \Rightarrow 1 \ldots n\)</span> a continuous time stochastic markov chain.</p></li>
<li><p><span class="math notranslate nohighlight">\(n \in \mathbb{N}\)</span> being the number of volatility states</p></li>
<li><p><span class="math notranslate nohighlight">\(\sigma_i : [0, \infty) \Rightarrow \mathbb{R}^+\)</span> where <span class="math notranslate nohighlight">\(i \in 1 \ldots n\)</span> a discrete set of deterministic functions as specified in the previous subsection.</p></li>
<li><p><span class="math notranslate nohighlight">\(Q\)</span> Transition probability matrix of the Markov chain <span class="math notranslate nohighlight">\(\{\xi(t) : t \geq 0\}\)</span></p></li>
</ul>
</section>
</section>
<section id="assumptions-and-limitations">
<h3><span class="section-number">1.6.1.5.4.2. </span>4.2. Assumptions and Limitations<a class="headerlink" href="#assumptions-and-limitations" title="Link to this heading">#</a></h3>
<p>The model has the following assumptions and limitations:</p>
<ul class="simple">
<li><p>It’s a single-asset model where spot is assumed to move continuously without jumps. Jumps may have a significant impact on the pricing of certain path-dependent products, such as very short dated barriers.</p></li>
<li><p>The instantaneous volatility follows a continuous time stochastic markov chain. Transitions between volatility states are allowed at any time.</p></li>
<li><p>The stochastic markov chain is independent of the Brownian motion driving the FX spot rate. Hence, care needs to be taken when valuing trades strongly dependent on the correlation between spot and volatility.</p></li>
<li><p>Both the domestic and foreign interest rates are assumed to be deterministic in the current version of the model. Therefore, when valuing long dated structures, the stochastic interest rate effect is not taken into account.
An extension of the model to handle stochastic interest rates is possible but is not yet supported.</p></li>
<li><p>The vol of volatility parameter is piecewise constant in time.</p></li>
<li><p>The transition matrix q parameter <span class="math notranslate nohighlight">\(q(u)\)</span> is piecewise constant in time.</p></li>
</ul>
</section>
<section id="justification-against-alternative-approaches">
<h3><span class="section-number">1.6.1.5.4.3. </span>4.3. Justification against alternative approaches<a class="headerlink" href="#justification-against-alternative-approaches" title="Link to this heading">#</a></h3>
<p>The trades are valued in the trading books currently under local volatility (LV). The local volatility model is notoriously known for its main drawback to generate an unrealistic forward vol dynamics and hence provides a valuation for first gen exotics which doesn’t match the prices seen in the market.</p>
<p>In addition to that, there has been an inconsistency between the models used for quoting prices and for valuing and risk managing the first gen exotics book. Prices were quoted using LSV Hybrid whereas the risk management is done on local volatility. For details on LSV Hybrid model, please refer to [9].</p>
<p>LSV Hybrid ¹ wasn’t a suitable candidate for risk management due to its speed performance. It takes considerable time to run the whole barrier books. In addition to that, some blow-ups were noticed in the model as well as some instability issues in the calibration process.</p>
</section>
<section id="conditions-of-use">
<h3><span class="section-number">1.6.1.5.4.4. </span>4.4. Conditions of Use<a class="headerlink" href="#conditions-of-use" title="Link to this heading">#</a></h3>
<p>As mentioned in section 4.2, there are limitations in capturing some of the exposures where care needs to be taken.</p>
</section>
<section id="model-parameters">
<h3><span class="section-number">1.6.1.5.4.5. </span>4.5. Model Parameters<a class="headerlink" href="#model-parameters" title="Link to this heading">#</a></h3>
<p>The model parameters are specified in the table below :</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Type (market data / Input / Calibration</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(n\)</span></p></td>
<td><p>Number of volatility states</p></td>
<td><p>Input</p></td>
</tr>
<tr class="row-odd"><td><p>FX spot <span class="math notranslate nohighlight">\(S(0)\)</span></p></td>
<td><p>Spot FX rate quoted as units of domestic currency per foreign at valuation date</p></td>
<td><p>Market data</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(r_{d,f}\)</span></p></td>
<td><p>FX drift rate</p></td>
<td><p>Market data</p></td>
</tr>
<tr class="row-odd"><td><p>Local volatility correction <span class="math notranslate nohighlight">\(A(S(t),t)\)</span></p></td>
<td><p>Dupire deterministic local volatility function of time <span class="math notranslate nohighlight">\(t\)</span> and spot <span class="math notranslate nohighlight">\(S\)</span></p></td>
<td><p>Calibration</p></td>
</tr>
<tr class="row-even"><td><p>Vol factor parameter <span class="math notranslate nohighlight">\(\gamma_0(t)\)</span></p></td>
<td><p>Piecewise constant parameter scaling the different discrete volatility values ²</p></td>
<td><p>Input</p></td>
</tr>
<tr class="row-odd"><td><p>Vol of volatility <span class="math notranslate nohighlight">\(\alpha(t)\)</span></p></td>
<td><p>Piecewise constant vol of volatility parameters controlling the separation between states</p></td>
<td><p>Market data-like</p></td>
</tr>
<tr class="row-even"><td><p>Transition parameter <span class="math notranslate nohighlight">\(q(t)\)</span></p></td>
<td><p>Piecewise constant parameter controlling the transitions between the different volatility states</p></td>
<td><p>Market data-like</p></td>
</tr>
<tr class="row-odd"><td><p>Transition matrix <span class="math notranslate nohighlight">\(\tilde{Q}\)</span></p></td>
<td><p>A <span class="math notranslate nohighlight">\(n \times n\)</span> matrix which is used with the transition parameter <span class="math notranslate nohighlight">\(q(t)\)</span> to define the transition rate matrix of the markov chain defining the volatility states</p></td>
<td><p>Input</p></td>
</tr>
</tbody>
</table>
</div>
<p>The qualitative analysis of the main model parameters can be found in [1].</p>
</section>
</section>
<section id="implementation-numerical-schema-description">
<h2><span class="section-number">1.6.1.5.5. </span>5. Implementation / Numerical Schema Description<a class="headerlink" href="#implementation-numerical-schema-description" title="Link to this heading">#</a></h2>
<section id="id4">
<h3><span class="section-number">1.6.1.5.5.1. </span>5.1. Description<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<p>The pricing is done using finite-difference method to solve the partial differential equations “PDE”.</p>
<section id="numerical-pde-solution">
<h4><span class="section-number">1.6.1.5.5.1.1. </span>5.1.1. Numerical PDE solution<a class="headerlink" href="#numerical-pde-solution" title="Link to this heading">#</a></h4>
<p>The QA Generic PDE solver developed in QA is the engine used to solve the PDE. The planes method is used in pricing. Indeed, the plane levels are used to represent the different volatility states of the stochastic spot instantaneous volatility within the model.</p>
<p>We denote <span class="math notranslate nohighlight">\(V_i(S,t)\)</span> the value at time <span class="math notranslate nohighlight">\(t\)</span> of a derivative when the volatility is in state <span class="math notranslate nohighlight">\(i\)</span>, i.e. <span class="math notranslate nohighlight">\(\Sigma(t) = \sigma_i(t)\)</span>.</p>
<p>Through Feynman-Kac theorem:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\frac{\partial V_i}{\partial t} + \left(r_{d,f}(t) - \frac{1}{2}A(S,t)^2\Sigma(t)^2\right)\frac{\partial V_i}{\partial x} + \frac{1}{2}A(S,t)^2\Sigma(t)^2\frac{\partial^2 V_i}{\partial x^2} - f_{d,c}V_i = 0 \tag{5.1}\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[+ \frac{1}{2}A(S,t)^2\Sigma(t)^2\frac{\partial^2 V_i}{\partial x^2} - f_{d,c}V_i = 0 \tag{5.2}\]</div>
</div>
<p>with X being the state variable representing <span class="math notranslate nohighlight">\(logS\)</span> the logarithm transform of the FX spot rate and <span class="math notranslate nohighlight">\(f_{d,c}\)</span> deterministic short rate as derived from the domestic discounting curve with collateral type c.</p>
<p>To take into account the fact that transitions are allowed between different volatility states, interfacing is done between the PDE solutions at the different planes as follows.</p>
<p>Let’s suppose that we rolled the PDE backwards from time <span class="math notranslate nohighlight">\(t\)</span> to time <span class="math notranslate nohighlight">\((t - \delta t)^+\)</span>. At time <span class="math notranslate nohighlight">\((t - \delta t)^-\)</span>, we have the following :</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[V_i((t - \delta t)^-) = \sum_j p_{ij} V_j((t - \delta t)^+)\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[(5.3)\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[= \sum_j \left( \delta_{ij} + \dot{Q}_{ij} \int_{t-\delta t}^t q(s)ds \right) V_j((t - \delta t)^+)\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[(5.4)\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[= V_i((t - \delta t)^+) + \sum_j \left( \dot{Q}_{ij} \int_{t-\delta t}^t q(s)ds \right) V_j((t - \delta t)^+)\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[(5.5)\]</div>
</div>
<p>The discretisation scheme used is Crank Nicholson scheme which achieves a fast convergence.</p>
<p>For details of the numerical pde scheme and discretisation method, see [10].</p>
<p>Many improvements and techniques are available within the UMIFX PDE framework where the present model is connected to. Examples are:</p>
<ul class="simple">
<li><p>Smoothing discontinuities. we call a discontinuity date any date where we apply an event (e.g. modify the values on PDE grid on trade expiry date), or where the PDE grid domain changes (e.g. barrier start/end date). We tackle discontinuities in three ways:</p>
<ul>
<li><p>Having denser grids around the discontinuities by adding them as points of interest.</p></li>
<li><p>Adding rannacher (implicit PDE stepping) steps before the time discontinuities. If we denote the total number of discontinuities as numDiscontinuities and total number of rannacher steps specified in the pricer config as total_number_rannacher_steps. The number of rannachers steps is computes per discontinuity, n, as,</p></li>
</ul>
</li>
</ul>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[n = int \left( Double :: roundUp \left( \frac{Int :: toDouble(total\_number\_rannacher\_steps)}{Int :: toDouble(numDiscontinuities)} \right) \right)\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[(5.6)\]</div>
</div>
<ul class="simple">
<li><p>Using fuzzy logic (e.g. box smoothing):
If the payout is <span class="math notranslate nohighlight">\(f(x)\)</span>, with a discontinuity at <span class="math notranslate nohighlight">\(D\)</span>. In other terms, the payout <span class="math notranslate nohighlight">\(f(x)\)</span> would have an indicator function with a level equal to <span class="math notranslate nohighlight">\(D\)</span>.
We find the consecutive grid points <span class="math notranslate nohighlight">\(x_{i-1}, x_i, x_{i+1}\)</span> such that <span class="math notranslate nohighlight">\(D\)</span> is in <span class="math notranslate nohighlight">\([0.5 * (x_{i-1} + x_i), 0.5 * (x_i + x_{i+1})] = [L, U]\)</span>. Then instead of using <span class="math notranslate nohighlight">\(f(x_i)\)</span> for grid point <span class="math notranslate nohighlight">\(x_i\)</span> we instead use <span class="math notranslate nohighlight">\(\frac{1}{U-L} \int_L^U f(x)dx\)</span>.
This has the effect of making the grid point’s value depend upon its distance from the discontinuity in a smooth way which is why it improves stability.</p></li>
<li><p>Time grid include market and model dates to improve the quality of term structure risk.</p></li>
<li><p>Minimum number of steps in the time grid : we had a problem in the past where the number of steps in the time grid was so low between events leading to a poor time convergence. in FXPDE, a number of rannacher steps is added before each event of the trade.</p></li>
<li><p>Intelligent standard deviation grid size : in building the grid, we use an asymmetric grid in order to take into account the asymmetry that the vol surface might have and cover an appropriate amount of the distribution.
The PDE spatial grid widths are calculated from an input standard deviation using the default method: FXGridStyle=”AsymmetricUsingMaxSqrtVariance”. The calculation works as follows:</p>
<ul>
<li><p>The input number of standard deviations is used at the end date of the trade (or trades) to calculate the grid width.</p></li>
<li><p>Initial lower and upper boundaries are first calculated from the standard deviation using the at-the-money-forward variance.</p></li>
<li><p>Then the variances at strikes equal to the lower and upper boundaries are queried from the volatility surface, and used to replace the original at the money variance if they are greater.</p></li>
<li><p>Finally boundaries are then calculated using the modified variances.
This method ensures that the grid is appropriately widened when there is a big smile or skew.</p></li>
</ul>
</li>
<li><p>Adaptive rannacher time steps before time points of interest : the size of rannacher steps is chosen so that the number of rannacher steps to be added before a time point of interest all lie between two original PDE time points.</p></li>
<li><p>Advanced time grid : in addition to the total number of time steps, we can have the time schedule which allows to have a minimum frequency or number of steps for the specified periods. This is especially useful when having risk exposure in the short end. It can help having more time points around the short end for example and therefore improving the accuracy of risk. For more details on that, please refer to [4]</p></li>
</ul>
<p>Further documentation is available on the QA wiki:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://qa:8080/wiki/FX_PDE">http://qa:8080/wiki/FX_PDE</a></p></li>
</ul>
</section>
</section>
<section id="id5">
<h3><span class="section-number">1.6.1.5.5.2. </span>5.2. Inputs<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<p>There are three main sections within the PDE pricer settings:</p>
<ul class="simple">
<li><p>PDE solver generic settings such as PDE solver type, PDE implicit order and a flag to use PDE smoothing. Most of the settings have suitable defaults and do not need to be set explicitly in the property page.</p></li>
<li><p>Time grid settings FXPDEDateOptionsPP. To specify the PDE time grid, we specify the total number of time steps that will be used “TotalNumberOfTimeSteps”. Another parameter worth highlighting is the total number of Rannacher steps “TotalNumberOfRannacherSteps” which is used internally to have implicit PDE steps around discontinuities aiming to improve the accuracy as outlined in the previous section.
In addition to the total number of time steps, we can set a time step schedule which would be used to define a minimum frequency or number of steps that need to be satisfied for certain time periods.</p></li>
<li><p>Spatial grid settings FXPDEGridSettingsPP. As the stochastic volatility have discrete values and are not driven by a continuous diffusion factor, the PDEs we solve are one dimensional PDEs corresponding to the different volatility states. Therefore only one dimension needs to be specified in the spatial grid settings which is the spot dimension. Properties such as the number of space steps, standard deviations and also the use of non uniform grid are set. We recommend to use a non uniform spatial grid in the FX spot direction to improve the convergence.</p></li>
</ul>
<p>The inputs for the PDE numerical technique are summarized below:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>FXPDEPricingInstructionsPP</p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Name</p></td>
<td><p>Type</p></td>
<td><p>Default</p></td>
<td><p>Recommended Value</p></td>
<td><p>Comment</p></td>
</tr>
<tr class="row-odd"><td><p>NumeraireCcy</p></td>
<td><p>String</p></td>
<td><p></p></td>
<td><p>(Domestic Currency)</p></td>
<td><p>The numeraire currency.</p></td>
</tr>
<tr class="row-even"><td><p>CTRTPH</p></td>
<td><p>FXCTRTPHPP</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>Settings for trade pricing helper</p></td>
</tr>
<tr class="row-odd"><td><p>PointsOfInterestType</p></td>
<td><p>String</p></td>
<td><p>ModelPOIOnly</p></td>
<td><p>ModelAndPayoutPOI</p></td>
<td><p>Point of interest allow having more density in the spatial grid around the points of interest specified.</p></td>
</tr>
<tr class="row-even"><td><p>PDEGridSettings</p></td>
<td><p>FXPDEGridSettingsCollectionPP</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>Settings for the different directions in the PDE spatial Grid</p></td>
</tr>
<tr class="row-odd"><td><p>PDESolverType</p></td>
<td><p>String</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>PDE Solver type: for possible values look for QAEnum.GenericPDESolverType. If not specified, it is resolved within the QA FXPDE code according to the number of factors in the model used</p></td>
</tr>
<tr class="row-even"><td><p>UsePredictorCorrector</p></td>
<td><p>Boolean</p></td>
<td><p>TRUE</p></td>
<td><p></p></td>
<td><p>PDE solver to use predictor corrector or not</p></td>
</tr>
<tr class="row-odd"><td><p>PDEImplicitOrder</p></td>
<td><p>String</p></td>
<td><p>PDEOrderDefault</p></td>
<td><p></p></td>
<td><p>PDE Implicit Order: for possible values look for QAEnum.GenericPDEImplicitOrder</p></td>
</tr>
<tr class="row-even"><td><p>ApplyPDESmoothing</p></td>
<td><p>Boolean</p></td>
<td><p>TRUE</p></td>
<td><p></p></td>
<td><p>Indicates whether we smooth discontinuities if the corresponding TPH supports it.</p></td>
</tr>
<tr class="row-odd"><td><p>FixGrid</p></td>
<td><p>Boolean</p></td>
<td><p>TRUE</p></td>
<td><p></p></td>
<td><p>Fix grid for greek calculation</p></td>
</tr>
<tr class="row-even"><td><p>FXGridStyle</p></td>
<td><p>String</p></td>
<td><p>AsymmetricUsingMaxSqrtVariance</p></td>
<td><p></p></td>
<td><p>The fx grid style to be used in finite difference</p></td>
</tr>
<tr class="row-odd"><td><p>PDECrossDerivativeDiscretisation</p></td>
<td><p>String</p></td>
<td><p>DefaultCrossDerivative</p></td>
<td><p></p></td>
<td><p>Cross-derivative discretisation: for possible values look for QAEnum.GenericPDECrossDerivativeDiscretisation</p></td>
</tr>
<tr class="row-even"><td><p>DumpCubeToFile</p></td>
<td><p>String</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>Write Solution Cube to a VTK file</p></td>
</tr>
<tr class="row-odd"><td><p>GridGenerationModification</p></td>
<td><p>String</p></td>
<td><p>NoGridModification</p></td>
<td><p></p></td>
<td><p>Instructions for modifying PDE grid</p></td>
</tr>
<tr class="row-even"><td><p>ExcludeCashOnValuationDate</p></td>
<td><p>Boolean</p></td>
<td><p>FALSE</p></td>
<td><p></p></td>
<td><p>Exclude cashflows that occur on the valuation date.</p></td>
</tr>
<tr class="row-odd"><td><p>UseExactPlaneLevelsForDiscreteIndex</p></td>
<td><p>Boolean</p></td>
<td><p>TRUE</p></td>
<td><p></p></td>
<td><p>Indicates whether we use exact plane levels when auxiliary variable only takes discrete values. As an example, it is used for TARN trades.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>FXPDEDateOptionsPP</p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Name</p></td>
<td><p>Type</p></td>
<td><p>Default</p></td>
<td><p>Recommended Value</p></td>
<td><p>Comment</p></td>
</tr>
<tr class="row-odd"><td><p>MinimumStepsPerYear</p></td>
<td><p>Integer</p></td>
<td><p>4</p></td>
<td><p></p></td>
<td><p>At least this number of time steps per year; zero means use only the trade dates, negative means use all available dates from the calibration.</p></td>
</tr>
<tr class="row-even"><td><p>TotalNumberOfTimeSteps</p></td>
<td><p>Integer</p></td>
<td><p></p></td>
<td><p>200-400</p></td>
<td><p>The total number of time steps.</p></td>
</tr>
<tr class="row-odd"><td><p>TotalNumberOfRannacherSteps</p></td>
<td><p>Integer</p></td>
<td><p>0</p></td>
<td><p>10</p></td>
<td><p>Number of rannacher steps in the PDE</p></td>
</tr>
<tr class="row-even"><td><p>ThetaCalculationDate</p></td>
<td><p>Date</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>The date used for theta calculations – it defaults to one calendar day after the valuation date</p></td>
</tr>
<tr class="row-odd"><td><p>TimeStepToleranceFractionForRequiredDates</p></td>
<td><p>Double</p></td>
<td><p>0.1</p></td>
<td><p></p></td>
<td><p>The fraction in [0,1] of the local time step considered to be too close when adding required dates (e.g. mandatory dates, trade dates and theta date)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>FXPDEGridSettingsCollectionPP</p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Name</p></td>
<td><p>Type</p></td>
<td><p>Default</p></td>
<td><p>Recommended Value</p></td>
<td><p>Comment</p></td>
</tr>
<tr class="row-odd"><td><p>NumberOfSpaceSteps</p></td>
<td><p>Integer</p></td>
<td><p></p></td>
<td><p>200 (FX)</p></td>
<td><p>The number of space steps.</p></td>
</tr>
<tr class="row-even"><td><p>NumberOfSpaceStdDevs</p></td>
<td><p>Double</p></td>
<td><p></p></td>
<td><p>6 (FX)</p></td>
<td><p>The number of space standard deviations.</p></td>
</tr>
<tr class="row-odd"><td><p>UseCone</p></td>
<td><p>Boolean</p></td>
<td><p>FALSE</p></td>
<td><p></p></td>
<td><p>Whether or not to use a cone-like grid. Defaults to false.</p></td>
</tr>
<tr class="row-even"><td><p>UseNonUniformGrid</p></td>
<td><p>Boolean</p></td>
<td><p>FALSE</p></td>
<td><p>TRUE</p></td>
<td><p>Whether to use a non uniform grid or not</p></td>
</tr>
<tr class="row-odd"><td><p>MinGridWidthRelativeSize</p></td>
<td><p>Double</p></td>
<td><p>0.05 for FX (default in code), IR not used</p></td>
<td><p></p></td>
<td><p>Minimal grid width relative to model FX spot: Lower Boundary = Min(spot*(1-MinGridWidthRelativeSize, initial Lower Boundary)), Upper Boundary = Max(spot*(1+MinGridWidthRelativeSize, initial Upper Boundary)) This entry is used only for FX spot spatial grid in the calculation of the lower and upper boundaries. If not set, 0.1 relative size is used.</p></td>
</tr>
</tbody>
</table>
</div>
<p><img alt="Figure 5.1: PDE settings" src="market/LSV/LSV Markov Switching  PDE/Fig/1.png" /></p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>FXDateOptionsStepSchedulePP</p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Name</p></td>
<td><p>Type</p></td>
<td><p>Default</p></td>
<td><p>Recommended Value</p></td>
<td><p>Comment</p></td>
</tr>
<tr class="row-odd"><td><p>StepSchedule[0].PeriodLength</p></td>
<td><p>String</p></td>
<td><p></p></td>
<td><p>2W</p></td>
<td><p>Tenor length from the end of the previous period to which the step size applies – do not set for the last period</p></td>
</tr>
<tr class="row-even"><td><p>StepSchedule[0].RequestedAverageStepSize</p></td>
<td><p>String</p></td>
<td><p></p></td>
<td><p>D</p></td>
<td><p>Amount (optional, assumed 1 if missing) and units of the requested step size</p></td>
</tr>
<tr class="row-odd"><td><p>StepSchedule[0].NumberOfTimeSteps</p></td>
<td><p>Integer</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>Number of time steps to use for the specified period</p></td>
</tr>
<tr class="row-even"><td><p>StepSchedule[0].UseForTheRemainder</p></td>
<td><p>Boolean</p></td>
<td><p>FALSE</p></td>
<td><p>FALSE</p></td>
<td><p>Whether this time step applies after the last tenor defined, can only be the last period, if this is true the tenor should be unset</p></td>
</tr>
<tr class="row-odd"><td><p>StepSchedule[0].UseAllStepsFromCalibration</p></td>
<td><p>Boolean</p></td>
<td><p>FALSE</p></td>
<td><p></p></td>
<td><p>Whether to use all steps defined in the calibration, if any</p></td>
</tr>
<tr class="row-even"><td><p>StepSchedule[0].ToleranceFractionOfTimeStep</p></td>
<td><p>Integer</p></td>
<td><p>7</p></td>
<td><p></p></td>
<td><p>A calibration step within that fraction of the time step size will be accepted rather than adding a new step</p></td>
</tr>
<tr class="row-odd"><td><p>StepSchedule[1].PeriodLength</p></td>
<td><p>String</p></td>
<td><p></p></td>
<td><p>2M</p></td>
<td><p>Tenor length from the end of the previous period to which the step size applies – do not set for the last period</p></td>
</tr>
<tr class="row-even"><td><p>StepSchedule[1].RequestedAverageStepSize</p></td>
<td><p>String</p></td>
<td><p></p></td>
<td><p>W</p></td>
<td><p>Amount (optional, assumed 1 if missing) and units of the requested step size</p></td>
</tr>
<tr class="row-odd"><td><p>StepSchedule[1].NumberOfTimeSteps</p></td>
<td><p>Integer</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>Number of time steps to use for the specified period</p></td>
</tr>
<tr class="row-even"><td><p>StepSchedule[1].UseForTheRemainder</p></td>
<td><p>Boolean</p></td>
<td><p>FALSE</p></td>
<td><p>FALSE</p></td>
<td><p>Whether this time step applies after the last tenor defined, can only be the last period, if this is true the tenor should be unset</p></td>
</tr>
<tr class="row-odd"><td><p>StepSchedule[1].UseAllStepsFromCalibration</p></td>
<td><p>Boolean</p></td>
<td><p>FALSE</p></td>
<td><p></p></td>
<td><p>Whether to use all steps defined in the calibration, if any</p></td>
</tr>
<tr class="row-even"><td><p>StepSchedule[1].ToleranceFractionOfTimeStep</p></td>
<td><p>Integer</p></td>
<td><p>7</p></td>
<td><p></p></td>
<td><p>A calibration step within that fraction of the time step size will be accepted rather than adding a new step</p></td>
</tr>
<tr class="row-odd"><td><p>StepSchedule[2].PeriodLength</p></td>
<td><p>String</p></td>
<td><p></p></td>
<td><p>2Y</p></td>
<td><p>Tenor length from the end of the previous period to which the step size applies – do not set for the last period</p></td>
</tr>
<tr class="row-even"><td><p>StepSchedule[2].RequestedAverageStepSize</p></td>
<td><p>String</p></td>
<td><p></p></td>
<td><p>M</p></td>
<td><p>Amount (optional, assumed 1 if missing) and units of the requested step size</p></td>
</tr>
<tr class="row-odd"><td><p>StepSchedule[2].NumberOfTimeSteps</p></td>
<td><p>Integer</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>Number of time steps to use for the specified period</p></td>
</tr>
<tr class="row-even"><td><p>StepSchedule[2].UseForTheRemainder</p></td>
<td><p>Boolean</p></td>
<td><p>FALSE</p></td>
<td><p>FALSE</p></td>
<td><p>Whether this time step applies after the last tenor defined, can only be the last period, if this is true the tenor should be unset</p></td>
</tr>
<tr class="row-odd"><td><p>StepSchedule[2].UseAllStepsFromCalibration</p></td>
<td><p>Boolean</p></td>
<td><p>FALSE</p></td>
<td><p></p></td>
<td><p>Whether to use all steps defined in the calibration, if any</p></td>
</tr>
<tr class="row-even"><td><p>StepSchedule[2].ToleranceFractionOfTimeStep</p></td>
<td><p>Integer</p></td>
<td><p>7</p></td>
<td><p></p></td>
<td><p>A calibration step within that fraction of the time step size will be accepted rather than adding a new step</p></td>
</tr>
</tbody>
</table>
</div>
<p><img alt="Figure 5.2: PDE settings cont." src="market/LSV/LSV Markov Switching  PDE/Fig/2.png" /></p>
<p>QA testing has shown that a good convergence versus speed balance is obtained with these settings outlined above for trades up to 2Y. For longer maturities, the number of FX steps and time steps needs to be increased (300 FX steps, 600 time steps).</p>
</section>
<section id="quality-control">
<h3><span class="section-number">1.6.1.5.5.3. </span>5.3. Quality control<a class="headerlink" href="#quality-control" title="Link to this heading">#</a></h3>
<p>The PDE numerical scheme is used heavily in production. Several books have been migrated to UMIFX using the FX PDE framework. Results show excellent convergence and stability. Standard IVC price testing will be appropriate for quality control.</p>
</section>
<section id="limitations">
<h3><span class="section-number">1.6.1.5.5.4. </span>5.4. Limitations<a class="headerlink" href="#limitations" title="Link to this heading">#</a></h3>
<p>The current PDE implementation for the model is limited to single asset trades. An extension to multi-asset trades is possible but not yet supported in the QA library.</p>
</section>
</section>
<section id="calibration">
<h2><span class="section-number">1.6.1.5.6. </span>6. Calibration<a class="headerlink" href="#calibration" title="Link to this heading">#</a></h2>
<section id="id6">
<h3><span class="section-number">1.6.1.5.6.1. </span>6.1. Description<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<p>The Local Stochastic Volatility (LSV) calibration routine is done in two main steps. The first step consists of calibrating the stochastic volatility (SV) model parameters to a set of options in the market. Then the local volatility (LV) term correction is calibrated using a forward induction PDE procedure.</p>
<p>The Stochastic volatility parameters can be either :</p>
<ul class="simple">
<li><p>Marked by Trading to match directly to market observable prices of path-dependent options such as double no touches<span class="math notranslate nohighlight">\(^1\)</span>.</p></li>
<li><p>Calibrated to vanillas and namely ATM options and 25 delta strangles internally inside QA. Then a mixing weight/a scaling factor is applied to scale the vol of volatility parameters;</p></li>
</ul>
<p>For completeness, we include a brief description of the SV calibration algorithm to vanillas: when SV parameters are calibrated to vanillas, it is done by bootstrapping the <span class="math notranslate nohighlight">\(\gamma_0\)</span> and <span class="math notranslate nohighlight">\(\alpha\)</span> parameters as follows.
Let <span class="math notranslate nohighlight">\(T_i\)</span> be the calibration dates where <span class="math notranslate nohighlight">\(i \in \{1, \ldots, m\}\)</span>. The calibration algorithm loops over the calibration dates.</p>
<ol class="arabic simple">
<li><p>Set the initial hints for the volatility factor <span class="math notranslate nohighlight">\(\gamma_0(T_j)\)</span> and the vol of volatility <span class="math notranslate nohighlight">\(\alpha(T_j)\)</span> parameters.<span class="math notranslate nohighlight">\(^2\)</span></p></li>
<li><p>Given the fixed value of <span class="math notranslate nohighlight">\(\alpha(T_j)\)</span>, a search routine using Brent Root finder <span class="math notranslate nohighlight">\(^3\)</span> is done on the parameter <span class="math notranslate nohighlight">\(\gamma_0(T_j)\)</span> to match the implied ATM volatility <span class="math notranslate nohighlight">\(^4\)</span> in the market.</p></li>
<li><p>Once <span class="math notranslate nohighlight">\(\gamma_0(T_j)\)</span> is fixed, the 25 delta strangle volatility is calculated.</p></li>
<li><p>The ordinate of the Brent Root finder for <span class="math notranslate nohighlight">\(\alpha(T_j)\)</span> is updated with the value of the strangle volatility found in 3.</p></li>
<li><p>Steps 2 to 4 are repeated until both 25 delta strangle and ATM volatilities are matched against the market.</p></li>
</ol>
<p>Trading prefers marking the stochastic volatility parameters as it provides more transparency with the ability to see in particular the actual vol of vol values used directly. In addition to that, it doesn’t rely on the internal calibration algorithm.
For the purpose of this model review application, we assume that the stochastic volatility parameters are marked.</p>
<p>Please note that a term structure of stochastic volatility model parameters is used.</p>
<p>Once the stochastic volatility parameters are specified, the calibration of the local volatility factor is done using a forward induction method, solving a PDE forward in time, as described below. The local volatility is then sampled on a spot-maturity grid.</p>
<p>The local volatility calibration relies on Gyongy’s theorem [13]:</p>
<p>For a given asset price process <span class="math notranslate nohighlight">\(S(t)\)</span> with an arbitrary adapted stochastic volatility <span class="math notranslate nohighlight">\(\sigma(t)\)</span>, there exists a Markovian asset price process <span class="math notranslate nohighlight">\(\tilde{S}(t)\)</span> with a deterministic local volatility having the same marginal distributions if the corresponding local volatility equals a conditional expectation of the stochastic volatility, i.e.</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\sigma_{loc}^2(t,x) = E[\sigma(t)^2 \times A(t,S(t))^2|S(t) = x]\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[(6.1)\]</div>
</div>
<p>Dupire(1994) and Derman and Kani(1994) have shown that the deterministic local volatility <span class="math notranslate nohighlight">\(\sigma_{loc}(t,x)\)</span> can be uniquely determined from the vanilla market prices.</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\sigma_{loc}^2(t,x) = 2\frac{\frac{\partial C}{\partial T} + r_{d,f}K\frac{\partial C}{\partial K} + f_{f,c}C}{K^2 \times \frac{\partial^2 C}{\partial K^2}}\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[(6.2)\]</div>
</div>
<p>where <span class="math notranslate nohighlight">\(C(K,T)\)</span> is the current market value of an option with strike <span class="math notranslate nohighlight">\(K\)</span> and maturity <span class="math notranslate nohighlight">\(T\)</span> and <span class="math notranslate nohighlight">\(f_{f,c}\)</span> being the deterministic short rate as derived from the foreign discounting curve with collateral type c.</p>
<p>In practice, the local volatility is computed in terms of the implied variance in the QA library. For more details on the local volatility implementation, please refer to [8].</p>
<p>The calibration algorithm is described below:</p>
<ol class="arabic simple">
<li><p>Apply mixing <span class="math notranslate nohighlight">\(mw\)</span> which consists of scaling the vol of volatility by <span class="math notranslate nohighlight">\((1-mw)\)</span>. As we use vol of vol marked directly within the model, the mixing would be equal to zero and hence it would be just an effective multiplication by 1. Hence no change will be done on the vol of vol values.</p></li>
<li><p>Start with an initial local volatility correction <span class="math notranslate nohighlight">\(A(t_0,s)\)</span>. It is set to the Dupire local volatility divided by the initial volatility <span class="math notranslate nohighlight">\(^5\)</span>.</p></li>
<li><p>Given <span class="math notranslate nohighlight">\(A(t_k,s)\)</span>, solve the Forward Fokker Planck PDE from time <span class="math notranslate nohighlight">\(t_k\)</span> to <span class="math notranslate nohighlight">\(t_{k+1}\)</span> which gives the probability density function at time <span class="math notranslate nohighlight">\(t_{k+1}\)</span></p></li>
</ol>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\frac{\partial p_i}{\partial t} + \frac{\partial}{\partial x}\left[\left(r_{d,f} - \frac{1}{2}A(t,x)^2\sigma_i^2\right) p_i\right]\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[(6.3)\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[- \frac{1}{2}\frac{\partial^2}{\partial x^2}\left[A(t,x)^2\sigma_i^2 p_i\right] = 0\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[(6.4)\]</div>
</div>
<p>The transition between states is applied such that:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[p_i(t_{k+1}^+, x) = \sum_j p_{ji} * p_j(t_{k+1}^-, x)\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[(6.5)\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[= \sum_j \left(\delta_{ji} + \tilde{Q}_{ji} \int_{t_k}^{t_{k+1}} q(s)ds \right) p_j(t_{k+1}^-, x)\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[(6.6)\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[= p_i(t_{k+1}^-, x) + \sum_j \left(\tilde{Q}_{ji} \int_{t_k}^{t_{k+1}} q(s)ds \right) p_j(t_{k+1}^-, x))\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[(6.7)\]</div>
</div>
<ol class="arabic simple" start="4">
<li><p>Given the calculated probability density function, calculate:</p></li>
</ol>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[E[\Sigma(t_{k+1})^2|S(t_{k+1}) = s] = \frac{\sum_{i=1}^n p_i(t_{k+1},s)\sigma_i^2}{\sum_{i=1}^n p_i(t_{k+1},s)}\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[(6.8)\]</div>
</div>
<ol class="arabic simple" start="5">
<li><p>Deduce using Gyongy’s theorem:</p></li>
</ol>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[A(t_{k+1},s) = \frac{\sigma_{Dupire}^2(t_{k+1},s)}{E[\Sigma(t_{k+1})^2|S(t_{k+1}) = s]}\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[(6.9)\]</div>
</div>
<ol class="arabic simple" start="6">
<li><p>Continue until the end …</p></li>
</ol>
<p>The forward PDEs during the calibration are solved using an implicit PDE scheme to achieve a robust stability. For more details, please refer to [3].</p>
</section>
<section id="id7">
<h3><span class="section-number">1.6.1.5.6.2. </span>6.2. Inputs<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
</section>
<section id="market-data-inputs">
<h3><span class="section-number">1.6.1.5.6.3. </span>6.2.1. Market Data Inputs<a class="headerlink" href="#market-data-inputs" title="Link to this heading">#</a></h3>
<p>The following market data is required for the calibration:</p>
<ul class="simple">
<li><p>Yield Curves for the interest rates.</p></li>
<li><p>FX spot object.</p></li>
<li><p>FX Volatility surface</p></li>
</ul>
<p>In addition to that, we have the following market data-like parameters:</p>
<ul class="simple">
<li><p>Transition q term structure parameters.</p></li>
<li><p>Vol of volatility term structure parameters.</p></li>
</ul>
<p>As outlined in 6.1, the stochastic volatility parameters are marked such that exotic trades (e.g. double no touches) prices in the market are matched.</p>
</section>
<section id="calibration-algorithm-inputs">
<h3><span class="section-number">1.6.1.5.6.4. </span>6.2.2. Calibration Algorithm Inputs<a class="headerlink" href="#calibration-algorithm-inputs" title="Link to this heading">#</a></h3>
<p>There are three main sections in the model calibration instructions.</p>
<p>SV calibration settings</p>
<p>In the stochastic volatility calibration section, the different calibration tenors/dates are specified. For each calibration date/tenor, we set the corresponding vol of vol parameter.
Please note than when the vol of volatility is set, there is no need to calibrate the vol factor (<span class="math notranslate nohighlight">\(\gamma_0\)</span>) parameter as the latter will be compensated by the local volatility correction term in the local volatility calibration stage to recover the vanilla market. Therefore, the vol factor (<span class="math notranslate nohighlight">\(\gamma_0\)</span>) is recommended to be fixed to a value of 1.0.</p>
<p>We specify in this section as well the transition rate matrix <span class="math notranslate nohighlight">\(Q\)</span>. As described in 4.1, we parameterize the transition rate matrix for the markov chain using two components:</p>
<ul class="simple">
<li><p>A <span class="math notranslate nohighlight">\(n \times n\)</span> constant matrix <span class="math notranslate nohighlight">\(\tilde{Q}\)</span> with <span class="math notranslate nohighlight">\(n\)</span> number of volatility states. The latter is defaulted inside the QA library to have diagonals equal to -1 and allow transitions to adjacent states with equal rates.
For example for three volatility states, the constant transition matrix will be by default:
$<span class="math notranslate nohighlight">\(\begin{pmatrix} -1 &amp; 1 &amp; 0 \\ 1/2 &amp; -1 &amp; 1/2 \\ 0 &amp; 1 &amp; -1 \end{pmatrix}\)</span>$
We can also provide the ability to set a more generic matrix if required.</p></li>
<li><p>A time dependent scalar function <span class="math notranslate nohighlight">\(q(u)\)</span>. The latter, we recommend it to a be piecewise constant. This is set in the entry property page SVMSModel.TransitionMatrixScaling which should be “piecewiseConstant”.</p></li>
</ul>
<p>To fully determine the piece wise constant q function, we set the term structure of q parameters. This consists of setting the different dates/tenors and the corresponding transition q parameters. For example: <span class="math notranslate nohighlight">\(\begin{pmatrix} T_1, &amp; q_1; \\ T_2, &amp; q_2; \\ T_3, &amp; q_3. \end{pmatrix}\)</span></p>
<p>Other input parameters are set as well such as the number of volatility states.</p>
<p>The input parameters of the stochastic volatility calibration instructions are summarized in the following table 6.1.</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>AEFXLSVMarkovSwitchingCalibrationBuilder_*.SVCalibration</p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Name</p></td>
<td><p>Default</p></td>
<td><p>Recommended Value</p></td>
<td><p>Comment</p></td>
</tr>
<tr class="row-odd"><td><p>Delta</p></td>
<td><p>0.25</p></td>
<td><p></p></td>
<td><p>Used only when the SV calibrated are marked to vanillas. It’s the delta of the strangle with the dates/tenors for the stoch vol params (“i” represents the index in the collection) e.g. 3M, 6M, 1Y, 2Y</p></td>
</tr>
<tr class="row-even"><td><p>SVParameters[i].Date</p></td>
<td><p></p></td>
<td><p>e.g. 1M</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>SVParameters[i].Skew</p></td>
<td><p></p></td>
<td><p>1</p></td>
<td><p>Only skew of 1.0 is supported</p></td>
</tr>
<tr class="row-even"><td><p>SVParameters[i].VolFactor</p></td>
<td><p></p></td>
<td><p>1 (when vol of vols are marked to match exotic options)</p></td>
<td><p>when vol of vols are marked to match exotic options, the vol factor is merely a starter to the local vol correction so we set it to 1.0</p></td>
</tr>
<tr class="row-odd"><td><p>SVParameters[i].VolOfVol</p></td>
<td><p></p></td>
<td><p>e.g. 0.75</p></td>
<td><p>Here we set the different vol of vol params marked for the corresponding tenors</p></td>
</tr>
<tr class="row-even"><td><p>SVMSModel</p></td>
<td><p></p></td>
<td><p>SVMarkovSwitchingExponential_PP</p></td>
<td><p>Enum corresponding to LSV Markov switching model name in the library.</p></td>
</tr>
<tr class="row-odd"><td><p>SVMSModel.NumberOfVolatilityStates</p></td>
<td><p></p></td>
<td><p>3</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>SVMSModel.TransitionMatrixScaling</p></td>
<td><p></p></td>
<td><p>PieceWiseConstant</p></td>
<td><p>Defines the type of scaling q as a function of time (it can be “Constant”, “PieceWiseConstant” or “TimeDecay”)</p></td>
</tr>
<tr class="row-odd"><td><p>SVMSModel.TransitionQParameters[0].Date</p></td>
<td><p></p></td>
<td><p>e.g. 2Y</p></td>
<td><p>Here is the collection of calibration dates/tenors for the transition q params (“i” represents the index in the collection)</p></td>
</tr>
<tr class="row-even"><td><p>SVMSModel.TransitionQParameters[0].TransitionQ</p></td>
<td><p></p></td>
<td><p>e.g. 0.8</p></td>
<td><p>the transition q parameter corresponding to the specified tenor that is used to define the full term structure of the piece-wise constant function q.</p></td>
</tr>
<tr class="row-odd"><td><p>SVMSModel.TransitionMatrixConstant</p></td>
<td><p><span class="math notranslate nohighlight">\(\tilde{Q}\)</span> by n matrix with diagonals equal to -1 with <span class="math notranslate nohighlight">\(\tilde{Q}\)</span>(0, 1)=<span class="math notranslate nohighlight">\(\tilde{Q}\)</span>(n-1, n-2)=0 and <span class="math notranslate nohighlight">\(\tilde{Q}\)</span>(i, i+1)=<span class="math notranslate nohighlight">\(\tilde{Q}\)</span>(i, i-1)=0.5 when 0&lt;i&lt;n-1 with n number of volatility states. E.g. for n=3: <span class="math notranslate nohighlight">\(\begin{pmatrix} -1 &amp; 1 &amp; 0 \\ 0.5 &amp; -1 &amp; 0.5 \\ 0 &amp; 1 &amp; -1 \end{pmatrix}\)</span></p></td>
<td><p></p></td>
<td><p>The transition matrix constant component which gets multiplied by the q parameters specified above to give the transition rate matrix of the continuous markov chain representing the different volatility states</p></td>
</tr>
</tbody>
</table>
</div>
<p>Figure 6.1: SV Calibration settings</p>
<p>LSV mixing settings</p>
<p>Vol of volatility parameters when marked to match the market observable exotic path dependent trades prices, there is no benefit in scaling them using the mixing parameters (scaling factor is <span class="math notranslate nohighlight">\(1 - mw\)</span> with <span class="math notranslate nohighlight">\(mw\)</span> mixing) before the local volatility term calibration stage. Hence, the mixing is set to zero to reflect a scaling of 1.</p>
<p>Below table shows how it is specified in UMIFX calibration property page.</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>AEFXLSVMarkovSwitchingCalibrationBuilder_*.LSVMixing</p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Name</p></td>
<td><p>Default</p></td>
<td><p>Recommended Value</p></td>
<td><p>Comment</p></td>
</tr>
<tr class="row-odd"><td><p>LSVMixingTimeDependent[0].MaturityDate</p></td>
<td><p></p></td>
<td><p>$LastTradePaymentDate</p></td>
<td><p>This is the collection of tenors where we apply a scaling to the vol of vol params. Please note that when the Vol. of Vol params are calibrated to DNTs, there is no need to scale them down so we need just one entry beyonf or after the last trade date.</p></td>
</tr>
<tr class="row-even"><td><p>LSVMixingTimeDependent[0].Mixing</p></td>
<td><p></p></td>
<td><p>0</p></td>
<td><p>Mixing weights corresponding to the different maturity dates above. when the Vov are calibrated to DNT’s, there is no need to scale them down so we need just one entry to represent no scaling i.e. a constant mixing of 0.0.</p></td>
</tr>
</tbody>
</table>
</div>
<p>Figure 6.2: LSV Mixing settings</p>
<p>LV calibration settings</p>
<p>The local volatility calibration settings section is used primarily to define the instructions needed for the forward PDE induction such as the last calibration date or the specification of the PDE time grid and spatial grids.</p>
<p>With deterministic interest rates, similarly to the pricing PDEs, the forward partial differential equations solved in the calibration are one dimensional as well. The different volatility states are represented using planes. Hence we need to specify the PDE grid settings used to construct the spatial PDE grid in the FX spot direction only. Number of space steps as well as the number of standard deviations are specified within the FXPDEGridSettings property page.</p>
<p>With respect to the time grid, we would have the total number of time steps set.
As the calibration PDE is done using an implicit PDE scheme, it makes little sense to have rannacher stepping. We recommend to set the total number of rannacher steps to zero in the calibration PDE.</p>
<p>The table below summarizes the local vol calibration input settings:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>AEFXLSVMarkovSwitchingCalibrationBuilder_*.LVCorrection</p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Name</p></td>
<td><p>Default</p></td>
<td><p>Recommended Value</p></td>
<td><p>Comment</p></td>
</tr>
<tr class="row-odd"><td><p>CalibrationEndDate</p></td>
<td><p></p></td>
<td><p>$LastTradePaymentDate</p></td>
<td><p>Last calibration date for the LV correction component</p></td>
</tr>
<tr class="row-even"><td><p>DateOptions.TotalNumberOfTimeSteps</p></td>
<td><p></p></td>
<td><p>300-400</p></td>
<td><p>Number of time steps for the Forward induction PDE</p></td>
</tr>
<tr class="row-odd"><td><p>DateOptions.TotalNumberOfRannacherSteps</p></td>
<td><p></p></td>
<td><p>0</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>PDEGridSettings[0].PDEGridName</p></td>
<td><p></p></td>
<td><p>SpotFX</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>PDEGridSettings[0].PDEGridDomCurrency</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>Domestic currency of the FX Spot rate</p></td>
</tr>
<tr class="row-even"><td><p>PDEGridSettings[0].PDEGridForCurrency</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>Foreign currency of the FX Spot rate</p></td>
</tr>
<tr class="row-odd"><td><p>PDEGridSettings[0].NumberOfSpaceSteps</p></td>
<td><p></p></td>
<td><p>200</p></td>
<td><p>Number of spatial grid steps in the spatial direction specified above (“SpotFX”)</p></td>
</tr>
<tr class="row-even"><td><p>PDEGridSettings[0].NumberOfSpaceStdDevs</p></td>
<td><p></p></td>
<td><p>6</p></td>
<td><p>Number of standard deviations in the spatial direction specified above (“SpotFX”)</p></td>
</tr>
<tr class="row-odd"><td><p>PDEGridSettings[0].UseNonUniformGrid</p></td>
<td><p></p></td>
<td><p>TRUE</p></td>
<td><p>Whether to use a non uniform grid points distribution for the PDE spatial grid specified.</p></td>
</tr>
</tbody>
</table>
</div>
<p>Figure 6.3: Local Vol Correction calibration settings</p>
</section>
<section id="other-inputs">
<h3><span class="section-number">1.6.1.5.6.5. </span>6.2.3. Other Inputs<a class="headerlink" href="#other-inputs" title="Link to this heading">#</a></h3>
<p>It is worth expanding in this section on the vol of vol and transition q parameters.
The vol of vol parameters and q parameters are market-data like. Therefore, they can be specified as part of the market data instead of being part of the stochastic volatility calibration instructions.</p>
</section>
<section id="justification">
<h3><span class="section-number">1.6.1.5.6.6. </span>6.3. Justification<a class="headerlink" href="#justification" title="Link to this heading">#</a></h3>
<p>The calibration steps for the local volatility calibration are quite standard for a model combining local and stochastic volatility. It is based on the application of Gyongy’s theorem along with Dupire’s formulae for the local volatility function. As the stochastic volatility can take one of the discrete volatility state values and is not driven by a full Brownian motion, we don’t need a full 2 dimensional forward PDE. A one dimensional PDE with planes to represent the different volatility states can be used and would give a substantial speed advantage.</p>
</section>
<section id="id8">
<h3><span class="section-number">1.6.1.5.6.7. </span>6.4. Quality control<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<p>Within UMIFX, QA deals with the local volatility calibration failures in a common and standard way between the different models involving a local volatility component. In case of a failure to find the local vol correction at certain spot points and certain time, we allow first that the values at the failed points can be interpolated or extrapolated using the successful calibrated points. If none are found, then a floor volatility level is applied. The latter is defaulted to 0.0%.</p>
</section>
<section id="id9">
<h3><span class="section-number">1.6.1.5.6.8. </span>6.5. Limitations<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<p>As the local volatility correction is calibrated to the smile volatility surface, there is a direct dependence on the quality of the input market data. If the volatility surface has noisy local vols, this will feed directly to the local volatility correction parameters in the model.</p>
</section>
</section>
<section id="risk">
<h2><span class="section-number">1.6.1.5.7. </span>7. Risk<a class="headerlink" href="#risk" title="Link to this heading">#</a></h2>
<p>Usual QARisk2 risk measures with respect to the Market data are required for running the model. In particular, smile risk measures such as FX Delta, FX Gamma, FXVega, Near/Far Rega and Sega are relevant.</p>
<p>In addition to the above, it is good to calculate the sensitivities to the model parameters. Namely sensitivities with respect to the vol of volatility and transition q parameters.</p>
<section id="id10">
<h3><span class="section-number">1.6.1.5.7.1. </span>7.1. Description<a class="headerlink" href="#id10" title="Link to this heading">#</a></h3>
<p>Risk (Greeks) are calculated using market data perturbations and recalculation of PV. In the PDE, we keep the pricing PDE grid fixed in order to reduce the numerical noise.
Risk calculations in QA are achieved using the QARisk2 framework which is described in detail in the following wiki page:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://qa:8080/wiki/QARisk_2">http://qa:8080/wiki/QARisk_2</a></p></li>
</ul>
</section>
<section id="id11">
<h3><span class="section-number">1.6.1.5.7.2. </span>7.2. Inputs<a class="headerlink" href="#id11" title="Link to this heading">#</a></h3>
<p>QARisk2 metric can be configured with a set of inputs, including bump size, bump style, etc. Full details for the different metrics can be found in:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://qa/QAWeb/Framework/Release.2200.00/QALib/Topics/AEMetricsTopics.html">http://qa/QAWeb/Framework/Release.2200.00/QALib/Topics/AEMetricsTopics.html</a></p></li>
</ul>
<p>In particular, we will highlight the recommended inputs for smile risk: Rega and Sega. There was a parameter introduced in order to make the risk more stable which is the safe bumping ratio choice. The latter is recommended to be set to “KeepConvex”.</p>
<p>The bump size chosen should be appropriate to the market data bumped. This can vary between different currency pairs. As a rule of thumb, for small strangles in the market (less than 0.50%), a 1 basis point bump would be good. For Rega risk, when the risk reversal values are of the order of few percents 2-3%, 10 basis point would be appropriate.</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Near/FarSega</p></th>
<th class="head"><p>Near/FarSega_(1)</p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>NumericalParameters.Differencing</p></td>
<td><p>string</p></td>
<td><p>Above</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Scaling</p></td>
<td><p>double</p></td>
<td><p></p></td>
<td><p>0.01</p></td>
</tr>
<tr class="row-even"><td><p>NumericalParameters.BumpSize</p></td>
<td><p>double</p></td>
<td><p></p></td>
<td><p>0.0001</p></td>
</tr>
<tr class="row-odd"><td><p>StripParameters.VolatilityBumpingType</p></td>
<td><p>String</p></td>
<td><p>e.g. NearStrangle or FarStrangle</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Style</p></td>
<td><p>String</p></td>
<td><p>Strip</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>StripParameters.SafeBumpingRatioChoice</p></td>
<td><p>String</p></td>
<td><p>KeepConvex</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Near/FarRega</p></th>
<th class="head"><p>Near/FarRega_(2)</p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>NumericalParameters.Differencing</p></td>
<td><p>string</p></td>
<td><p>Above</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Scaling</p></td>
<td><p>double</p></td>
<td><p></p></td>
<td><p>0.01</p></td>
</tr>
<tr class="row-even"><td><p>NumericalParameters.BumpSize</p></td>
<td><p>double</p></td>
<td><p></p></td>
<td><p>e.g. range 0.001 - 0.0001</p></td>
</tr>
<tr class="row-odd"><td><p>StripParameters.VolatilityBumpingType</p></td>
<td><p>String</p></td>
<td><p>e.g. NearRiskReversal or FarRiskReversal</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Style</p></td>
<td><p>String</p></td>
<td><p>Strip</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>StripParameters.SafeBumpingRatioChoice</p></td>
<td><p>String</p></td>
<td><p>KeepConvex</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id12">
<h3><span class="section-number">1.6.1.5.7.3. </span>7.3. Limitations<a class="headerlink" href="#id12" title="Link to this heading">#</a></h3>
<p>No limitations specific to the model per-se.</p>
<p>As in all models involving a smile volatility surface, failures can occur in risk if the original FX volatility surface is on the verge of breaking. This means that although the non-bumped volatility surface builds, a small change in the market data input can cause it to break in the bumped state. The desk has a validation put in place before publishing the volatility surface in order to prevent and minimize the occurrence of these failures. See section 6.4.</p>
</section>
</section>
<section id="tests-analyses-performed-on-payoff-model">
<h2><span class="section-number">1.6.1.5.8. </span>8. Tests &amp; Analyses performed on Payoff / Model<a class="headerlink" href="#tests-analyses-performed-on-payoff-model" title="Link to this heading">#</a></h2>
<section id="back-testing">
<h3><span class="section-number">1.6.1.5.8.1. </span>8.1. Back-testing<a class="headerlink" href="#back-testing" title="Link to this heading">#</a></h3>
<p>We performed several back tests on trades across different currency pairs and maturities <span class="math notranslate nohighlight">\(^1\)</span>. The back testing works by simulating using historical market data risk management of the trade over its lifetime. At each simulation date, different Greeks are calculated which are then used to calculate the amounts of hedging instruments to be held in the hedging portfolio.</p>
<p>We recall briefly the hedging procedure. Near/Far Rega and Sega risks are hedged using a combination of 10 and 25 delta vanilla (call and put) options. Vega is hedged with at the money options whereas FX Delta is hedged using forward contracts at the same maturity as the original trade. FX Gamma when used, is hedged using overnight ATM options. Any residual cash will be invested in a bond to earn interest.
The hedging portfolio is re-balanced accordingly, and a record of the P&amp;L is reported.</p>
<p>We present below the hedging simulations results for different currency pairs. We plot the hedging performance of LSV Markov Switching along with the hedging performance of Local volatility model and LSV Hybrid model <span class="math notranslate nohighlight">\(^2\)</span>.The hedging simulations are done on a daily basis and ignore bid/offer spreads. The plot shows as well how the FX spot rate changed over the simulation period.
The risks hedged are specified below each graph.</p>
</section>
<section id="eurusd">
<h3><span class="section-number">1.6.1.5.8.2. </span>EURUSD<a class="headerlink" href="#eurusd" title="Link to this heading">#</a></h3>
<p>Here we look at a EURUSD trade reverse knock out call with strike 1.27 and upper barrier at 1.45 maturing on 01 July 2011.
The simulation period starts on 01 July 2010. The barrier knocks out on 19th April 2011.</p>
<p><img alt="Figure 8.1: Back testing EURUSD RKO in LSV Markov Switching, hedged with Vega, Rega, Sega term structure along with FX Gamma and Delta" src="market/LSV/LSV Markov Switching  PDE/Fig/8.1.png" /></p>
<p>A good model will have small variation in P&amp;L over its lifetime. We can see from the graph above that LSV Markov Switching performs well and is impacted much less by large market moves than LSV hybrid model.</p>
<p>We look as well at one of the trades from the actual short dated trading book from the business. The trade ID is 26530958. It’s a EURUSD knock out put with strike 1.15 and an upper barrier at 1.375. The trade expiry date is 26 October 2012. The continuous flat barrier starts on 26 January 2012.</p>
<p>The simulation period will run from 26 January 2012 till 10 July 2012.</p>
<p><img alt="Figure 8.2: Back testing EURUSD 9M KO in LSV Markov Switching, hedged with Vega, Rega, Sega term structure along with Delta" src="market/LSV/LSV Markov Switching  PDE/Fig/8.2.png" /></p>
<p>We can see from the graph above that LSV Markov switching outperforms other models such as LSV hybrid (and local volatility in that case) by having a smaller P&amp;L variation closer to zero.</p>
</section>
<section id="gbpusd">
<h3><span class="section-number">1.6.1.5.8.3. </span>GBPUSD<a class="headerlink" href="#gbpusd" title="Link to this heading">#</a></h3>
<p>The trade used here is a one year GBPUSD reverse knock out call with strike at 1.5 and an upper barrier level at 1.8. The barrier starts on 01 July 2010 and ends on 01 July 2011 which coincides with the trade expiry date.</p>
<p><img alt="Figure 8.3: Back testing GBPUSD 1Y RKO in LSV Markov Switching, hedged with Vega, Rega, Sega term structure along with Delta and Gamma" src="market/LSV/LSV Markov Switching  PDE/Fig/8.3.png" /></p>
</section>
<section id="usdjpy">
<h3><span class="section-number">1.6.1.5.8.4. </span>USDJPY<a class="headerlink" href="#usdjpy" title="Link to this heading">#</a></h3>
<p>We look at a trade from the short dated book. The trade ID is 27609072. It’s a 3M reverse knock out call struck at 83 with an upper barrier at 86.3. The barrier starts on 09 April 2012 and ends three months later on 09 July 2012 which is the trade expiry date.</p>
<p><img alt="Figure 8.4: Back testing USDJPY 3M RKO in LSV Markov Switching, hedged with Vega, Rega, Sega term structure along with Delta" src="market/LSV/LSV Markov Switching  PDE/Fig/8.4.png" /></p>
<p>Here, it’s worth noting that all models show very small P&amp;L less than 2 basis points of notional over the 3 months period.</p>
</section>
<section id="audusd">
<h3><span class="section-number">1.6.1.5.8.5. </span>AUDUSD<a class="headerlink" href="#audusd" title="Link to this heading">#</a></h3>
<p>We look at a one year AUDUSD reverse knock out call with strike at 0.83 and an upper barrier level at 1.2. The barrier starts on 01 July 2010 and ends on 01 July 2011 which coincides with the trade expiry date.</p>
<p><img alt="Figure 8.5: Back testing AUDUSD 1Y RKO in LSV Markov Switching, hedged with Vega, Rega, Sega term structure along with Delta and Gamma" src="market/LSV/LSV Markov Switching  PDE/Fig/8.5.png" /></p>
</section>
<section id="conclusion">
<h3><span class="section-number">1.6.1.5.8.6. </span>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">#</a></h3>
<p>The back tests on different currency pairs show that LSV Markov switching model performs well and has consistently smaller P&amp;L variations when compared to LSV hybrid model.</p>
</section>
<section id="stress-testing">
<h3><span class="section-number">1.6.1.5.8.7. </span>8.2. Stress-testing<a class="headerlink" href="#stress-testing" title="Link to this heading">#</a></h3>
<p>We use here a stressed market data of November 2008 and look at the hedging simulation results of a one month reverse knock out during that period.</p>
<p>The trade is a one month reverse knock out put stuck at 98 with a lower barrier at 85. The barrier starts on 31 October 2008 and ends one month later on 01 December 2008.</p>
<p><img alt="Figure 8.6: Back testing USDJPY 1M RKO in LSV Markov Switching during November 2008, hedged with Vega, Rega, Sega term structure along with Delta and Gamma" src="market/LSV/LSV Markov Switching  PDE/Fig/8.6.png" /></p>
<p>Despite the stressed market conditions of November 2008, the above hedging simulation runs show that LSV Markov Switching is performing well.</p>
</section>
<section id="impact-of-assumptions">
<h3><span class="section-number">1.6.1.5.8.8. </span>8.3.    Impact of Assumptions<a class="headerlink" href="#impact-of-assumptions" title="Link to this heading">#</a></h3>
<p>The model assumptions are detailed in the section 4.2.</p>
<p>The back-tests outlined in 8.1 and 8.2 as well as testing performed in the following sections in the document demonstrates that these assumptions lead to a good model performance.</p>
</section>
<section id="accuracy-convergence-and-stability">
<h3><span class="section-number">1.6.1.5.8.9. </span>8.4.    Accuracy, convergence and stability<a class="headerlink" href="#accuracy-convergence-and-stability" title="Link to this heading">#</a></h3>
<p>We test the quality of the calibration fit of LSV Markov switching model. We present here the results for vanillas re-pricing with short-dated expiries up to 2Y and then look at more long dated options.</p>
</section>
<section id="short-dated-vanillas">
<h3><span class="section-number">1.6.1.5.8.10. </span>8.4.1.    Short dated Vanillas<a class="headerlink" href="#short-dated-vanillas" title="Link to this heading">#</a></h3>
<p>We price vanilla options with maturities ranging from 1W to 2Y and strikes corresponding to ATM, 25D/10D points, namely At the money , 25 delta call, 10 delta call, 25 delta put and 10 delta put options. We also vary the LSV Markov switching model parameters and examine the accuracy in repricing vanillas.</p>
<p>For each vanilla option, we compute the price from the LSV markov switching model along with the analytic on-smile price. We also compute the implied volatilities from the model vanilla prices and compare them against the implied volatilities from the analytic prices. The error in implied volatility is a standard measure for accuracy in Foreign exchange.The maximum of the absolute price differences is examined for different LSV Markov switching model parameters. We apply a parallel relative shift to the term structure of model parameters (vol of vol and transition q) and examine the accuracy of vanilla pricing.</p>
<p>Market data: Close of business EURUSD market data as of 09 July 2012.</p>
<section id="table-8-1-market-data-summary">
<h4><span class="section-number">1.6.1.5.8.10.1. </span>Table 8.1: Market data summary<a class="headerlink" href="#table-8-1-market-data-summary" title="Link to this heading">#</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Tenor</p></th>
<th class="head"><p>ATM</p></th>
<th class="head"><p>RR10</p></th>
<th class="head"><p>RR25</p></th>
<th class="head"><p>ST25</p></th>
<th class="head"><p>ST10</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1W</p></td>
<td><p>9.70%</p></td>
<td><p>-0.58%</p></td>
<td><p>-0.31%</p></td>
<td><p>0.12%</p></td>
<td><p>0.44%</p></td>
</tr>
<tr class="row-odd"><td><p>1M</p></td>
<td><p>10.29%</p></td>
<td><p>-1.80%</p></td>
<td><p>-0.96%</p></td>
<td><p>0.17%</p></td>
<td><p>0.64%</p></td>
</tr>
<tr class="row-even"><td><p>2M</p></td>
<td><p>10.46%</p></td>
<td><p>-2.57%</p></td>
<td><p>-1.38%</p></td>
<td><p>0.23%</p></td>
<td><p>0.88%</p></td>
</tr>
<tr class="row-odd"><td><p>3M</p></td>
<td><p>10.69%</p></td>
<td><p>-3.17%</p></td>
<td><p>-1.70%</p></td>
<td><p>0.26%</p></td>
<td><p>1.02%</p></td>
</tr>
<tr class="row-even"><td><p>6M</p></td>
<td><p>11.34%</p></td>
<td><p>-4.43%</p></td>
<td><p>-2.37%</p></td>
<td><p>0.33%</p></td>
<td><p>1.35%</p></td>
</tr>
<tr class="row-odd"><td><p>1Y</p></td>
<td><p>12.19%</p></td>
<td><p>-5.21%</p></td>
<td><p>-2.79%</p></td>
<td><p>0.36%</p></td>
<td><p>1.63%</p></td>
</tr>
<tr class="row-even"><td><p>2Y</p></td>
<td><p>12.62%</p></td>
<td><p>-5.33%</p></td>
<td><p>-2.85%</p></td>
<td><p>0.26%</p></td>
<td><p>1.45%</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="table-8-2-lsv-ms-base-model-parameters">
<h4><span class="section-number">1.6.1.5.8.10.2. </span>Table 8.2: LSV MS base model parameters<a class="headerlink" href="#table-8-2-lsv-ms-base-model-parameters" title="Link to this heading">#</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Vol of volatility term structure</p></td>
<td><p>1W,0.9; 2W,0.9; 1M,0.75; 3M,0.6; 6M,0.6; 1Y,0.6; 2Y,0.55;</p></td>
</tr>
<tr class="row-odd"><td><p>Q parameters term structure</p></td>
<td><p>1W,3.8; 2W,3.8; 1M,2; 2Y,0.8; 5Y,0.4; 10Y,0.2; 20Y,0.2</p></td>
</tr>
</tbody>
</table>
</div>
<p>PDE settings:</p>
</section>
<section id="table-8-3-pde-settings">
<h4><span class="section-number">1.6.1.5.8.10.3. </span>Table 8.3: PDE settings<a class="headerlink" href="#table-8-3-pde-settings" title="Link to this heading">#</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Settings</p></th>
<th class="head"><p>Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Number of time steps</p></td>
<td><p>200</p></td>
</tr>
<tr class="row-odd"><td><p>Number of FX space steps</p></td>
<td><p>200</p></td>
</tr>
<tr class="row-even"><td><p>Number of FX standard deviations</p></td>
<td><p>6</p></td>
</tr>
</tbody>
</table>
</div>
<p>The latter are used for both calibration and pricing. Other PDE settings are set to the values outlined in 5.2 and 6.2.2 unless specified otherwise.</p>
<p>Below, we summarize the vanilla pricing results for different model parameters scenarios.</p>
<p>Variation of vol of volatility</p>
<ol class="arabic simple">
<li><p><strong>Vol of vol close to zero:</strong></p></li>
</ol>
<p>We set here the vol of volatility parameters to a value close to zero, namely 0.001 across different maturities. As a reference, we compare that to local volatility model.</p>
<p><img alt="Figure 8.7: Accuracy in terms of implied volatility error for LSV Markov Switching with a vol of" src="market/LSV/LSV Markov Switching  PDE/Fig/7.png" /></p>
<p><img alt="Figure 8.8: Accuracy in terms of implied volatility error for Local Vol" src="market/LSV/LSV Markov Switching  PDE/Fig/8.png" /></p>
<p>As we can see from the two plots above, we get an excellent fit to vanillas in LSV Markov Switching with very low vol of volatility. The errors in implied volatilities are compared to the errors found in a local volatility model and remain within 1 basis point.</p>
<ol class="arabic simple" start="2">
<li><p><strong>Base LSV MS model parameters - shift -40%:</strong></p></li>
</ol>
<p><img alt="Figure 8.9: Accuracy in terms of implied volatility error for LSV Markov Switching with vol of vol parameters with a -40% relative shift" src="market/LSV/LSV Markov Switching  PDE/Fig/9.png" /></p>
</section>
<section id="table-8-4-lsv-ms-model-parameters-shifted">
<h4><span class="section-number">1.6.1.5.8.10.4. </span>Table 8.4: LSV MS model parameters shifted<a class="headerlink" href="#table-8-4-lsv-ms-model-parameters-shifted" title="Link to this heading">#</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Vol of volatility term structure</p></td>
<td><p>1W,0.54;2W,0.54;1M,0.45;3M,0.36;6M,0.36;1Y,0.36;2Y,0.33;</p></td>
</tr>
</tbody>
</table>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Base LSV MS model parameters - shift -20%:</strong></p></li>
</ol>
<p><img alt="Figure 8.10: Accuracy in terms of implied volatility error for LSV Markov Switching with vol of vol parameters with a -20% relative shift" src="market/LSV/LSV Markov Switching  PDE/Fig/11.png" /></p>
</section>
<section id="table-8-5-lsv-ms-model-parameters-shifted">
<h4><span class="section-number">1.6.1.5.8.10.5. </span>Table 8.5: LSV MS model parameters shifted<a class="headerlink" href="#table-8-5-lsv-ms-model-parameters-shifted" title="Link to this heading">#</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Vol of volatility term structure</p></td>
<td><p>1W,0.72;2W,0.72;1M,0.6;3M,0.48;6M,0.48;1Y,0.48;2Y,0.44;</p></td>
</tr>
</tbody>
</table>
</div>
<ol class="arabic simple" start="4">
<li><p><strong>Base LSV MS model parameters - shift 0%:</strong></p></li>
</ol>
<p>Here we use the LSV Model parameters as specified in the settings section and examine what is the error that we get in terms of implied volatilities when pricing vanillas.</p>
<p><img alt="Figure 8.11: Accuracy in terms of implied volatility error for LSV Markov Switching with base parameters" src="market/LSV/LSV Markov Switching  PDE/Fig/13.png" /></p>
</section>
<section id="table-8-6-lsv-ms-base-model-parameters">
<h4><span class="section-number">1.6.1.5.8.10.6. </span>Table 8.6: LSV MS base model parameters<a class="headerlink" href="#table-8-6-lsv-ms-base-model-parameters" title="Link to this heading">#</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Vol of volatility term structure</p></td>
<td><p>1W,0.9;2W,0.9;1M,0.75;3M,0.6;6M,0.6;1Y,0.6;2Y,0.55;</p></td>
</tr>
</tbody>
</table>
</div>
<ol class="arabic simple" start="5">
<li><p><strong>Base LSV MS model parameters - shift 20%:</strong></p></li>
</ol>
<p><img alt="Figure 8.12: Accuracy in terms of implied volatility error for LSV Markov Switching with vol of vol parameters with a +20% relative shift" src="market/LSV/LSV Markov Switching  PDE/Fig/15.png" /></p>
</section>
<section id="table-8-7-lsv-ms-model-parameters-shifted">
<h4><span class="section-number">1.6.1.5.8.10.7. </span>Table 8.7: LSV MS model parameters shifted<a class="headerlink" href="#table-8-7-lsv-ms-model-parameters-shifted" title="Link to this heading">#</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Vol of volatility term structure</p></td>
<td><p>1W,1.08;2W,1.08;1M,0.9;3M,0.72;6M,0.72;1Y,0.72;2Y,0.66;</p></td>
</tr>
</tbody>
</table>
</div>
<ol class="arabic simple" start="6">
<li><p><strong>Base LSV MS model parameters - shift 40%:</strong></p></li>
</ol>
<p><img alt="Figure 8.13: Accuracy in terms of implied volatility error for LSV Markov Switching with vol of vol parameters with a +40% relative shift" src="market/LSV/LSV Markov Switching  PDE/Fig/17.png" /></p>
</section>
<section id="table-8-8-lsv-ms-model-parameters-shifted">
<h4><span class="section-number">1.6.1.5.8.10.8. </span>Table 8.8: LSV MS model parameters shifted<a class="headerlink" href="#table-8-8-lsv-ms-model-parameters-shifted" title="Link to this heading">#</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Vol of volatility term structure</p></td>
<td><p>1W,1.26;2W,1.26;1M,1.05;3M,0.84;6M,0.84;1Y,0.84;2Y,0.77;</p></td>
</tr>
</tbody>
</table>
</div>
<ol class="arabic simple" start="7">
<li><p><strong>Base LSV MS model parameters - shift 60%:</strong></p></li>
</ol>
<p><img alt="Accuracy in terms of implied vol LSV MS - VoV relative shift +60%" src="market/LSV/LSV Markov Switching  PDE/Fig/19.png" /></p>
<ol class="arabic simple" start="8">
<li><p><strong>Base LSV MS model parameters - shift 80%:</strong></p></li>
</ol>
<p><img alt="Accuracy in terms of implied vol LSV MS - VoV relative shift +80%" src="market/LSV/LSV Markov Switching  PDE/Fig/20.png" /></p>
</section>
</section>
<section id="id13">
<h3><span class="section-number">1.6.1.5.8.11. </span>Conclusion<a class="headerlink" href="#id13" title="Link to this heading">#</a></h3>
<p>For the different vol of volatility parameters (cases 1 - 5), we get a very good agreement between the model vanilla prices and the analytic vanilla prices. When the vol of volatility becomes high (cases 6,7), the pricing numerical error increases as the maturity increase. This is illustrated by the graph below where we plot the maximum error in implied volatility for different relative shifts applied to the vol of volatility parameters.</p>
<p><img alt="Implied volatility error as function of vol of vol shift" src="market/LSV/LSV Markov Switching  PDE/Fig/1.png" /></p>
<p>Figure 8.16: Accuracy in terms of implied volatility error for LSV Markov Switching for different vol of volatility shift parameters</p>
<p>Let’s take a closer look at the biggest error that we get above which 6 basis point for a 2Y 10 delta put vanilla when a high vol of volatility (case 7 ; 80% shift from the base vol of vol parameters outlined above) is used in LSV Markov switching. We calculate the error in implied volatility between LSV Markov switching model with high vol of vol and the Local vol model while varying the number of PDE settings.</p>
<p>Let’s examine first the spatial convergence in the FX direction. We set the number of time steps to 400 and vary the number of FX steps and calculate the implied volatility from the vanilla price under LSV MS.</p>
<p><img alt="FX Convergence - LSV MS" src="market/LSV/LSV Markov Switching  PDE/Fig/3.png" /></p>
<p>Figure 8.17: FX spatial convergence of 2Y 10 delta Put under LSV Markov switching with high vol of volatility. Time steps set to 400.</p>
<p>We see that 200 FX steps we reach the converged price. We fix then the number of FX steps to be 200 and vary the number of time steps and compute the implied volatility error for various time steps.</p>
<p><img alt="Error in Implied volatility" src="market/LSV/LSV Markov Switching  PDE/Fig/5.png" /></p>
<p>Figure 8.18: Time convergence of 2Y 10 delta Put under LSV Markov switching with high vol of volatility</p>
<p>As the graph above shows, the error decreases as we increase the number of steps which shows that the problem is purely numerical and can be tackled with an increased number of PDE settings.</p>
</section>
<section id="variation-of-transition-q-parameters">
<h3><span class="section-number">1.6.1.5.8.12. </span>Variation of transition q parameters<a class="headerlink" href="#variation-of-transition-q-parameters" title="Link to this heading">#</a></h3>
<p>We vary now the transition q parameters and apply a parallel relative shift with different sizes to the term structure of parameters. The vol of vol parameters are set to the base values specified in 8.4.1.</p>
</section>
<section id="base-lsv-ms-q-parameters-shift-10">
<h3><span class="section-number">1.6.1.5.8.13. </span>1. Base LSV MS q parameters - shift 10%:<a class="headerlink" href="#base-lsv-ms-q-parameters-shift-10" title="Link to this heading">#</a></h3>
<p><img alt="Accuracy in terms of Implied vol error LSV MS - q params with relative shift 10%" src="market/LSV/LSV Markov Switching  PDE/Fig/7.png" /></p>
<p>Figure 8.19: Accuracy in terms of implied volatility error for LSV Markov Switching with q parameters with a +10% relative shift</p>
<section id="table-8-11-lsv-ms-q-parameters-shifted">
<h4><span class="section-number">1.6.1.5.8.13.1. </span>Table 8.11: LSV MS q parameters shifted<a class="headerlink" href="#table-8-11-lsv-ms-q-parameters-shifted" title="Link to this heading">#</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>q term structure</p></td>
<td><p>1W,4.18; 2W,4.18; 1M,2.2; 2Y,0.88; 5Y,0.44; 10Y,0.22; 20Y,0.22;</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="base-lsv-ms-q-parameters-shift-20">
<h3><span class="section-number">1.6.1.5.8.14. </span>2. Base LSV MS q parameters - shift 20%:<a class="headerlink" href="#base-lsv-ms-q-parameters-shift-20" title="Link to this heading">#</a></h3>
<p><img alt="Accuracy in terms of Implied vol error LSV MS - q params with relative shift 20%" src="market/LSV/LSV Markov Switching  PDE/Fig/9.png" /></p>
<p>Figure 8.20: Accuracy in terms of implied volatility error for LSV Markov Switching with q parameters with a +20% relative shift</p>
<section id="table-8-12-lsv-ms-q-parameters-shifted">
<h4><span class="section-number">1.6.1.5.8.14.1. </span>Table 8.12: LSV MS q parameters shifted<a class="headerlink" href="#table-8-12-lsv-ms-q-parameters-shifted" title="Link to this heading">#</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>q term structure</p></td>
<td><p>1W,4.56; 2W,4.56; 1M,2.4; 2Y,0.96; 5Y,0.48; 10Y,0.24; 20Y,0.24;</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="base-lsv-ms-q-parameters-shift-40">
<h3><span class="section-number">1.6.1.5.8.15. </span>3. Base LSV MS q parameters - shift 40%:<a class="headerlink" href="#base-lsv-ms-q-parameters-shift-40" title="Link to this heading">#</a></h3>
<p><img alt="Accuracy in terms of Implied vol error LSV MS - q params with relative shift 40%" src="market/LSV/LSV Markov Switching  PDE/Fig/11.png" /></p>
<p>Figure 8.21: Accuracy in terms of implied volatility error for LSV Markov Switching with q parameters with a +40% relative shift</p>
<section id="table-8-13-lsv-ms-q-parameters-shifted">
<h4><span class="section-number">1.6.1.5.8.15.1. </span>Table 8.13: LSV MS q parameters shifted<a class="headerlink" href="#table-8-13-lsv-ms-q-parameters-shifted" title="Link to this heading">#</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>q term structure</p></td>
<td><p>1W,5.32; 2W,5.32; 1M,2.8; 2Y,1.12; 5Y,0.56; 10Y,0.28; 20Y,0.28;</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="base-lsv-ms-q-parameters-shift-60">
<h3><span class="section-number">1.6.1.5.8.16. </span>4. Base LSV MS q parameters - shift 60%:<a class="headerlink" href="#base-lsv-ms-q-parameters-shift-60" title="Link to this heading">#</a></h3>
<p><img alt="Accuracy in terms of Implied vol error LSV MS - q params with relative shift 60%" src="market/LSV/LSV Markov Switching  PDE/Fig/13.png" /></p>
</section>
<section id="id14">
<h3><span class="section-number">1.6.1.5.8.17. </span>Conclusion<a class="headerlink" href="#id14" title="Link to this heading">#</a></h3>
<p>We can see from above that we get a good agreement when repricing the vanillas for the different q parameters variations. The error stays within 2 basis points. This shows that the accuracy of vanilla repricing within the model is not very sensitive to the transition q parameters.</p>
<p>This is illustrated by the graph 8.24 where we see that the maximum error in implied volatility doesn’t change significantly for different relative shifts applied to the q parameters.</p>
<p><img alt="Implied volatility error as a function of q parameters shift" src="market/LSV/LSV Markov Switching  PDE/Fig/14.png" /></p>
</section>
<section id="long-dated-vanillas">
<h3><span class="section-number">1.6.1.5.8.18. </span>8.4.2.    Long dated Vanillas<a class="headerlink" href="#long-dated-vanillas" title="Link to this heading">#</a></h3>
<p>We focus here on the long dated options. The prices of vanilla options with maturities ranging from 3Y, 5Y .. to 20Y for At the money, 25 delta /10 delta call and put strikes are computed. Similarly to the previous sub section, we examine the accuracy in vanilla repricing for different model parameters.</p>
<p>For each vanilla option, we compute the price from the LSV markov switching model along with the analytic on-smile price. We also compute the implied volatilities from the model vanilla prices and compare them against the implied volatilities from the analytic prices. The error in implied volatility is reported and the maximum of the absolute price differences is examined for LSV Markov switching with different model parameters scenarios. Similarly to the short dated vanillas analysis, we apply a relative parallel shift with different sizes to the term structure of vol of volatility parameters (VoV TS) and transition q parameters to examine the vanilla pricing accuracy in each case.</p>
<p>Market data: Close of business EURUSD market data as of 09 July 2012.</p>
<section id="table-8-16-market-data-summary">
<h4><span class="section-number">1.6.1.5.8.18.1. </span>Table 8.16: Market data summary<a class="headerlink" href="#table-8-16-market-data-summary" title="Link to this heading">#</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Tenor</p></th>
<th class="head"><p>ATM</p></th>
<th class="head"><p>RR10</p></th>
<th class="head"><p>RR25</p></th>
<th class="head"><p>ST25</p></th>
<th class="head"><p>ST10</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>3Y</p></td>
<td><p>12.66%</p></td>
<td><p>-5.27%</p></td>
<td><p>-2.82%</p></td>
<td><p>0.23%</p></td>
<td><p>1.32%</p></td>
</tr>
<tr class="row-odd"><td><p>4Y</p></td>
<td><p>12.69%</p></td>
<td><p>-5.09%</p></td>
<td><p>-2.77%</p></td>
<td><p>0.17%</p></td>
<td><p>1.06%</p></td>
</tr>
<tr class="row-even"><td><p>5Y</p></td>
<td><p>12.73%</p></td>
<td><p>-5.26%</p></td>
<td><p>-2.87%</p></td>
<td><p>0.11%</p></td>
<td><p>0.96%</p></td>
</tr>
<tr class="row-odd"><td><p>7Y</p></td>
<td><p>12.81%</p></td>
<td><p>-5.51%</p></td>
<td><p>-3.02%</p></td>
<td><p>0.09%</p></td>
<td><p>0.81%</p></td>
</tr>
<tr class="row-even"><td><p>10Y</p></td>
<td><p>12.90%</p></td>
<td><p>-5.44%</p></td>
<td><p>-2.98%</p></td>
<td><p>0.09%</p></td>
<td><p>0.81%</p></td>
</tr>
<tr class="row-odd"><td><p>15Y</p></td>
<td><p>13.72%</p></td>
<td><p>-5.30%</p></td>
<td><p>-2.97%</p></td>
<td><p>0.15%</p></td>
<td><p>0.88%</p></td>
</tr>
<tr class="row-even"><td><p>20Y</p></td>
<td><p>14.51%</p></td>
<td><p>-5.10%</p></td>
<td><p>-2.68%</p></td>
<td><p>0.24%</p></td>
<td><p>1.50%</p></td>
</tr>
</tbody>
</table>
</div>
<p>Base Model parameters:</p>
</section>
<section id="table-8-17-lsv-ms-base-model-parameters">
<h4><span class="section-number">1.6.1.5.8.18.2. </span>Table 8.17: LSV MS base model parameters<a class="headerlink" href="#table-8-17-lsv-ms-base-model-parameters" title="Link to this heading">#</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>VoV TS</p></td>
<td><p>1W,0.9; 2W,0.9; 1M,0.75; 3M,0.6; 6M,0.6; 1Y,0.6; 2Y,0.55; 3Y,0.5;5Y,0.5;10Y,0.6;20Y,0.6</p></td>
</tr>
<tr class="row-odd"><td><p>Q parameters TS</p></td>
<td><p>1W,3.8; 2W,3.8; 1M,2; 2Y,0.8; 5Y,0.4; 10Y,0.2; 20Y,0.2</p></td>
</tr>
</tbody>
</table>
</div>
<p>PDE settings:
The PDE settings for long dated trades need to be increased. They are set as follows:</p>
</section>
<section id="table-8-18-pde-settings">
<h4><span class="section-number">1.6.1.5.8.18.3. </span>Table 8.18: PDE settings<a class="headerlink" href="#table-8-18-pde-settings" title="Link to this heading">#</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Settings</p></th>
<th class="head"><p>Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Number of time steps</p></td>
<td><p>600</p></td>
</tr>
<tr class="row-odd"><td><p>Number of FX space steps</p></td>
<td><p>300</p></td>
</tr>
<tr class="row-even"><td><p>Number of FX standard deviations</p></td>
<td><p>6</p></td>
</tr>
</tbody>
</table>
</div>
<p>The latter are used for both calibration and pricing. Other PDE settings are set to the values outlined in 5.2 and 6.2.2 unless specified otherwise.</p>
<p>Below, we summarize the vanilla pricing results for different model parameters.</p>
</section>
</section>
<section id="variation-of-vol-of-vol-parameters">
<h3><span class="section-number">1.6.1.5.8.19. </span>Variation of vol of vol parameters<a class="headerlink" href="#variation-of-vol-of-vol-parameters" title="Link to this heading">#</a></h3>
<section id="vol-of-vol-close-to-zero">
<h4><span class="section-number">1.6.1.5.8.19.1. </span>1. Vol of vol close to zero:<a class="headerlink" href="#vol-of-vol-close-to-zero" title="Link to this heading">#</a></h4>
<p>First, we set the vol of volatilities to a small value close to zero, namely 0.001.</p>
<p><img alt="Accuracy in terms of implied vols LSV MS - VoV set to 0.001" src="market/LSV/LSV Markov Switching  PDE/Fig/20.png" /></p>
<p>Figure 8.25: Accuracy in terms of implied volatility error for LSV Markov Switching with a vol of volatility close to zero (0.001)</p>
<p>Figure 8.26: Accuracy in terms of implied volatility error for Local Vol</p>
<p>As we can see from the two plots above, we get an excellent fit to vanillas in LSV Markov Switching with very low vol of volatility. The errors in implied volatilities are compared to the errors found in a local volatility model and remain within 1 basis point.</p>
</section>
</section>
<section id="base-lsv-ms-model-parameters-shift-40">
<h3><span class="section-number">1.6.1.5.8.20. </span>2. Base LSV MS model parameters - shift -40%:<a class="headerlink" href="#base-lsv-ms-model-parameters-shift-40" title="Link to this heading">#</a></h3>
<p><img alt="Accuracy in terms of implied vol LSV MS - VoV relative shift -40%" src="market/LSV/LSV Markov Switching  PDE/Fig/3.png" /></p>
</section>
<section id="base-lsv-ms-model-parameters-shift-20">
<h3><span class="section-number">1.6.1.5.8.21. </span>3. Base LSV MS model parameters - shift -20%:<a class="headerlink" href="#base-lsv-ms-model-parameters-shift-20" title="Link to this heading">#</a></h3>
<p><img alt="Accuracy in terms of implied vol LSV MS - VoV relative shift -20%" src="market/LSV/LSV Markov Switching  PDE/Fig/4.png" /></p>
</section>
<section id="base-lsv-ms-model-parameters-shift-0">
<h3><span class="section-number">1.6.1.5.8.22. </span>4. Base LSV MS model parameters - shift 0%:<a class="headerlink" href="#base-lsv-ms-model-parameters-shift-0" title="Link to this heading">#</a></h3>
<p>Here we use the LSV Model parameters as specified in the settings section and examine what is the error that we get in terms of implied volatilities when pricing vanillas.</p>
<p><img alt="Accuracy in terms of implied vol LSV MS - base params" src="market/LSV/LSV Markov Switching  PDE/Fig/5.png" /></p>
</section>
<section id="id15">
<h3><span class="section-number">1.6.1.5.8.23. </span>5. Base LSV MS model parameters - shift 20%:<a class="headerlink" href="#id15" title="Link to this heading">#</a></h3>
<p><img alt="Accuracy in terms of implied vol LSV MS - VoV relative shift +20%" src="market/LSV/LSV Markov Switching  PDE/Fig/6.png" /></p>
</section>
<section id="id16">
<h3><span class="section-number">1.6.1.5.8.24. </span>6. Base LSV MS model parameters - shift 40%:<a class="headerlink" href="#id16" title="Link to this heading">#</a></h3>
<p><img alt="Accuracy in terms of implied vol LSV MS - VoV relative shift +40%" src="market/LSV/LSV Markov Switching  PDE/Fig/7.png" /></p>
</section>
<section id="base-lsv-ms-model-parameters-shift-80">
<h3><span class="section-number">1.6.1.5.8.25. </span>8. Base LSV MS model parameters - shift 80%:<a class="headerlink" href="#base-lsv-ms-model-parameters-shift-80" title="Link to this heading">#</a></h3>
<p><img alt="Accuracy in terms of implied vol LSV MS - VoV relative shift +80%" src="market/LSV/LSV Markov Switching  PDE/Fig/8.png" /></p>
</section>
<section id="id17">
<h3><span class="section-number">1.6.1.5.8.26. </span>Conclusion<a class="headerlink" href="#id17" title="Link to this heading">#</a></h3>
<p>For the different vol of volatility parameters (cases 1 - 5), we get a very good agreement between the model vanilla prices and the analytic vanilla prices. When the vol of volatility becomes high (cases 6,7), the pricing numerical error increases. This is illustrated by the graph below where we plot the maximum error in implied volatility for different relative shifts applied to the vol of volatility parameters.</p>
<p><img alt="Implied volatility error as function of vol of vol shift" src="market/LSV/LSV Markov Switching  PDE/Fig/9.png" /></p>
</section>
<section id="fx-convergence-for-lsv-ms-long-dated-vanilla-20y">
<h3><span class="section-number">1.6.1.5.8.27. </span>FX convergence for LSV MS Long dated vanilla - 20Y<a class="headerlink" href="#fx-convergence-for-lsv-ms-long-dated-vanilla-20y" title="Link to this heading">#</a></h3>
<p><img alt="FX convergence for LSV MS Long dated vanilla - 20Y" src="market/LSV/LSV Markov Switching  PDE/Fig/10.png" /></p>
</section>
<section id="time-convergence-for-lsv-ms-long-dated-vanilla-20y">
<h3><span class="section-number">1.6.1.5.8.28. </span>Time convergence for LSV MS Long dated vanilla - 20Y<a class="headerlink" href="#time-convergence-for-lsv-ms-long-dated-vanilla-20y" title="Link to this heading">#</a></h3>
<p><img alt="Time convergence for LSV MS Long dated vanilla - 20Y" src="market/LSV/LSV Markov Switching  PDE/Fig/11.png" /></p>
</section>
<section id="id18">
<h3><span class="section-number">1.6.1.5.8.29. </span>Variation of transition q parameters<a class="headerlink" href="#id18" title="Link to this heading">#</a></h3>
<p>Similarly to the short dated options, we look at the impact of transition q parameters on the quality of the calibration. We vary the transition q parameters and apply a parallel relative shift with different sizes to the term structure of parameters. The vol of vol parameters are set to the base values specified in 8.4.2.</p>
</section>
<section id="id19">
<h3><span class="section-number">1.6.1.5.8.30. </span>1. Base LSV MS q parameters - shift 10%:<a class="headerlink" href="#id19" title="Link to this heading">#</a></h3>
<p><img alt="Accuracy in terms of implied vol LSV MS - q params with relative shift 10%" src="market/LSV/LSV Markov Switching  PDE/Fig/12.png" /></p>
</section>
<section id="id20">
<h3><span class="section-number">1.6.1.5.8.31. </span>2. Base LSV MS q parameters - shift 20%:<a class="headerlink" href="#id20" title="Link to this heading">#</a></h3>
<p><img alt="Accuracy in terms of implied vol LSV MS - q params with relative shift 20%" src="market/LSV/LSV Markov Switching  PDE/Fig/13.png" /></p>
</section>
<section id="id21">
<h3><span class="section-number">1.6.1.5.8.32. </span>3. Base LSV MS q parameters - shift 40%:<a class="headerlink" href="#id21" title="Link to this heading">#</a></h3>
<p><img alt="Accuracy in terms of implied vol LSV MS - q params with relative shift 40%" src="market/LSV/LSV Markov Switching  PDE/Fig/14.png" /></p>
</section>
<section id="id22">
<h3><span class="section-number">1.6.1.5.8.33. </span>4. Base LSV MS q parameters - shift 60%:<a class="headerlink" href="#id22" title="Link to this heading">#</a></h3>
<p><img alt="Accuracy in terms of implied vol LSV MS - q params with relative shift 60%" src="market/LSV/LSV Markov Switching  PDE/Fig/15.png" /></p>
</section>
<section id="base-lsv-ms-q-parameters-shift-80">
<h3><span class="section-number">1.6.1.5.8.34. </span>5. Base LSV MS q parameters - shift 80%:<a class="headerlink" href="#base-lsv-ms-q-parameters-shift-80" title="Link to this heading">#</a></h3>
<p><img alt="Accuracy in terms of implied vol LSV MS - q params with relative shift 80%" src="market/LSV/LSV Markov Switching  PDE/Fig/16.png" /></p>
</section>
<section id="id23">
<h3><span class="section-number">1.6.1.5.8.35. </span>Conclusion<a class="headerlink" href="#id23" title="Link to this heading">#</a></h3>
<p>We have a good agreement when repricing the long dated vanillas as well for the different q parameters variations. The graph 8.42 shows that the maximum error in implied volatility doesn’t change significantly when varying the q parameters.</p>
<p><img alt="Implied volatility error as function of vol of vol shift" src="market/LSV/LSV Markov Switching  PDE/Fig/17.png" /></p>
<p>scaled to the PV impact of 100% relative spot shift.</p>
<p>We also look at FX Vega risk. It’s calculated by central differences using a parallel style and scaled to the impact of a 1% absolute vol shift. Near Sega and Rega risks are computed using upward differences using a parallel style and a scaling of 1%.</p>
<p>The analytic values for greeks of the Vanilla are obtained using the analytic model with “SingleVol” FX dynamic in UMIFX. We use USDJPY market data close of business as of 09 July 2012.</p>
<p>Here we assess the stability of the risk with respect to bump sizes. We calculate delta, gamma, vega, near rega and sega for At the money, 25 and 10 delta call and put vanilla options with maturities ranging from 1W, 1M …to 2Y.
We compare the risk values between LSV Markov switching to the analytic ones ³ for different bump sizes. For delta, gamma and vega we compute the relative difference between the model risk values and the analytic values. Results are outlined in the tables, and below.</p>
<p><img alt="Risk comparison table with bump sizes" src="market/LSV/LSV Markov Switching  PDE/Fig/20.png" /></p>
</section>
<section id="bumpsize0-0001">
<h3><span class="section-number">1.6.1.5.8.36. </span>BumpSize0.0001<a class="headerlink" href="#bumpsize0-0001" title="Link to this heading">#</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>OptionType</p></th>
<th class="head"><p>strike</p></th>
<th class="head"><p>expiry</p></th>
<th class="head"><p>Model risk</p></th>
<th class="head"><p>Analytic risk</p></th>
<th class="head"><p>Rel. Diff</p></th>
<th class="head"><p>Model risk</p></th>
<th class="head"><p>Analytic risk</p></th>
<th class="head"><p>Rel. Diff</p></th>
<th class="head"><p>Model risk</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>80.87</p></td>
<td><p>1W</p></td>
<td><p>1,347</p></td>
<td><p>1,346</p></td>
<td><p>-0.08%</p></td>
<td><p>134,100</p></td>
<td><p>134,668</p></td>
<td><p>0.42%</p></td>
<td><p>142,581</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>80.22</p></td>
<td><p>1W</p></td>
<td><p>292,174</p></td>
<td><p>289,780</p></td>
<td><p>-0.83%</p></td>
<td><p>290,456</p></td>
<td><p>290,046</p></td>
<td><p>-0.14%</p></td>
<td><p>311,023</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>79.59</p></td>
<td><p>1W</p></td>
<td><p>564,959</p></td>
<td><p>560,996</p></td>
<td><p>-0.71%</p></td>
<td><p>559,903</p></td>
<td><p>559,423</p></td>
<td><p>-0.09%</p></td>
<td><p>469,763</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>79.00</p></td>
<td><p>1W</p></td>
<td><p>348,130</p></td>
<td><p>345,642</p></td>
<td><p>-0.72%</p></td>
<td><p>346,447</p></td>
<td><p>345,905</p></td>
<td><p>-0.16%</p></td>
<td><p>358,020</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>78.43</p></td>
<td><p>1W</p></td>
<td><p>168,682</p></td>
<td><p>168,755</p></td>
<td><p>0.04%</p></td>
<td><p>168,134</p></td>
<td><p>168,867</p></td>
<td><p>0.43%</p></td>
<td><p>180,347</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>82.23</p></td>
<td><p>1M</p></td>
<td><p>71,733</p></td>
<td><p>71,646</p></td>
<td><p>-0.12%</p></td>
<td><p>71,354</p></td>
<td><p>71,652</p></td>
<td><p>0.42%</p></td>
<td><p>72,164</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>80.89</p></td>
<td><p>1M</p></td>
<td><p>144,857</p></td>
<td><p>143,624</p></td>
<td><p>-0.86%</p></td>
<td><p>143,830</p></td>
<td><p>143,650</p></td>
<td><p>-0.13%</p></td>
<td><p>146,331</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>79.56</p></td>
<td><p>1M</p></td>
<td><p>260,279</p></td>
<td><p>258,521</p></td>
<td><p>-0.68%</p></td>
<td><p>258,558</p></td>
<td><p>258,361</p></td>
<td><p>-0.08%</p></td>
<td><p>244,848</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>78.29</p></td>
<td><p>1M</p></td>
<td><p>154,140</p></td>
<td><p>152,993</p></td>
<td><p>-0.75%</p></td>
<td><p>153,227</p></td>
<td><p>153,021</p></td>
<td><p>-0.13%</p></td>
<td><p>155,914</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>77.10</p></td>
<td><p>1M</p></td>
<td><p>78,358</p></td>
<td><p>78,316</p></td>
<td><p>-0.05%</p></td>
<td><p>78,043</p></td>
<td><p>78,325</p></td>
<td><p>0.36%</p></td>
<td><p>79,086</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>83.40</p></td>
<td><p>2M</p></td>
<td><p>47,907</p></td>
<td><p>48,048</p></td>
<td><p>0.29%</p></td>
<td><p>47,881</p></td>
<td><p>48,051</p></td>
<td><p>0.35%</p></td>
<td><p>48,249</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>81.42</p></td>
<td><p>2M</p></td>
<td><p>103,820</p></td>
<td><p>103,610</p></td>
<td><p>-0.20%</p></td>
<td><p>103,742</p></td>
<td><p>103,617</p></td>
<td><p>-0.12%</p></td>
<td><p>104,467</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>79.53</p></td>
<td><p>2M</p></td>
<td><p>181,491</p></td>
<td><p>181,441</p></td>
<td><p>-0.03%</p></td>
<td><p>181,423</p></td>
<td><p>181,391</p></td>
<td><p>-0.02%</p></td>
<td><p>176,640</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>77.72</p></td>
<td><p>2M</p></td>
<td><p>108,293</p></td>
<td><p>108,214</p></td>
<td><p>-0.07%</p></td>
<td><p>108,360</p></td>
<td><p>108,223</p></td>
<td><p>-0.13%</p></td>
<td><p>109,206</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="bumpsize0-001">
<h3><span class="section-number">1.6.1.5.8.37. </span>BumpSize0.001<a class="headerlink" href="#bumpsize0-001" title="Link to this heading">#</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>OptionType</p></th>
<th class="head"><p>strike</p></th>
<th class="head"><p>expiry</p></th>
<th class="head"><p>Model risk</p></th>
<th class="head"><p>Analytic risk</p></th>
<th class="head"><p>Rel. Diff</p></th>
<th class="head"><p>Model risk</p></th>
<th class="head"><p>Analytic risk</p></th>
<th class="head"><p>Rel. Diff</p></th>
<th class="head"><p>Model risk</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>80.87</p></td>
<td><p>1W</p></td>
<td><p>17,032</p></td>
<td><p>17,040</p></td>
<td><p>0.04%</p></td>
<td><p>17,032</p></td>
<td><p>17,039</p></td>
<td><p>0.04%</p></td>
<td><p>16,953</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>80.22</p></td>
<td><p>1W</p></td>
<td><p>32,542</p></td>
<td><p>32,576</p></td>
<td><p>0.11%</p></td>
<td><p>32,541</p></td>
<td><p>32,575</p></td>
<td><p>0.10%</p></td>
<td><p>32,432</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>79.59</p></td>
<td><p>1W</p></td>
<td><p>43,934</p></td>
<td><p>43,970</p></td>
<td><p>0.08%</p></td>
<td><p>43,934</p></td>
<td><p>43,970</p></td>
<td><p>0.08%</p></td>
<td><p>43,924</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>79.00</p></td>
<td><p>1W</p></td>
<td><p>33,727</p></td>
<td><p>33,768</p></td>
<td><p>0.12%</p></td>
<td><p>33,726</p></td>
<td><p>33,767</p></td>
<td><p>0.12%</p></td>
<td><p>33,597</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>78.43</p></td>
<td><p>1W</p></td>
<td><p>17,951</p></td>
<td><p>17,969</p></td>
<td><p>0.10%</p></td>
<td><p>17,950</p></td>
<td><p>17,969</p></td>
<td><p>0.10%</p></td>
<td><p>17,842</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>82.23</p></td>
<td><p>1M</p></td>
<td><p>37,487</p></td>
<td><p>37,655</p></td>
<td><p>0.45%</p></td>
<td><p>37,486</p></td>
<td><p>37,654</p></td>
<td><p>0.45%</p></td>
<td><p>37,360</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>80.89</p></td>
<td><p>1M</p></td>
<td><p>70,006</p></td>
<td><p>70,221</p></td>
<td><p>0.31%</p></td>
<td><p>70,004</p></td>
<td><p>70,219</p></td>
<td><p>0.31%</p></td>
<td><p>69,827</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>79.56</p></td>
<td><p>1M</p></td>
<td><p>92,319</p></td>
<td><p>92,497</p></td>
<td><p>0.19%</p></td>
<td><p>92,319</p></td>
<td><p>92,497</p></td>
<td><p>0.19%</p></td>
<td><p>92,323</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>78.29</p></td>
<td><p>1M</p></td>
<td><p>70,297</p></td>
<td><p>70,509</p></td>
<td><p>0.30%</p></td>
<td><p>70,295</p></td>
<td><p>70,508</p></td>
<td><p>0.30%</p></td>
<td><p>70,105</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>77.10</p></td>
<td><p>1M</p></td>
<td><p>37,986</p></td>
<td><p>38,158</p></td>
<td><p>0.45%</p></td>
<td><p>37,984</p></td>
<td><p>38,156</p></td>
<td><p>0.45%</p></td>
<td><p>37,824</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>83.40</p></td>
<td><p>2M</p></td>
<td><p>50,793</p></td>
<td><p>51,006</p></td>
<td><p>0.42%</p></td>
<td><p>50,791</p></td>
<td><p>51,005</p></td>
<td><p>0.42%</p></td>
<td><p>50,658</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>81.42</p></td>
<td><p>2M</p></td>
<td><p>97,224</p></td>
<td><p>97,508</p></td>
<td><p>0.29%</p></td>
<td><p>97,221</p></td>
<td><p>97,505</p></td>
<td><p>0.29%</p></td>
<td><p>96,969</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>79.53</p></td>
<td><p>2M</p></td>
<td><p>128,380</p></td>
<td><p>128,627</p></td>
<td><p>0.19%</p></td>
<td><p>128,380</p></td>
<td><p>128,627</p></td>
<td><p>0.19%</p></td>
<td><p>128,383</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>77.72</p></td>
<td><p>2M</p></td>
<td><p>96,664</p></td>
<td><p>96,940</p></td>
<td><p>0.28%</p></td>
<td><p>96,662</p></td>
<td><p>96,937</p></td>
<td><p>0.28%</p></td>
<td><p>96,397</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>76.00</p></td>
<td><p>2M</p></td>
<td><p>50,794</p></td>
<td><p>51,010</p></td>
<td><p>0.42%</p></td>
<td><p>50,792</p></td>
<td><p>51,008</p></td>
<td><p>0.42%</p></td>
<td><p>50,626</p></td>
</tr>
</tbody>
</table>
</div>
<p>Near Rega and Sega risks represent the sensitivities with respect to near delta risk reversals and strangles respectively. We recall that near delta is set to 0.25 in our FX vol surfaces. Hence we expect the risks to be quite small for 10 delta and at the money call and put options as most of the exposure will be for 25 call/put vanillas.
We calculate the difference as a percentage of the notional <span class="math notranslate nohighlight">\(^4\)</span> for near rega/sega risks between LSV Markov Switching and analytic. We report as well the average error across different instruments calculated as follows:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[avg\_error = \sqrt{\frac{1}{N}\sum_{i=1}^{N}(Err_i^{LSVMS-Ana})^2}\]</div>
</div>
<p>With <span class="math notranslate nohighlight">\(N\)</span> being the number of instruments we calculate the risk for, <span class="math notranslate nohighlight">\(Err_i^{LSVMS-Ana}\)</span> the error of each instrument <span class="math notranslate nohighlight">\(i\)</span>.</p>
</section>
<section id="diff-as-ntl">
<h3><span class="section-number">1.6.1.5.8.38. </span>Diff as % ntl<a class="headerlink" href="#diff-as-ntl" title="Link to this heading">#</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>OptionType</p></th>
<th class="head"><p>strike</p></th>
<th class="head"><p>expiry</p></th>
<th class="head"><p>Model risk</p></th>
<th class="head"><p>Analytic risk</p></th>
<th class="head"><p>Diff as % ntl</p></th>
<th class="head"><p>Model risk</p></th>
<th class="head"><p>Analytic risk</p></th>
<th class="head"><p>Diff as % ntl</p></th>
<th class="head"><p>Model risk</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>80.87</p></td>
<td><p>1W</p></td>
<td><p>778</p></td>
<td><p>-183</p></td>
<td><p>0.00%</p></td>
<td><p>-1,744</p></td>
<td><p>-1,782</p></td>
<td><p>0.00%</p></td>
<td><p>-6,711</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>80.22</p></td>
<td><p>1W</p></td>
<td><p>32,145</p></td>
<td><p>32,502</p></td>
<td><p>0.00%</p></td>
<td><p>31,405</p></td>
<td><p>31,896</p></td>
<td><p>0.00%</p></td>
<td><p>28,843</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>79.59</p></td>
<td><p>1W</p></td>
<td><p>-844</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>-328</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>-684</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>79.00</p></td>
<td><p>1W</p></td>
<td><p>33,281</p></td>
<td><p>33,683</p></td>
<td><p>0.00%</p></td>
<td><p>32,399</p></td>
<td><p>32,980</p></td>
<td><p>0.00%</p></td>
<td><p>29,440</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>78.43</p></td>
<td><p>1W</p></td>
<td><p>417</p></td>
<td><p>-241</p></td>
<td><p>0.00%</p></td>
<td><p>-2,272</p></td>
<td><p>-2,216</p></td>
<td><p>0.00%</p></td>
<td><p>-7,404</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>82.23</p></td>
<td><p>1M</p></td>
<td><p>-3,905</p></td>
<td><p>-434</p></td>
<td><p>0.00%</p></td>
<td><p>-5,708</p></td>
<td><p>-4,352</p></td>
<td><p>0.00%</p></td>
<td><p>-16,330</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>80.89</p></td>
<td><p>1M</p></td>
<td><p>66,657</p></td>
<td><p>70,050</p></td>
<td><p>0.00%</p></td>
<td><p>66,907</p></td>
<td><p>68,682</p></td>
<td><p>0.00%</p></td>
<td><p>61,832</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>79.56</p></td>
<td><p>1M</p></td>
<td><p>-2,502</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>-1,464</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>-1,968</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>78.29</p></td>
<td><p>1M</p></td>
<td><p>66,678</p></td>
<td><p>70,327</p></td>
<td><p>0.00%</p></td>
<td><p>66,799</p></td>
<td><p>68,870</p></td>
<td><p>0.00%</p></td>
<td><p>61,316</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>77.10</p></td>
<td><p>1M</p></td>
<td><p>-4,192</p></td>
<td><p>-499</p></td>
<td><p>0.00%</p></td>
<td><p>-6,673</p></td>
<td><p>-4,839</p></td>
<td><p>0.00%</p></td>
<td><p>-17,578</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>83.40</p></td>
<td><p>2M</p></td>
<td><p>-440</p></td>
<td><p>-564</p></td>
<td><p>0.00%</p></td>
<td><p>-6,526</p></td>
<td><p>-5,372</p></td>
<td><p>0.00%</p></td>
<td><p>-20,982</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>81.42</p></td>
<td><p>2M</p></td>
<td><p>95,973</p></td>
<td><p>97,292</p></td>
<td><p>0.00%</p></td>
<td><p>93,282</p></td>
<td><p>95,512</p></td>
<td><p>0.00%</p></td>
<td><p>85,397</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>79.53</p></td>
<td><p>2M</p></td>
<td><p>-1,432</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>-1,668</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>-3,102</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>77.72</p></td>
<td><p>2M</p></td>
<td><p>95,060</p></td>
<td><p>96,712</p></td>
<td><p>0.00%</p></td>
<td><p>92,135</p></td>
<td><p>94,837</p></td>
<td><p>0.00%</p></td>
<td><p>83,797</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>76.00</p></td>
<td><p>2M</p></td>
<td><p>-1,114</p></td>
<td><p>-627</p></td>
<td><p>0.00%</p></td>
<td><p>-7,778</p></td>
<td><p>-5,854</p></td>
<td><p>0.00%</p></td>
<td><p>-22,634</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>84.60</p></td>
<td><p>3M</p></td>
<td><p>2,295</p></td>
<td><p>-591</p></td>
<td><p>0.00%</p></td>
<td><p>-7,406</p></td>
<td><p>-5,480</p></td>
<td><p>0.00%</p></td>
<td><p>-24,893</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>81.94</p></td>
<td><p>3M</p></td>
<td><p>121,233</p></td>
<td><p>120,135</p></td>
<td><p>0.00%</p></td>
<td><p>114,448</p></td>
<td><p>118,118</p></td>
<td><p>0.00%</p></td>
<td><p>103,337</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>79.49</p></td>
<td><p>3M</p></td>
<td><p>1,285</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>-2,328</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>-5,422</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>77.16</p></td>
<td><p>3M</p></td>
<td><p>118,606</p></td>
<td><p>117,935</p></td>
<td><p>0.00%</p></td>
<td><p>111,694</p></td>
<td><p>115,863</p></td>
<td><p>-0.01%</p></td>
<td><p>100,217</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>74.87</p></td>
<td><p>3M</p></td>
<td><p>1,437</p></td>
<td><p>-633</p></td>
<td><p>0.00%</p></td>
<td><p>-8,398</p></td>
<td><p>-5,809</p></td>
<td><p>0.00%</p></td>
<td><p>-26,259</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>87.62</p></td>
<td><p>6M</p></td>
<td><p>-1,663</p></td>
<td><p>-653</p></td>
<td><p>0.00%</p></td>
<td><p>-15,177</p></td>
<td><p>-6,069</p></td>
<td><p>-0.01%</p></td>
<td><p>-33,519</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>83.20</p></td>
<td><p>6M</p></td>
<td><p>165,968</p></td>
<td><p>169,499</p></td>
<td><p>0.00%</p></td>
<td><p>154,660</p></td>
<td><p>166,961</p></td>
<td><p>-0.01%</p></td>
<td><p>143,009</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>79.37</p></td>
<td><p>6M</p></td>
<td><p>-1,386</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>-8,765</p></td>
<td><p>0</p></td>
<td><p>-0.01%</p></td>
<td><p>-11,189</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>75.74</p></td>
<td><p>6M</p></td>
<td><p>157,910</p></td>
<td><p>162,057</p></td>
<td><p>-0.01%</p></td>
<td><p>147,217</p></td>
<td><p>159,566</p></td>
<td><p>-0.02%</p></td>
<td><p>135,117</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>72.10</p></td>
<td><p>6M</p></td>
<td><p>-2,458</p></td>
<td><p>-668</p></td>
<td><p>0.00%</p></td>
<td><p>-14,912</p></td>
<td><p>-6,191</p></td>
<td><p>-0.01%</p></td>
<td><p>-34,289</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>92.86</p></td>
<td><p>1Y</p></td>
<td><p>-6,985</p></td>
<td><p>-705</p></td>
<td><p>-0.01%</p></td>
<td><p>-8,944</p></td>
<td><p>-6,606</p></td>
<td><p>0.00%</p></td>
<td><p>-34,940</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>85.22</p></td>
<td><p>1Y</p></td>
<td><p>330,872</p></td>
<td><p>347,656</p></td>
<td><p>-0.01%</p></td>
<td><p>322,249</p></td>
<td><p>341,853</p></td>
<td><p>-0.01%</p></td>
<td><p>313,618</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>78.19</p></td>
<td><p>2Y</p></td>
<td><p>-5,371</p></td>
<td><p>0</p></td>
<td><p>-0.01%</p></td>
<td><p>-2,017</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>-9,240</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>69.53</p></td>
<td><p>2Y</p></td>
<td><p>292,849</p></td>
<td><p>303,898</p></td>
<td><p>-0.02%</p></td>
<td><p>292,380</p></td>
<td><p>300,308</p></td>
<td><p>-0.01%</p></td>
<td><p>270,523</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>61.34</p></td>
<td><p>2Y</p></td>
<td><p>-4,940</p></td>
<td><p>-904</p></td>
<td><p>-0.01%</p></td>
<td><p>-9,812</p></td>
<td><p>-8,516</p></td>
<td><p>0.00%</p></td>
<td><p>-40,724</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>avg_error</p></td>
<td><p>0.0062%</p></td>
<td><p></p></td>
<td><p>avg_error</p></td>
<td><p>0.0065%</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
<p>Figure 8.46: Near Sega risk for vanilla options in LSV Markov switching compared to Analytic risk for different bump sizes</p>
</section>
<section id="bumpsize0-0001-bumpsize0-001-bumpsize0-05">
<h3><span class="section-number">1.6.1.5.8.39. </span>BumpSize0.0001, BumpSize0.001, BumpSize0.05<a class="headerlink" href="#bumpsize0-0001-bumpsize0-001-bumpsize0-05" title="Link to this heading">#</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>OptionType</p></th>
<th class="head"><p>strike</p></th>
<th class="head"><p>expiry</p></th>
<th class="head"><p>Model risk</p></th>
<th class="head"><p>Analytic risk</p></th>
<th class="head"><p>Diff as % ntl</p></th>
<th class="head"><p>Model risk</p></th>
<th class="head"><p>Analytic risk</p></th>
<th class="head"><p>Diff as % ntl</p></th>
<th class="head"><p>Model risk</p></th>
<th class="head"><p>Analytic risk</p></th>
<th class="head"><p>Diff as % ntl</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>80.87</p></td>
<td><p>1W</p></td>
<td><p>2,551</p></td>
<td><p>-92</p></td>
<td><p>0.00%</p></td>
<td><p>-1,161</p></td>
<td><p>-891</p></td>
<td><p>0.00%</p></td>
<td><p>-3,670</p></td>
<td><p>-3,517</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>80.22</p></td>
<td><p>1W</p></td>
<td><p>17,652</p></td>
<td><p>16,251</p></td>
<td><p>0.00%</p></td>
<td><p>15,699</p></td>
<td><p>15,948</p></td>
<td><p>0.00%</p></td>
<td><p>13,892</p></td>
<td><p>14,106</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>79.59</p></td>
<td><p>1W</p></td>
<td><p>341</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>-61</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>39</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>79.00</p></td>
<td><p>1W</p></td>
<td><p>-15,239</p></td>
<td><p>-16,841</p></td>
<td><p>0.00%</p></td>
<td><p>-16,588</p></td>
<td><p>-16,490</p></td>
<td><p>0.00%</p></td>
<td><p>-14,027</p></td>
<td><p>-14,348</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>78.43</p></td>
<td><p>1W</p></td>
<td><p>2,808</p></td>
<td><p>121</p></td>
<td><p>0.00%</p></td>
<td><p>876</p></td>
<td><p>1,108</p></td>
<td><p>0.00%</p></td>
<td><p>3,786</p></td>
<td><p>3,586</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>82.23</p></td>
<td><p>1M</p></td>
<td><p>3,093</p></td>
<td><p>-217</p></td>
<td><p>0.00%</p></td>
<td><p>-2,334</p></td>
<td><p>-2,176</p></td>
<td><p>0.00%</p></td>
<td><p>-7,714</p></td>
<td><p>-7,257</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>80.89</p></td>
<td><p>1M</p></td>
<td><p>37,444</p></td>
<td><p>35,025</p></td>
<td><p>0.00%</p></td>
<td><p>34,221</p></td>
<td><p>34,341</p></td>
<td><p>0.00%</p></td>
<td><p>29,903</p></td>
<td><p>30,316</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>79.56</p></td>
<td><p>1M</p></td>
<td><p>1,384</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>132</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>194</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>78.29</p></td>
<td><p>1M</p></td>
<td><p>-32,307</p></td>
<td><p>-35,164</p></td>
<td><p>0.00%</p></td>
<td><p>-34,107</p></td>
<td><p>-34,435</p></td>
<td><p>0.00%</p></td>
<td><p>-29,210</p></td>
<td><p>-30,142</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>77.10</p></td>
<td><p>1M</p></td>
<td><p>3,918</p></td>
<td><p>249</p></td>
<td><p>0.00%</p></td>
<td><p>2,843</p></td>
<td><p>2,420</p></td>
<td><p>0.00%</p></td>
<td><p>8,331</p></td>
<td><p>7,320</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>83.40</p></td>
<td><p>2M</p></td>
<td><p>5,647</p></td>
<td><p>-282</p></td>
<td><p>-0.01%</p></td>
<td><p>-2,441</p></td>
<td><p>-2,686</p></td>
<td><p>0.00%</p></td>
<td><p>-10,726</p></td>
<td><p>-9,979</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>81.42</p></td>
<td><p>2M</p></td>
<td><p>53,744</p></td>
<td><p>48,646</p></td>
<td><p>-0.01%</p></td>
<td><p>46,029</p></td>
<td><p>47,756</p></td>
<td><p>0.00%</p></td>
<td><p>41,616</p></td>
<td><p>42,207</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>79.53</p></td>
<td><p>2M</p></td>
<td><p>3,545</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>517</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>294</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>77.72</p></td>
<td><p>2M</p></td>
<td><p>-42,839</p></td>
<td><p>-48,356</p></td>
<td><p>-0.01%</p></td>
<td><p>-46,376</p></td>
<td><p>-47,419</p></td>
<td><p>0.00%</p></td>
<td><p>-40,292</p></td>
<td><p>-41,587</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>76.00</p></td>
<td><p>2M</p></td>
<td><p>6,232</p></td>
<td><p>314</p></td>
<td><p>-0.01%</p></td>
<td><p>4,105</p></td>
<td><p>2,927</p></td>
<td><p>0.00%</p></td>
<td><p>11,531</p></td>
<td><p>10,115</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>84.60</p></td>
<td><p>3M</p></td>
<td><p>-6,921</p></td>
<td><p>-296</p></td>
<td><p>0.01%</p></td>
<td><p>-2,529</p></td>
<td><p>-2,740</p></td>
<td><p>0.00%</p></td>
<td><p>-12,513</p></td>
<td><p>-11,413</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>81.94</p></td>
<td><p>3M</p></td>
<td><p>54,552</p></td>
<td><p>60,068</p></td>
<td><p>0.01%</p></td>
<td><p>59,354</p></td>
<td><p>59,059</p></td>
<td><p>0.00%</p></td>
<td><p>51,571</p></td>
<td><p>52,342</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>79.49</p></td>
<td><p>3M</p></td>
<td><p>-2,907</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>711</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>335</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>77.16</p></td>
<td><p>3M</p></td>
<td><p>-63,365</p></td>
<td><p>-58,968</p></td>
<td><p>0.01%</p></td>
<td><p>-56,444</p></td>
<td><p>-57,932</p></td>
<td><p>0.00%</p></td>
<td><p>-49,610</p></td>
<td><p>-51,049</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>74.87</p></td>
<td><p>3M</p></td>
<td><p>-4,536</p></td>
<td><p>317</p></td>
<td><p>0.01%</p></td>
<td><p>4,482</p></td>
<td><p>2,904</p></td>
<td><p>0.00%</p></td>
<td><p>13,027</p></td>
<td><p>11,472</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>87.62</p></td>
<td><p>6M</p></td>
<td><p>-4,598</p></td>
<td><p>-327</p></td>
<td><p>0.00%</p></td>
<td><p>-3,398</p></td>
<td><p>-3,034</p></td>
<td><p>0.00%</p></td>
<td><p>-16,638</p></td>
<td><p>-14,813</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>83.20</p></td>
<td><p>6M</p></td>
<td><p>81,160</p></td>
<td><p>84,749</p></td>
<td><p>0.00%</p></td>
<td><p>83,391</p></td>
<td><p>83,481</p></td>
<td><p>0.00%</p></td>
<td><p>73,618</p></td>
<td><p>74,574</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>79.37</p></td>
<td><p>6M</p></td>
<td><p>-1,446</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>935</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>785</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>75.74</p></td>
<td><p>6M</p></td>
<td><p>-82,759</p></td>
<td><p>-81,028</p></td>
<td><p>0.00%</p></td>
<td><p>-77,818</p></td>
<td><p>-79,783</p></td>
<td><p>0.00%</p></td>
<td><p>-68,571</p></td>
<td><p>-71,053</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>72.10</p></td>
<td><p>6M</p></td>
<td><p>-1,637</p></td>
<td><p>334</p></td>
<td><p>0.00%</p></td>
<td><p>4,995</p></td>
<td><p>3,096</p></td>
<td><p>0.00%</p></td>
<td><p>17,626</p></td>
<td><p>14,675</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>92.86</p></td>
<td><p>1Y</p></td>
<td><p>36</p></td>
<td><p>-353</p></td>
<td><p>0.00%</p></td>
<td><p>-1,849</p></td>
<td><p>-3,303</p></td>
<td><p>0.00%</p></td>
<td><p>-20,417</p></td>
<td><p>-18,242</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>85.22</p></td>
<td><p>1Y</p></td>
<td><p>119,960</p></td>
<td><p>119,809</p></td>
<td><p>0.00%</p></td>
<td><p>119,544</p></td>
<td><p>118,255</p></td>
<td><p>0.00%</p></td>
<td><p>105,311</p></td>
<td><p>106,767</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>79.05</p></td>
<td><p>1Y</p></td>
<td><p>921</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>2,028</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>560</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>73.33</p></td>
<td><p>1Y</p></td>
<td><p>-108,526</p></td>
<td><p>-110,405</p></td>
<td><p>0.00%</p></td>
<td><p>-105,799</p></td>
<td><p>-108,949</p></td>
<td><p>0.00%</p></td>
<td><p>-95,940</p></td>
<td><p>-98,201</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>67.60</p></td>
<td><p>1Y</p></td>
<td><p>1,873</p></td>
<td><p>351</p></td>
<td><p>0.00%</p></td>
<td><p>5,846</p></td>
<td><p>3,290</p></td>
<td><p>0.00%</p></td>
<td><p>20,313</p></td>
<td><p>17,902</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>100.49</p></td>
<td><p>2Y</p></td>
<td><p>-543</p></td>
<td><p>-483</p></td>
<td><p>0.00%</p></td>
<td><p>-3,434</p></td>
<td><p>-4,534</p></td>
<td><p>0.00%</p></td>
<td><p>-27,284</p></td>
<td><p>-25,868</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>CALL</p></td>
<td><p>87.93</p></td>
<td><p>2Y</p></td>
<td><p>172,960</p></td>
<td><p>173,515</p></td>
<td><p>0.00%</p></td>
<td><p>172,170</p></td>
<td><p>171,455</p></td>
<td><p>0.00%</p></td>
<td><p>154,666</p></td>
<td><p>155,918</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>CALL</p></td>
<td><p>78.19</p></td>
<td><p>2Y</p></td>
<td><p>890</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>2,123</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
<td><p>1,271</p></td>
<td><p>0</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>69.53</p></td>
<td><p>2Y</p></td>
<td><p>-150,333</p></td>
<td><p>-151,949</p></td>
<td><p>0.00%</p></td>
<td><p>-147,198</p></td>
<td><p>-150,154</p></td>
<td><p>0.00%</p></td>
<td><p>-133,307</p></td>
<td><p>-136,584</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-even"><td><p>PUT</p></td>
<td><p>61.34</p></td>
<td><p>2Y</p></td>
<td><p>1,349</p></td>
<td><p>452</p></td>
<td><p>0.00%</p></td>
<td><p>6,196</p></td>
<td><p>4,258</p></td>
<td><p>0.00%</p></td>
<td><p>26,424</p></td>
<td><p>23,725</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>avg_error</p></td>
<td><p>0.0041%</p></td>
<td><p></p></td>
<td><p>avg_error</p></td>
<td><p>0.0018%</p></td>
<td><p></p></td>
<td><p>avg_error</p></td>
<td><p>0.0020%</p></td>
</tr>
</tbody>
</table>
</div>
<p>Figure 8.47: Near Rega risk for vanilla options in LSV Markov switching compared to Analytic risk for different bump sizes</p>
</section>
<section id="comparison-to-other-models">
<h3><span class="section-number">1.6.1.5.8.40. </span>8.6. Comparison to Other Models<a class="headerlink" href="#comparison-to-other-models" title="Link to this heading">#</a></h3>
</section>
<section id="exotic-prices">
<h3><span class="section-number">1.6.1.5.8.41. </span>8.6.1. Exotic prices<a class="headerlink" href="#exotic-prices" title="Link to this heading">#</a></h3>
<p>QA testing shows that we can match DNT prices for different strikes and maturities given by LSV Hybrid which is the model currently used by the desk for pricing.
We calibrate the vol of vol so that we match a liquid DNT at the relevant maturity. Then the transition q parameter is adjusted such that we get a good fit to DNTs with other barrier levels at the same maturity.
For example, we give in 8.51 and 8.52 DNT Valuations for GBPUSD currency pair under :</p>
<ul class="simple">
<li><p>Local Volatility (LV)</p></li>
<li><p>LSV Hybrid</p></li>
<li><p>LSV Markov Switching (LSV MS)</p></li>
</ul>
<p>The DNTs which are liquid on the market are the ones with low TV typically less than 10-15%.
TV stands for “Theoretical Value” and represents the value under the Black Scholes model assumptions using the implied volatility for at-the-money vanilla options. It is quoted as a percentage of the notional.</p>
<p>From above, we can see that :</p>
<ul class="simple">
<li><p>We get a good agreement between LSV Markov switching delta and vega greeks compared to the analytic risk. The relative error stays below 1%.</p></li>
<li><p>Gamma is sensitive to the bump size. The accuracy increases with bigger bump sizes. 1% relative bump size seems to be appropriate.</p></li>
<li><p>Delta and Vega are stable across different bump sizes.</p></li>
<li><p>The average error increases for Near Sega risk when bump size increases. A value of 1 basis point for Near sega additive bump size is appropriate.</p></li>
<li><p>Near Rega can have a larger overall error when the bump size is too small (e.g. 1 apsis point). 10 basis point as an additive bump size is more suitable.</p></li>
</ul>
</section>
<section id="risk-spot-scenarios">
<h3><span class="section-number">1.6.1.5.8.42. </span>Risk Spot Scenarios<a class="headerlink" href="#risk-spot-scenarios" title="Link to this heading">#</a></h3>
<p>We take one of the trades in the short dated book. The trade ID is 28676171.
The trade is an upper EURUSD one touch barrier at 1.385 <span class="math notranslate nohighlight">\(^5\)</span> on -2,000,000 notional, expiring on 18th June 2013.</p>
<p>The market data was loaded with valuation date 22 June 2012. Initial spot is 1.2539. The risk runs have been done in BARX Risk using the default QAVersion 219900.</p>
<p>The following plots, in figures 8.48-8.49, show a spot scenario with the EURUSD spot being moved between -20% and +20% relative shift for the following metrics:</p>
<ul class="simple">
<li><p>PV <span class="math notranslate nohighlight">\(^6\)</span></p></li>
<li><p>Delta</p></li>
<li><p>Gamma</p></li>
<li><p>FX Vega</p></li>
</ul>
<p><img alt="PV Spot Ladder" src="market/LSV/LSV Markov Switching  PDE/Fig/1.png" /></p>
<p>Figure 8.48: 1Y one touch EURUSD PV and FX delta spot scenario.</p>
<p><img alt="FX Gamma spot ladder" src="market/LSV/LSV Markov Switching  PDE/Fig/2.png" /></p>
<p><img alt="FX Vega spot ladder" src="market/LSV/LSV Markov Switching  PDE/Fig/3.png" /></p>
<p>Figure 8.49: 1Y one touch EURUSD FX gamma and vega spot scenario.</p>
<p>The plots for LSV markov switching and Local vol are smooth indicating that the risk is stable with respect to changes in spot.</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Exotic Type</p></th>
<th class="head"><p>Maturity</p></th>
<th class="head"><p>barrier1</p></th>
<th class="head"><p>barrier2</p></th>
<th class="head"><p>Strike</p></th>
<th class="head"><p>TV</p></th>
<th class="head"><p>LV</p></th>
<th class="head"><p>LSVMS - ZeroVoV</p></th>
<th class="head"><p>LSVMS</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DNT</p></td>
<td><p>1M</p></td>
<td><p>1.2</p></td>
<td><p>1.25</p></td>
<td><p></p></td>
<td><p>5.726%</p></td>
<td><p>4.528%</p></td>
<td><p>4.535%</p></td>
<td><p>7.366%</p></td>
</tr>
<tr class="row-odd"><td><p>DNT</p></td>
<td><p>1M</p></td>
<td><p>1.21</p></td>
<td><p>1.25</p></td>
<td><p></p></td>
<td><p>1.453%</p></td>
<td><p>1.263%</p></td>
<td><p>1.268%</p></td>
<td><p>3.206%</p></td>
</tr>
<tr class="row-even"><td><p>DNT</p></td>
<td><p>1M</p></td>
<td><p>1.21</p></td>
<td><p>1.27</p></td>
<td><p></p></td>
<td><p>18.730%</p></td>
<td><p>20.063%</p></td>
<td><p>20.072%</p></td>
<td><p>24.642%</p></td>
</tr>
<tr class="row-odd"><td><p>DNT</p></td>
<td><p>6M</p></td>
<td><p>1.18</p></td>
<td><p>1.28</p></td>
<td><p></p></td>
<td><p>1.107%</p></td>
<td><p>1.051%</p></td>
<td><p>1.052%</p></td>
<td><p>4.118%</p></td>
</tr>
<tr class="row-even"><td><p>DNT</p></td>
<td><p>6M</p></td>
<td><p>1.17</p></td>
<td><p>1.30</p></td>
<td><p></p></td>
<td><p>7.652%</p></td>
<td><p>8.129%</p></td>
<td><p>8.130%</p></td>
<td><p>13.663%</p></td>
</tr>
<tr class="row-odd"><td><p>DNT</p></td>
<td><p>6M</p></td>
<td><p>1.15</p></td>
<td><p>1.30</p></td>
<td><p></p></td>
<td><p>15.077%</p></td>
<td><p>13.802%</p></td>
<td><p>13.803%</p></td>
<td><p>19.542%</p></td>
</tr>
<tr class="row-even"><td><p>DNT</p></td>
<td><p>1Y</p></td>
<td><p>1.15</p></td>
<td><p>1.30</p></td>
<td><p></p></td>
<td><p>1.096%</p></td>
<td><p>0.919%</p></td>
<td><p>0.920%</p></td>
<td><p>4.267%</p></td>
</tr>
<tr class="row-odd"><td><p>DNT</p></td>
<td><p>1Y</p></td>
<td><p>1.11</p></td>
<td><p>1.35</p></td>
<td><p></p></td>
<td><p>19.558%</p></td>
<td><p>19.176%</p></td>
<td><p>19.179%</p></td>
<td><p>25.624%</p></td>
</tr>
<tr class="row-even"><td><p>DNT</p></td>
<td><p>1Y</p></td>
<td><p>1.11</p></td>
<td><p>1.32</p></td>
<td><p></p></td>
<td><p>10.872%</p></td>
<td><p>8.788%</p></td>
<td><p>8.791%</p></td>
<td><p>14.910%</p></td>
</tr>
<tr class="row-odd"><td><p>KI</p></td>
<td><p>1Y</p></td>
<td><p></p></td>
<td><p>1.3</p></td>
<td><p>1.26</p></td>
<td><p>4.179%</p></td>
<td><p>4.141%</p></td>
<td><p>4.140%</p></td>
<td><p>4.131%</p></td>
</tr>
<tr class="row-even"><td><p>KI</p></td>
<td><p>1Y</p></td>
<td><p></p></td>
<td><p>1.60</p></td>
<td><p>1.26</p></td>
<td><p>0.839%</p></td>
<td><p>0.680%</p></td>
<td><p>0.681%</p></td>
<td><p>0.658%</p></td>
</tr>
<tr class="row-odd"><td><p>KI</p></td>
<td><p>6M</p></td>
<td><p></p></td>
<td><p>1.35</p></td>
<td><p>1.23</p></td>
<td><p>2.690%</p></td>
<td><p>2.339%</p></td>
<td><p>2.339%</p></td>
<td><p>2.244%</p></td>
</tr>
<tr class="row-even"><td><p>KI</p></td>
<td><p>1M</p></td>
<td><p></p></td>
<td><p>1.30</p></td>
<td><p>1.23</p></td>
<td><p>0.579%</p></td>
<td><p>0.516%</p></td>
<td><p>0.516%</p></td>
<td><p>0.483%</p></td>
</tr>
<tr class="row-odd"><td><p>KO</p></td>
<td><p>1M</p></td>
<td><p>1.18</p></td>
<td><p></p></td>
<td><p>1.23</p></td>
<td><p>1.565%</p></td>
<td><p>1.584%</p></td>
<td><p>1.584%</p></td>
<td><p>1.572%</p></td>
</tr>
<tr class="row-even"><td><p>KO</p></td>
<td><p>1M</p></td>
<td><p>1.17</p></td>
<td><p></p></td>
<td><p>1.239</p></td>
<td><p>1.171%</p></td>
<td><p>1.171%</p></td>
<td><p>1.171%</p></td>
<td><p>1.165%</p></td>
</tr>
<tr class="row-odd"><td><p>KO</p></td>
<td><p>6M</p></td>
<td><p>1.17</p></td>
<td><p></p></td>
<td><p>1.25</p></td>
<td><p>2.763%</p></td>
<td><p>2.648%</p></td>
<td><p>2.648%</p></td>
<td><p>2.570%</p></td>
</tr>
<tr class="row-even"><td><p>KO</p></td>
<td><p>1Y</p></td>
<td><p>1.13</p></td>
<td><p></p></td>
<td><p>1.25</p></td>
<td><p>4.138%</p></td>
<td><p>3.942%</p></td>
<td><p>3.942%</p></td>
<td><p>3.817%</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="maturity-barrier1-barrier2-tv-lv-lsv-hybrid-lsv-ms">
<h3><span class="section-number">1.6.1.5.8.43. </span>Maturity barrier1 barrier2 TV LV LSV Hybrid LSV MS<a class="headerlink" href="#maturity-barrier1-barrier2-tv-lv-lsv-hybrid-lsv-ms" title="Link to this heading">#</a></h3>
<p>| 1W | 1.546 | 1.57 | 5.7% | 7.2% | 9.1% | 9.1% |
| 1W | 1.546 | 1.565 | 1.3% | 1.9% | 3.0% | 3.0% |
| 1W | 1.54 | 1.565 | 9.6% | 10.7% | 12.8% | 12.8% |
| 1W | 1.54 | 1.57 | 20.5% | 22.5% | 24.4% | 24.6% |
| 1W | 1.53 | 1.57 | 45.4% | 44.8% | 46.0% | 46.4% |
| 2W | 1.546 | 1.57 | 0.3% | 0.6% | 1.4% | 1.5% |
| 2W | 1.53 | 1.57 | 16.30% | 16.7% | 19.7% | 19.9% |
| 2W | 1.53 | 1.565 | 8.10% | 7.7% | 10.4% | 10.4% |
| 2W | 1.525 | 1.565 | 13.90% | 12.5% | 15.3% | 15.4% |
| 2W | 1.52 | 1.57 | 29.70% | 28.0% | 30.6% | 30.9% |
| 2W | 1.525 | 1.565 | 12.90% | 11.6% | 14.5% | 14.4% |
| 1M | 1.525 | 1.565 | 1.30% | 1.0% | 2.4% | 2.4% |
| 1M | 1.525 | 1.57 | 3.60% | 3.5% | 5.8% | 5.8% |
| 1M | 1.525 | 1.58 | 12.10% | 13.4% | 16.4% | 16.6% |
| 1M | 1.52 | 1.57 | 6.70% | 5.9% | 8.7% | 8.6% |
| 1M | 1.51 | 1.57 | 14.10% | 11.5% | 14.7% | 14.4% |
| 1M | 1.5 | 1.57 | 21.20% | 16.9% | 20.0% | 19.7% |
| 1M | 1.497 | 1.57 | 23.00% | 18.3% | 21.4% | 21.1% |
| 3M | 1.497 | 1.565 | 0.30% | 0.1% | 0.7% | 0.8% |
| 3M | 1.497 | 1.57 | 0.70% | 0.4% | 1.5% | 1.6% |
| 3M | 1.497 | 1.58 | 2.70% | 2.0% | 4.6% | 4.6% |
| 3M | 1.497 | 1.6 | 11.00% | 11.6% | 16.1% | 15.8% |
| 3M | 1.497 | 1.62 | 22.50% | 25.7% | 29.8% | 29.7% |
| 3M | 1.497 | 1.57 | 3.40% | 1.6% | 3.6% | 3.6% |
| 3M | 1.468 | 1.57 | 5.70% | 2.8% | 5.1% | 5.0% |
| 3M | 1.455 | 1.57 | 8.70% | 4.3% | 6.8% | 6.7% |
| 3M | 1.42 | 1.57 | 14.70% | 8.4% | 10.7% | 10.7% |
| 3M | 1.41 | 1.57 | 15.70% | 9.3% | 11.5% | 11.6% |
| 3M | 1.36 | 1.57 | 18.10% | 12.6% | 14.4% | 14.5% |
| 3M | 1.36 | 1.59 | 37.90% | 32.6% | 34.9% | 34.9% |
| 6M | 1.36 | 1.59 | 20.90% | 12.9% | 16.6% | 16.6% |
| 6M | 1.42 | 1.61 | 20.80% | 16.0% | 21.1% | 21.0% |
| 6M | 1.45 | 1.61 | 11.80% | 10.0% | 15.2% | 15.1% |
| 6M | 1.48 | 1.61 | 3.80% | 4.10% | 8.6% | 8.6% |
| 6M | 1.497 | 1.61 | 1.30% | 1.9% | 5.3% | 5.4% |
| 6M | 1.48 | 1.596 | 1.60% | 1.4% | 4.4% | 4.6% |
| 6M | 1.48 | 1.65 | 16.10% | 20.3% | 25.7% | 25.7% |
| 6M | 1.497 | 1.668 | 14.10% | 19.8% | 24.8% | 24.8% |</p>
<p>Figure 8.51: Double no touch trades on GBPUSD on different models. Market data as of 13th June 2012. Spot Reference 1.5527.</p>
</section>
<section id="id24">
<h3><span class="section-number">1.6.1.5.8.44. </span>Maturity barrier1 barrier2 TV LV LSV Hybrid LSV MS<a class="headerlink" href="#id24" title="Link to this heading">#</a></h3>
<p>| 1Y | 1.438 | 1.668 | 10.50% | 12.4% | 17.6% | 17.7% |
| 1Y | 1.438 | 1.686 | 14.50% | 17.8% | 22.9% | 23.0% |
| 1Y | 1.438 | 1.695 | 16.60% | 20.5% | 25.5% | 25.6% |
| 1Y | 1.438 | 1.72 | 22.40% | 27.6% | 32.1% | 32.2% |
| 1Y | 1.35 | 1.72 | 47.80% | 47.4% | 50.7% | 50.4% |
| 1Y | 1.35 | 1.686 | 37.80% | 35.4% | 39.7% | 39.3% |
| 1Y | 1.39 | 1.686 | 28.10% | 28.3% | 33.1% | 32.9% |
| 1Y | 1.41 | 1.686 | 22.50% | 24.2% | 29.1% | 29.1% |
| 1Y | 1.449 | 1.686 | 11.50% | 15.2% | 20.3% | 20.4% |
| 1Y | 1.46 | 1.71 | 13.40% | 18.7% | 23.5% | 23.7% |
| 2Y | 1.46 | 1.71 | 1.00% | 2.1% | 4.5% | 5.0% |
| 2Y | 1.41 | 1.71 | 5.00% | 6.5% | 10.3% | 10.7% |
| 2Y | 1.39 | 1.71 | 7.60% | 8.8% | 13.0% | 13.1% |
| 2Y | 1.31 | 1.71 | 20.80% | 18.4% | 23.1% | 22.5% |
| 2Y | 1.29 | 1.71 | 24.00% | 20.6% | 25.3% | 24.6% |
| 2Y | 1.29 | 1.73 | 28.20% | 25.7% | 30.2% | 29.5% |
| 2Y | 1.36 | 1.73 | 15.60% | 16.6% | 21.1% | 20.9% |
| 2Y | 1.36 | 1.75 | 18.90% | 20.9% | 25.2% | 25.1% |
| 2Y | 1.36 | 1.794 | 26.30% | 30.1% | 33.7% | 33.7% |
| 2Y | 1.31 | 1.794 | 36.80% | 38.2% | 41.6% | 41.2% |
| 3Y | 1.31 | 1.749 | 11.90% | 11.5% | 14.2% | 14.2% |
| 3Y | 1.31 | 1.794 | 17.50% | 18.5% | 20.9% | 21.0% |
| 3Y | 1.35 | 1.794 | 11.50% | 13.6% | 15.9% | 16.3% |
| 3Y | 1.31 | 1.72 | 8.50% | 7.5% | 10.1% | 10.1% |
| 3Y | 1.31 | 1.7 | 6.40% | 5.2% | 7.6% | 7.5% |
| 3Y | 1.29 | 1.72 | 10.80% | 9.1% | 11.9% | 11.7% |
| 3Y | 1.29 | 1.7 | 8.40% | 6.5% | 9.1% | 8.9% |
| 5Y | 1.29 | 1.794 | 3.10% | 3.2% | 5.9% | 6.0% |
| 5Y | 1.29 | 1.85 | 5.80% | 6.5% | 9.8% | 9.8% |
| 5Y | 1.2 | 1.85 | 13.80% | 12.6% | 16.0% | 16.0% |
| 5Y | 1.29 | 1.7 | 0.60% | 0.4% | 1.4% | 1.5% |
| 5Y | 1.1 | 1.9 | 28.60% | 25.5% | 28.5% | 28.3% |
| 5Y | 1.2 | 1.9 | 18.10% | 17.5% | 21.0% | 20.8% |
| 5Y | 1.2 | 1.95 | 22.40% | 22.4% | 25.8% | 25.6% |
| 10Y | 1.2 | 1.95 | 2.30% | 2.5% | 5.1% | 5.1% |
| 10Y | 1.1 | 1.95 | 6.30% | 5.5% | 8.7% | 8.6% |
| 10Y | 1 | 1.95 | 11.70% | 9.4% | 12.6% | 12.5% |
| 10Y | 0.9 | 2 | 20.10% | 16.5% | 19.5% | 19.3% |</p>
<p>Figure 8.52: Continued Double no touch trades on GBPUSD on different models. Market data</p>
</section>
<section id="boundary-cases">
<h3><span class="section-number">1.6.1.5.8.45. </span>8.5. Boundary Cases<a class="headerlink" href="#boundary-cases" title="Link to this heading">#</a></h3>
<p>When setting the vol of volatility to a value close to zero, the stochasticity of the instantaneous spot volatility is reduced significantly. Therefore the model will be close to a local volatility model.</p>
<p>Please note that entering exactly the value zero will cause an error as it will make all the volatility states equal. However, the code assumes having <span class="math notranslate nohighlight">\(n\)</span> distinct volatility states when calibrating and pricing using the method of planes in PDE.
Hence to get closer to local vol, it’s recommended to set the vol of vol to be a very small non-zero value.</p>
<p>We include below Double No touch plots where we plot the difference between the model PV and the TV for different TVs (corresponding to different barrier levels). We look at other currency pairs such as USDJPY and EURUSD.</p>
<p><img alt="Double no touch plots" src="market/LSV/LSV Markov Switching  PDE/Fig/4.png" /></p>
<p>Figure 8.53: 1Y Double no touch trades on USDJPY. Market data as of 20th March 2011.</p>
<p><img alt="Double no touch plots" src="market/LSV/LSV Markov Switching  PDE/Fig/5.png" /></p>
<p>Figure 8.54: 1Y Double no touch trades on EURUSD. Market data as of 20th March 2011.</p>
<p>As the above graphs show, we can get a good agreement for double no touch prices between LSV Markov switching and LSV hybrid.</p>
<p>Another way to look at the valuation of Exotic prices under LSV Markov Switching versus LSV Hybrid is to plot a scatter of the PV difference of each model and Local Vol. We would expect a scatter around the axis <span class="math notranslate nohighlight">\(y = x\)</span> once the vol of vol is calibrated to match LSV hybrid double no touch prices.</p>
<p><img alt="Regular KOs Model PVs" src="market/LSV/LSV Markov Switching  PDE/Fig/6.png" /></p>
<p>Figure 8.55: KO trades on USDJPY across different strikes and maturities.</p>
</section>
<section id="stability">
<h3><span class="section-number">1.6.1.5.8.46. </span>8.6.2. Stability<a class="headerlink" href="#stability" title="Link to this heading">#</a></h3>
<p>As mentioned before, we use LSV Markov switching with marked stochastic volatility (SV) parameters instead of using an internal calibration to vanillas as done in LSV hybrid. This makes the actual vol of volatility parameters used in LSV Markov Switching, which impact directly exotic path dependent trade prices, completely transparent to Trading.</p>
<p>In LSV Hybrid however, they can’t be set explicitly currently and are calibrated internally to match a set of vanillas. The internal calibration algorithm in LSV Hybrid can be unstable causing a change in the SV parameters when market data hardly changes. The user can be unaware of such unexpected changes.</p>
<p>We give in the table below an example for EURUSD of the resulting calibrated SV hybrid parameters for two consecutive dates. The major and minor date are set respectively to 25 February 2013 and 22 November 2013.
The EURUSD market data for the two dates 31 May and 01 June 2012 didn’t change significantly as can be seen from the corresponding monikers:</p>
<ul class="simple">
<li><p>official&#64;20120531/volsurface.fx/ldnclose/EURUSD/longdate/cob</p></li>
<li><p>official&#64;20120601/volsurface.fx/ldnclose/EURUSD/longdate/cob</p></li>
</ul>
<p>Table 8.31: SV Hybrid calibrated parameters - EURUSD Market</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Valuation date</p></th>
<th class="head"><p>31/05/2012</p></th>
<th class="head"><p>01/06/2012</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Initial vol</p></td>
<td><p>13.87%</p></td>
<td><p>13.98%</p></td>
</tr>
<tr class="row-odd"><td><p>Reversion Level</p></td>
<td><p>14.17%</p></td>
<td><p>14.31%</p></td>
</tr>
<tr class="row-even"><td><p>Reversion Rate</p></td>
<td><p>4.68</p></td>
<td><p>3.12</p></td>
</tr>
<tr class="row-odd"><td><p>Vol of Vol</p></td>
<td><p>215.45%</p></td>
<td><p>178.56%</p></td>
</tr>
<tr class="row-even"><td><p>Correlation</p></td>
<td><p>-60.24%</p></td>
<td><p>-59.52%</p></td>
</tr>
</tbody>
</table>
</div>
<p>The other point worth highlighting when comparing LSV Markov Switching to LSV Hybrid is the bucketing of risk.
We look at one of the trades in the book which is a Down and Out EURUSD barrier call option with strike 1.4 and barrier level set at 1.15, expiring on 20 Nov 2013 on 60,000,000 USD notional.
The PV of the trade under the two models are comparable, however we focus here more on the term structure distribution of Near Sega risk. In the below table 8.32, we have the term structure Near Sega risk for LSV Hybrid as of 01 June 2012. The mixing weights are set to 0.33 whereas the minor and major dates are set to 9M and 18M respectively.</p>
<p>Table 8.32: TS Near Sega for down and out EURUSD barrier in LSV hybrid with 9M, 18M minor/major dates as of 01 June 2012</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Dates</p></th>
<th class="head"><p>Risk LSVHybrid</p></th>
<th class="head"><p>LSV MS</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Fri 08-Jun-12</p></td>
<td><p>-517</p></td>
<td><p>-1,063</p></td>
</tr>
<tr class="row-odd"><td><p>Fri 15-Jun-12</p></td>
<td><p>-476</p></td>
<td><p>-731</p></td>
</tr>
<tr class="row-even"><td><p>Fri 15-Jun-12</p></td>
<td><p>-197</p></td>
<td><p>-1,098</p></td>
</tr>
<tr class="row-odd"><td><p>Tue 03-Jul-12</p></td>
<td><p>601</p></td>
<td><p>-276</p></td>
</tr>
<tr class="row-even"><td><p>Thu 02-Aug-12</p></td>
<td><p>676</p></td>
<td><p>428</p></td>
</tr>
<tr class="row-odd"><td><p>Mon 03-Sep-12</p></td>
<td><p>-1,644</p></td>
<td><p>-632</p></td>
</tr>
<tr class="row-even"><td><p>Mon 03-Dec-12</p></td>
<td><p>-1,507</p></td>
<td><p>-606</p></td>
</tr>
<tr class="row-odd"><td><p>Fri 01-Mar-13</p></td>
<td><p>342,481</p></td>
<td><p>278</p></td>
</tr>
<tr class="row-even"><td><p>Mon 03-Jun-13</p></td>
<td><p>-50,379</p></td>
<td><p>73,756</p></td>
</tr>
<tr class="row-odd"><td><p>Tue 03-Jun-14</p></td>
<td><p>-69,137</p></td>
<td><p>61,126</p></td>
</tr>
</tbody>
</table>
</div>
<p>We observe from the above that LSV hybrid is showing an exposure on the 9M bucket. To demonstrate that the latter is an artefact of the calibration minor and major dates, we change the minor date to be 6M and then 3M and examine the risk.</p>
<p>You can see from the above that the bucketing of risk changes completely between the different settings for the minor date. This confirms that the risk bucketing in LSV hybrid is merely an artefact of the major/minor settings which can be dangerous as there isn’t a fundamental rationale underlying the choice of these settings. Not only that but even the overall exposure calculated by summing the risks over the different tenors goes from being positive to negative when changing the minor date.
In addition to that, this creates an inconsistency between different trades in the book using different minor and major dates.</p>
<p>The minor and major dates are introduced since we don’t have a full term structure supported in LSV Hybrid.
In LSV Markov switching, the term structure of stochastic volatility parameters is fully supported and the vol of vol parameters are set explicitly, making the model free from the problems outlined above for hybrid.</p>
<p>We take the market data as of 06 July 2012 with a spot reference of 1.2381. The PDE settings used are the default one in BARX Option dealer which are 300 time steps and 300 FX steps for up to 9M and 300 FX steps and 400 time steps up to 2Y.</p>
<p>We look at exotic path dependent trades and compare in 8.50 the prices from LSV Markov Switching with a vol of vol set to 0.001 to the prices from local volatility model. We add as well the price of LSV markov switching with non-zero vol of vol as a reference.</p>
</section>
<section id="performance">
<h3><span class="section-number">1.6.1.5.8.47. </span>8.6.3. Performance<a class="headerlink" href="#performance" title="Link to this heading">#</a></h3>
<p>LSV Markov Switching supersedes LSV Hybrid in terms of performance. It has a significant speed advantage due to the fact that we solve <span class="math notranslate nohighlight">\(n \times 1D\)</span> PDEs in LSV Markov switching (<span class="math notranslate nohighlight">\(n\)</span> being the number of volatility states) instead of a full 2D PDE in LSV Hybrid.</p>
<p>Both models ran on a daily basis during the assessment phase on BARX Risk. The screen-shot below shows the timing spent by each run. We look in particular at the grid time which is the total time spent processing on the grid.</p>
<p>We can see in 8.56 that LSV Markov Switching can be more than 25 times faster than LSV Hybrid.</p>
<p><img alt="Model timings in BARX Risk End of Day model runs" src="market/LSV/LSV Markov Switching  PDE/Fig/7.png" /></p>
<p>Figure 8.56: Model timings in BARX Risk End of Day model runs.</p>
</section>
<section id="other-testing">
<h3><span class="section-number">1.6.1.5.8.48. </span>8.7. Other Testing<a class="headerlink" href="#other-testing" title="Link to this heading">#</a></h3>
<p>N/A</p>
</section>
</section>
<section id="general-limitations">
<h2><span class="section-number">1.6.1.5.9. </span>9. General Limitations<a class="headerlink" href="#general-limitations" title="Link to this heading">#</a></h2>
<p>Any model is an approximation to reality.</p>
<p>As with most of the models of mathematical finance, a number of idealized assumptions have been made including, but not limited to:</p>
<ul class="simple">
<li><p>Assumption of no arbitrage</p></li>
<li><p>Assumption of frictionless trading</p></li>
<li><p>No limits on positions long nor short</p></li>
</ul>
<p>Numerical methods, as a rule, provide only an approximation to the true model price or risks.</p>
<p>Calibration routines, especially those relying on non-linear optimization, reproduce market inputs only approximately.</p>
<p>For any model there may exist market conditions for which this model is inappropriate.</p>
</section>
<section id="model-monitoring-kpis">
<h2><span class="section-number">1.6.1.5.10. </span>10. Model Monitoring – KPIs<a class="headerlink" href="#model-monitoring-kpis" title="Link to this heading">#</a></h2>
<p>(Only applicable to statistical models)
Detailed list with justification of the model monitoring requirements and expectations</p>
</section>
<section id="summary-of-feedback-received-during-development">
<h2><span class="section-number">1.6.1.5.11. </span>11. Summary of Feedback Received During Development<a class="headerlink" href="#summary-of-feedback-received-during-development" title="Link to this heading">#</a></h2>
<p>We have integrated LSV Markov switching model in a number of IT systems : BARX Risk, Sparta and BARX Option Dealer. This has been valuable as using the models within the systems has</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../../SABR/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><span class="section-number">1.7. </span>Interest Rate Volatility Model GSABR</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../LSV%20Markov%20Switching%20%20Monte%20Carlo/LSV_Markov_Switching_Monte_Carlo.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="section-number">1.6.1.4. </span>LSV Markov Switching : Monte Carlo</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023-2025, PRETORIAN Development Team
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/pretorian-project" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">1.6.1.5. LSV Markov Switching : PDE</a><ul>
<li><a class="reference internal" href="#executive-summary">1.6.1.5.1. 1. Executive Summary</a></li>
<li><a class="reference internal" href="#context">1.6.1.5.2. 2. Context</a></li>
<li><a class="reference internal" href="#product-payoff">1.6.1.5.3. 3. Product / Payoff</a><ul>
<li><a class="reference internal" href="#description">1.6.1.5.3.1. 3.1. Description</a><ul>
<li><a class="reference internal" href="#cash-settled-european-vanilla">1.6.1.5.3.1.1. 3.1.1. Cash settled european vanilla</a></li>
<li><a class="reference internal" href="#double-no-touch">1.6.1.5.3.1.2. 3.1.2. Double No touch</a></li>
<li><a class="reference internal" href="#one-touch-option">1.6.1.5.3.1.3. 3.1.3. One Touch option</a></li>
<li><a class="reference internal" href="#fx-single-knock-out-barrier">1.6.1.5.3.1.4. 3.1.4. FX single knock-out barrier</a></li>
</ul>
</li>
<li><a class="reference internal" href="#relationship-to-other-approved-payoffs">1.6.1.5.3.2. 3.2. Relationship to other approved payoffs</a></li>
<li><a class="reference internal" href="#inputs">1.6.1.5.3.3. 3.3. Inputs</a><ul>
<li><a class="reference internal" href="#id1">1.6.1.5.3.3.1. 3.3.1. Cash settled European vanilla</a></li>
<li><a class="reference internal" href="#id2">1.6.1.5.3.3.2. 3.3.2. Double No touch</a></li>
<li><a class="reference internal" href="#one-touch">1.6.1.5.3.3.3. 3.3.3. One touch</a></li>
<li><a class="reference internal" href="#cash-settled-fx-single-knock-out-barrier">1.6.1.5.3.3.4. 3.3.4. cash settled FX Single knock-out barrier</a></li>
</ul>
</li>
<li><a class="reference internal" href="#outputs">1.6.1.5.3.4. 3.4. Outputs</a></li>
<li><a class="reference internal" href="#payoff-analysis">1.6.1.5.3.5. 3.5. Payoff Analysis</a></li>
<li><a class="reference internal" href="#model-s-used">1.6.1.5.3.6. 3.6. Model(s) used</a></li>
</ul>
</li>
<li><a class="reference internal" href="#model-methodology">1.6.1.5.4. 4. Model / Methodology</a><ul>
<li><a class="reference internal" href="#id3">1.6.1.5.4.1. 4.1. Description</a><ul>
<li><a class="reference internal" href="#stochastic-volatility">1.6.1.5.4.1.1. 4.1.1. Stochastic Volatility</a></li>
<li><a class="reference internal" href="#local-stochastic-volatility">1.6.1.5.4.1.2. 4.1.2. Local Stochastic Volatility</a></li>
</ul>
</li>
<li><a class="reference internal" href="#assumptions-and-limitations">1.6.1.5.4.2. 4.2. Assumptions and Limitations</a></li>
<li><a class="reference internal" href="#justification-against-alternative-approaches">1.6.1.5.4.3. 4.3. Justification against alternative approaches</a></li>
<li><a class="reference internal" href="#conditions-of-use">1.6.1.5.4.4. 4.4. Conditions of Use</a></li>
<li><a class="reference internal" href="#model-parameters">1.6.1.5.4.5. 4.5. Model Parameters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#implementation-numerical-schema-description">1.6.1.5.5. 5. Implementation / Numerical Schema Description</a><ul>
<li><a class="reference internal" href="#id4">1.6.1.5.5.1. 5.1. Description</a><ul>
<li><a class="reference internal" href="#numerical-pde-solution">1.6.1.5.5.1.1. 5.1.1. Numerical PDE solution</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id5">1.6.1.5.5.2. 5.2. Inputs</a></li>
<li><a class="reference internal" href="#quality-control">1.6.1.5.5.3. 5.3. Quality control</a></li>
<li><a class="reference internal" href="#limitations">1.6.1.5.5.4. 5.4. Limitations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#calibration">1.6.1.5.6. 6. Calibration</a><ul>
<li><a class="reference internal" href="#id6">1.6.1.5.6.1. 6.1. Description</a></li>
<li><a class="reference internal" href="#id7">1.6.1.5.6.2. 6.2. Inputs</a></li>
<li><a class="reference internal" href="#market-data-inputs">1.6.1.5.6.3. 6.2.1. Market Data Inputs</a></li>
<li><a class="reference internal" href="#calibration-algorithm-inputs">1.6.1.5.6.4. 6.2.2. Calibration Algorithm Inputs</a></li>
<li><a class="reference internal" href="#other-inputs">1.6.1.5.6.5. 6.2.3. Other Inputs</a></li>
<li><a class="reference internal" href="#justification">1.6.1.5.6.6. 6.3. Justification</a></li>
<li><a class="reference internal" href="#id8">1.6.1.5.6.7. 6.4. Quality control</a></li>
<li><a class="reference internal" href="#id9">1.6.1.5.6.8. 6.5. Limitations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#risk">1.6.1.5.7. 7. Risk</a><ul>
<li><a class="reference internal" href="#id10">1.6.1.5.7.1. 7.1. Description</a></li>
<li><a class="reference internal" href="#id11">1.6.1.5.7.2. 7.2. Inputs</a></li>
<li><a class="reference internal" href="#id12">1.6.1.5.7.3. 7.3. Limitations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tests-analyses-performed-on-payoff-model">1.6.1.5.8. 8. Tests &amp; Analyses performed on Payoff / Model</a><ul>
<li><a class="reference internal" href="#back-testing">1.6.1.5.8.1. 8.1. Back-testing</a></li>
<li><a class="reference internal" href="#eurusd">1.6.1.5.8.2. EURUSD</a></li>
<li><a class="reference internal" href="#gbpusd">1.6.1.5.8.3. GBPUSD</a></li>
<li><a class="reference internal" href="#usdjpy">1.6.1.5.8.4. USDJPY</a></li>
<li><a class="reference internal" href="#audusd">1.6.1.5.8.5. AUDUSD</a></li>
<li><a class="reference internal" href="#conclusion">1.6.1.5.8.6. Conclusion</a></li>
<li><a class="reference internal" href="#stress-testing">1.6.1.5.8.7. 8.2. Stress-testing</a></li>
<li><a class="reference internal" href="#impact-of-assumptions">1.6.1.5.8.8. 8.3.    Impact of Assumptions</a></li>
<li><a class="reference internal" href="#accuracy-convergence-and-stability">1.6.1.5.8.9. 8.4.    Accuracy, convergence and stability</a></li>
<li><a class="reference internal" href="#short-dated-vanillas">1.6.1.5.8.10. 8.4.1.    Short dated Vanillas</a><ul>
<li><a class="reference internal" href="#table-8-1-market-data-summary">1.6.1.5.8.10.1. Table 8.1: Market data summary</a></li>
<li><a class="reference internal" href="#table-8-2-lsv-ms-base-model-parameters">1.6.1.5.8.10.2. Table 8.2: LSV MS base model parameters</a></li>
<li><a class="reference internal" href="#table-8-3-pde-settings">1.6.1.5.8.10.3. Table 8.3: PDE settings</a></li>
<li><a class="reference internal" href="#table-8-4-lsv-ms-model-parameters-shifted">1.6.1.5.8.10.4. Table 8.4: LSV MS model parameters shifted</a></li>
<li><a class="reference internal" href="#table-8-5-lsv-ms-model-parameters-shifted">1.6.1.5.8.10.5. Table 8.5: LSV MS model parameters shifted</a></li>
<li><a class="reference internal" href="#table-8-6-lsv-ms-base-model-parameters">1.6.1.5.8.10.6. Table 8.6: LSV MS base model parameters</a></li>
<li><a class="reference internal" href="#table-8-7-lsv-ms-model-parameters-shifted">1.6.1.5.8.10.7. Table 8.7: LSV MS model parameters shifted</a></li>
<li><a class="reference internal" href="#table-8-8-lsv-ms-model-parameters-shifted">1.6.1.5.8.10.8. Table 8.8: LSV MS model parameters shifted</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id13">1.6.1.5.8.11. Conclusion</a></li>
<li><a class="reference internal" href="#variation-of-transition-q-parameters">1.6.1.5.8.12. Variation of transition q parameters</a></li>
<li><a class="reference internal" href="#base-lsv-ms-q-parameters-shift-10">1.6.1.5.8.13. 1. Base LSV MS q parameters - shift 10%:</a><ul>
<li><a class="reference internal" href="#table-8-11-lsv-ms-q-parameters-shifted">1.6.1.5.8.13.1. Table 8.11: LSV MS q parameters shifted</a></li>
</ul>
</li>
<li><a class="reference internal" href="#base-lsv-ms-q-parameters-shift-20">1.6.1.5.8.14. 2. Base LSV MS q parameters - shift 20%:</a><ul>
<li><a class="reference internal" href="#table-8-12-lsv-ms-q-parameters-shifted">1.6.1.5.8.14.1. Table 8.12: LSV MS q parameters shifted</a></li>
</ul>
</li>
<li><a class="reference internal" href="#base-lsv-ms-q-parameters-shift-40">1.6.1.5.8.15. 3. Base LSV MS q parameters - shift 40%:</a><ul>
<li><a class="reference internal" href="#table-8-13-lsv-ms-q-parameters-shifted">1.6.1.5.8.15.1. Table 8.13: LSV MS q parameters shifted</a></li>
</ul>
</li>
<li><a class="reference internal" href="#base-lsv-ms-q-parameters-shift-60">1.6.1.5.8.16. 4. Base LSV MS q parameters - shift 60%:</a></li>
<li><a class="reference internal" href="#id14">1.6.1.5.8.17. Conclusion</a></li>
<li><a class="reference internal" href="#long-dated-vanillas">1.6.1.5.8.18. 8.4.2.    Long dated Vanillas</a><ul>
<li><a class="reference internal" href="#table-8-16-market-data-summary">1.6.1.5.8.18.1. Table 8.16: Market data summary</a></li>
<li><a class="reference internal" href="#table-8-17-lsv-ms-base-model-parameters">1.6.1.5.8.18.2. Table 8.17: LSV MS base model parameters</a></li>
<li><a class="reference internal" href="#table-8-18-pde-settings">1.6.1.5.8.18.3. Table 8.18: PDE settings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#variation-of-vol-of-vol-parameters">1.6.1.5.8.19. Variation of vol of vol parameters</a><ul>
<li><a class="reference internal" href="#vol-of-vol-close-to-zero">1.6.1.5.8.19.1. 1. Vol of vol close to zero:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#base-lsv-ms-model-parameters-shift-40">1.6.1.5.8.20. 2. Base LSV MS model parameters - shift -40%:</a></li>
<li><a class="reference internal" href="#base-lsv-ms-model-parameters-shift-20">1.6.1.5.8.21. 3. Base LSV MS model parameters - shift -20%:</a></li>
<li><a class="reference internal" href="#base-lsv-ms-model-parameters-shift-0">1.6.1.5.8.22. 4. Base LSV MS model parameters - shift 0%:</a></li>
<li><a class="reference internal" href="#id15">1.6.1.5.8.23. 5. Base LSV MS model parameters - shift 20%:</a></li>
<li><a class="reference internal" href="#id16">1.6.1.5.8.24. 6. Base LSV MS model parameters - shift 40%:</a></li>
<li><a class="reference internal" href="#base-lsv-ms-model-parameters-shift-80">1.6.1.5.8.25. 8. Base LSV MS model parameters - shift 80%:</a></li>
<li><a class="reference internal" href="#id17">1.6.1.5.8.26. Conclusion</a></li>
<li><a class="reference internal" href="#fx-convergence-for-lsv-ms-long-dated-vanilla-20y">1.6.1.5.8.27. FX convergence for LSV MS Long dated vanilla - 20Y</a></li>
<li><a class="reference internal" href="#time-convergence-for-lsv-ms-long-dated-vanilla-20y">1.6.1.5.8.28. Time convergence for LSV MS Long dated vanilla - 20Y</a></li>
<li><a class="reference internal" href="#id18">1.6.1.5.8.29. Variation of transition q parameters</a></li>
<li><a class="reference internal" href="#id19">1.6.1.5.8.30. 1. Base LSV MS q parameters - shift 10%:</a></li>
<li><a class="reference internal" href="#id20">1.6.1.5.8.31. 2. Base LSV MS q parameters - shift 20%:</a></li>
<li><a class="reference internal" href="#id21">1.6.1.5.8.32. 3. Base LSV MS q parameters - shift 40%:</a></li>
<li><a class="reference internal" href="#id22">1.6.1.5.8.33. 4. Base LSV MS q parameters - shift 60%:</a></li>
<li><a class="reference internal" href="#base-lsv-ms-q-parameters-shift-80">1.6.1.5.8.34. 5. Base LSV MS q parameters - shift 80%:</a></li>
<li><a class="reference internal" href="#id23">1.6.1.5.8.35. Conclusion</a></li>
<li><a class="reference internal" href="#bumpsize0-0001">1.6.1.5.8.36. BumpSize0.0001</a></li>
<li><a class="reference internal" href="#bumpsize0-001">1.6.1.5.8.37. BumpSize0.001</a></li>
<li><a class="reference internal" href="#diff-as-ntl">1.6.1.5.8.38. Diff as % ntl</a></li>
<li><a class="reference internal" href="#bumpsize0-0001-bumpsize0-001-bumpsize0-05">1.6.1.5.8.39. BumpSize0.0001, BumpSize0.001, BumpSize0.05</a></li>
<li><a class="reference internal" href="#comparison-to-other-models">1.6.1.5.8.40. 8.6. Comparison to Other Models</a></li>
<li><a class="reference internal" href="#exotic-prices">1.6.1.5.8.41. 8.6.1. Exotic prices</a></li>
<li><a class="reference internal" href="#risk-spot-scenarios">1.6.1.5.8.42. Risk Spot Scenarios</a></li>
<li><a class="reference internal" href="#maturity-barrier1-barrier2-tv-lv-lsv-hybrid-lsv-ms">1.6.1.5.8.43. Maturity barrier1 barrier2 TV LV LSV Hybrid LSV MS</a></li>
<li><a class="reference internal" href="#id24">1.6.1.5.8.44. Maturity barrier1 barrier2 TV LV LSV Hybrid LSV MS</a></li>
<li><a class="reference internal" href="#boundary-cases">1.6.1.5.8.45. 8.5. Boundary Cases</a></li>
<li><a class="reference internal" href="#stability">1.6.1.5.8.46. 8.6.2. Stability</a></li>
<li><a class="reference internal" href="#performance">1.6.1.5.8.47. 8.6.3. Performance</a></li>
<li><a class="reference internal" href="#other-testing">1.6.1.5.8.48. 8.7. Other Testing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#general-limitations">1.6.1.5.9. 9. General Limitations</a></li>
<li><a class="reference internal" href="#model-monitoring-kpis">1.6.1.5.10. 10. Model Monitoring – KPIs</a></li>
<li><a class="reference internal" href="#summary-of-feedback-received-during-development">1.6.1.5.11. 11. Summary of Feedback Received During Development</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../../_static/documentation_options.js?v=454d727b"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=ab308175"></script>
    <script src="../../../_static/custom.js?v=92eda4d4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../../../_static/design-tabs.js?v=36754332"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "displayMath": [["$$", "$$"], ["\\[", "\\]"]], "processEscapes": true, "processEnvironments": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../_static/custom.js?v=92eda4d4"></script>
    </body>
</html>